!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=139)}([function(t,e,n){"use strict";t.exports=n(140)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IS_DEV_MODE=e.SCENERY_PIXEL_DENSITY=e.DEFAULT_PLAYER_RADIUS=e.DEFAULT_PLAYER_HEIGHT=e.TARGET_MILLIS=e.TARGET_FPS=e.ZFAR=e.ZNEAR=e.FOV=e.ASPECT_RATIO=e.HEIGHT=e.WIDTH=e.RES_DIV=e.DOM_HEIGHT=e.DOM_WIDTH=e.VERSION=e.MAJOR=e.PHASE=e.MINOR=void 0,e.MINOR="1",e.PHASE="0",e.MAJOR="1",e.VERSION=`V${e.MAJOR}.${e.PHASE}.${e.MINOR}`,e.DOM_WIDTH=1280,e.DOM_HEIGHT=680,e.RES_DIV=4,e.WIDTH=e.DOM_WIDTH/e.RES_DIV,e.HEIGHT=e.DOM_HEIGHT/e.RES_DIV,e.ASPECT_RATIO=e.DOM_WIDTH/e.DOM_HEIGHT,e.FOV=45,e.ZNEAR=.001,e.ZFAR=1e4,e.TARGET_FPS=60,e.TARGET_MILLIS=Math.floor(1e3/e.TARGET_FPS),e.DEFAULT_PLAYER_HEIGHT=.5,e.DEFAULT_PLAYER_RADIUS=.5,e.SCENERY_PIXEL_DENSITY=10;e.IS_DEV_MODE=()=>!1},function(t,e){(function(){t.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(182),e),i(n(183),e),i(n(97),e),i(n(58),e)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.audios=e.Audios=void 0;const r=n(93);var i;!function(t){t.FOOTSTEP_0="FOOTSTEP_0",t.FOOTSTEP_1="FOOTSTEP_1",t.FOOTSTEP_2="FOOTSTEP_2",t.FOOTSTEP_3="FOOTSTEP_3",t.DOOR_OPEN="DOOR_OPEN",t.BUTTON_PRESS="BUTTON_PRESS",t.DOOR_UNLOCK="DOOR_UNLOCK",t.LOCK_BREAK="LOCK_BREAK",t.LOCK_CLICK="LOCK_CLICK",t.SONG_BIT_STEP="SONG_BIT_STEP",t.SONG_CURIOUS_NOISES="SONG_CURIOUS_NOISES",t.CHEST_OPEN_0="CHEST_OPEN_0",t.CHEST_OPEN_1="CHEST_OPEN_1",t.EQUIP_0="EQUIP_0",t.EQUIP_1="EQUIP_1",t.COLLECT_0="COLLECT_0",t.ATTACK_0="ATTACK_0",t.MENU_0="MENU_0",t.BUTTON_0="BUTTON_0",t.DAMAGE_0="DAMAGE_0",t.ENEMY_HURT="ENEMY_HURT",t.ENEMY_KILLED="ENEMY_KILLED",t.ENEMY_RESIST="ENEMY_RESIST",t.CHEST_APPEAR="CHEST_APPEAR",t.CHEST_DISAPPEAR="CHEST_DISAPPEAR",t.EATING="EATING",t.START="START",t.END="END",t.WON="WON",t.CHEST_STAGE="CHEST_STAGE",t.FIGHT="FIGHT",t.BEAT_ENEMIES="BEAT_ENEMIES"}(i=e.Audios||(e.Audios={})),e.audios=new r.ResourceManifestBuilder,e.audios.Audio(i.FOOTSTEP_0,"./audio/kenney_rpgaudio/footstep00.mp3"),e.audios.Audio(i.FOOTSTEP_1,"./audio/kenney_rpgaudio/footstep01.mp3"),e.audios.Audio(i.FOOTSTEP_2,"./audio/kenney_rpgaudio/footstep02.mp3"),e.audios.Audio(i.FOOTSTEP_3,"./audio/kenney_rpgaudio/footstep03.mp3"),e.audios.Audio(i.DOOR_OPEN,"./audio/effect/door_open.mp3"),e.audios.Audio(i.BUTTON_PRESS,"./audio/oneshot/button_press.mp3"),e.audios.Audio(i.DOOR_UNLOCK,"./audio/oneshot/door_unlock.mp3"),e.audios.Audio(i.LOCK_BREAK,"./audio/oneshot/lock_break.mp3"),e.audios.Audio(i.LOCK_CLICK,"./audio/oneshot/lock_click.mp3"),e.audios.Audio(i.CHEST_OPEN_0,"./audio/kenney_rpgaudio/doorClose_2.mp3"),e.audios.Audio(i.CHEST_OPEN_1,"./audio/kenney_rpgaudio/doorOpen_1.mp3"),e.audios.Audio(i.EQUIP_0,"./audio/kenney_rpgaudio/cloth1.mp3"),e.audios.Audio(i.EQUIP_1,"./audio/kenney_rpgaudio/cloth2.mp3"),e.audios.Audio(i.COLLECT_0,"./audio/kenney_rpgaudio/handleCoins2.mp3"),e.audios.Audio(i.ATTACK_0,"./audio/whoosh.mp3"),e.audios.Audio(i.MENU_0,"./audio/kenney_rpgaudio/bookFlip2.mp3"),e.audios.Audio(i.BUTTON_0,"./audio/kenney_rpgaudio/metalClick.mp3"),e.audios.Audio(i.DAMAGE_0,"./audio/player_hit.mp3"),e.audios.Audio(i.START,"./audio/incoming.mp3"),e.audios.Audio(i.END,"./audio/end.mp3"),e.audios.Audio(i.WON,"./audio/grunt_yay.mp3"),e.audios.Audio(i.ENEMY_HURT,"./audio/slam.mp3"),e.audios.Audio(i.ENEMY_KILLED,"./audio/point.mp3"),e.audios.Audio(i.ENEMY_RESIST,"./audio/kenney_rpgaudio/handleSmallLeather.mp3"),e.audios.Audio(i.CHEST_APPEAR,"./audio/kenney_rpgaudio/doorClose_4.mp3"),e.audios.Audio(i.CHEST_DISAPPEAR,"./audio/kenney_rpgaudio/cloth3.mp3"),e.audios.Audio(i.EATING,"./audio/kenney_rpgaudio/drawKnife3.mp3"),e.audios.Audio(i.CHEST_STAGE,"./audio/fadeaway.mp3"),e.audios.Audio(i.FIGHT,"./audio/fight.mp3"),e.audios.Audio(i.BEAT_ENEMIES,"./audio/beat.mp3"),e.audios.Audio(i.SONG_BIT_STEP,"./audio/background/bit_step.mp3",{bpm:70}),e.audios.Audio(i.SONG_CURIOUS_NOISES,"./audio/background/curious_noises.mp3",{bpm:70})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextComponent=e.TextShadow=e.TextColour=e.TextSize=e.TextFont=void 0;const r=n(0);var i,o,a;!function(t){t.REGULAR="yoster_islandregular"}(i=e.TextFont||(e.TextFont={})),function(t){t[t.VSMALL=14]="VSMALL",t[t.SMALL=20]="SMALL",t[t.MED=36]="MED",t[t.BIG=50]="BIG"}(o=e.TextSize||(e.TextSize={})),function(t){t.LIGHT="#c0cbdc",t.LESS_LIGHT="#5a6988",t.DARK="#3e2731",t.RED="#e43b44",t.YELLOW="#feae34",t.GOLD="#fee761",t.STEEL="#98a198",t.BLUE="#637bff"}(a=e.TextColour||(e.TextColour={})),function(t){t.SMALL="0px 0px 8px #000000",t.LARGE="0px 0px 16px #000000"}(e.TextShadow||(e.TextShadow={}));const s=[""];e.TextComponent=t=>{const e=(t=>Object.assign({text:"Default",style:{},font:i.REGULAR,size:o.MED,colour:a.LIGHT},t))(t),n=s.find(t=>t===e.text)?{}:{fontFamily:e.font},u=e.clickable?{cursor:"pointer"}:{},c=e.shadow||"";return r.createElement("div",{style:Object.assign(Object.assign(Object.assign(Object.assign({},n),{fontSize:e.size,color:e.colour,MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none",textShadow:c}),u),e.style),onClick:()=>e.clickable&&e.clickable()},e.text)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.easeInOutCirc=e.sin=e.floorStepper=e.identity=e.interpolate=e.sequence=e.parallel=e.animation=void 0;const r=n(195),i=n(101);e.animation=t=>new i.GameAnimation(t);e.parallel=(...t)=>new r.CompositeAnimation({type:r.CompositeAnimationType.PARALLEL,animations:t});e.sequence=(...t)=>new r.CompositeAnimation({type:r.CompositeAnimationType.SERIAL,animations:t});e.interpolate=(t,e)=>n=>(1-n)*t+n*e;e.identity=t=>t;e.floorStepper=t=>e=>1===e?t-1:Math.floor(e*t),e.sin=function(t){return Math.sin(t*Math.PI/2)},e.easeInOutCirc=function(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDispatchListener=e.useGlobalState=void 0;const r=n(0),i=n(57);e.useGlobalState=()=>{const[t,e]=r.useState(i.store.getState());return r.useEffect(()=>{const t=()=>e(i.store.getState());return i.store.addChangeListener(t),()=>i.store.removeChangeListener(t)},[]),[t,i.store.getActions()]};e.useDispatchListener=(t,e)=>{r.useEffect(()=>(i.store.subscribe(t),()=>i.store.unsubscribe(t)),e)}},function(t,e,n){(function(){var e,r,i,o,a,s,u,c,l,f,h,d,p,m,g,v,y,b={}.hasOwnProperty;y=n(13),v=y.isObject,g=y.isFunction,m=y.isEmpty,p=y.getValue,c=null,i=null,o=null,a=null,s=null,h=null,d=null,f=null,u=null,r=null,l=null,e=null,t.exports=function(){function t(t){this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,c||(c=n(63),i=n(65),o=n(66),a=n(67),s=n(68),h=n(73),d=n(74),f=n(75),u=n(109),r=n(2),l=n(211),n(64),e=n(212))}return Object.defineProperty(t.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new l(this.children)),this.childNodeList}}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t-1]||null}}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t+1]||null}}),Object.defineProperty(t.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(t.prototype,"textContent",{get:function(){var t,e,n,i,o;if(this.nodeType===r.Element||this.nodeType===r.DocumentFragment){for(o="",e=0,n=(i=this.children).length;e<n;e++)(t=i[e]).textContent&&(o+=t.textContent);return o}return null},set:function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),t.prototype.setParent=function(t){var e,n,r,i,o;for(this.parent=t,t&&(this.options=t.options,this.stringify=t.stringify),o=[],n=0,r=(i=this.children).length;n<r;n++)e=i[n],o.push(e.setParent(this));return o},t.prototype.element=function(t,e,n){var r,i,o,a,s,u,c,l,f,h,d;if(u=null,null===e&&null==n&&(e=(f=[{},null])[0],n=f[1]),null==e&&(e={}),e=p(e),v(e)||(n=(h=[e,n])[0],e=h[1]),null!=t&&(t=p(t)),Array.isArray(t))for(o=0,c=t.length;o<c;o++)i=t[o],u=this.element(i);else if(g(t))u=this.element(t.apply());else if(v(t)){for(s in t)if(b.call(t,s))if(d=t[s],g(d)&&(d=d.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===s.indexOf(this.stringify.convertAttKey))u=this.attribute(s.substr(this.stringify.convertAttKey.length),d);else if(!this.options.separateArrayItems&&Array.isArray(d)&&m(d))u=this.dummy();else if(v(d)&&m(d))u=this.element(s);else if(this.options.keepNullNodes||null!=d)if(!this.options.separateArrayItems&&Array.isArray(d))for(a=0,l=d.length;a<l;a++)i=d[a],(r={})[s]=i,u=this.element(r);else v(d)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===s.indexOf(this.stringify.convertTextKey)?u=this.element(d):(u=this.element(s)).element(d):u=this.element(s,d);else u=this.dummy()}else u=this.options.keepNullNodes||null!==n?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===t.indexOf(this.stringify.convertPIKey)?this.instruction(t.substr(this.stringify.convertPIKey.length),n):this.node(t,e,n):this.dummy();if(null==u)throw new Error("Could not create any elements with: "+t+". "+this.debugInfo());return u},t.prototype.insertBefore=function(t,e,n){var r,i,o,a,s;if(null!=t?t.type:void 0)return a=e,(o=t).setParent(this),a?(i=children.indexOf(a),s=children.splice(i),children.push(o),Array.prototype.push.apply(children,s)):children.push(o),o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return i=this.parent.children.indexOf(this),s=this.parent.children.splice(i),r=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,s),r},t.prototype.insertAfter=function(t,e,n){var r,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i+1),r=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,o),r},t.prototype.remove=function(){var t;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat([])),this.parent},t.prototype.node=function(t,e,n){var r,i;return null!=t&&(t=p(t)),e||(e={}),e=p(e),v(e)||(n=(i=[e,n])[0],e=i[1]),r=new c(this,t,e),null!=n&&r.text(n),this.children.push(r),r},t.prototype.text=function(t){var e;return v(t)&&this.element(t),e=new d(this,t),this.children.push(e),this},t.prototype.cdata=function(t){var e;return e=new i(this,t),this.children.push(e),this},t.prototype.comment=function(t){var e;return e=new o(this,t),this.children.push(e),this},t.prototype.commentBefore=function(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.commentAfter=function(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e+1),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.raw=function(t){var e;return e=new h(this,t),this.children.push(e),this},t.prototype.dummy=function(){return new u(this)},t.prototype.instruction=function(t,e){var n,r,i,o,a;if(null!=t&&(t=p(t)),null!=e&&(e=p(e)),Array.isArray(t))for(o=0,a=t.length;o<a;o++)n=t[o],this.instruction(n);else if(v(t))for(n in t)b.call(t,n)&&(r=t[n],this.instruction(n,r));else g(e)&&(e=e.apply()),i=new f(this,t,e),this.children.push(i);return this},t.prototype.instructionBefore=function(t,e){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,r),this},t.prototype.instructionAfter=function(t,e){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n+1),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,r),this},t.prototype.declaration=function(t,e,n){var i,o;return i=this.document(),o=new a(i,t,e,n),0===i.children.length?i.children.unshift(o):i.children[0].type===r.Declaration?i.children[0]=o:i.children.unshift(o),i.root()||i},t.prototype.dtd=function(t,e){var n,i,o,a,u,c,l,f,h;for(n=this.document(),i=new s(n,t,e),o=a=0,c=(f=n.children).length;a<c;o=++a)if(f[o].type===r.DocType)return n.children[o]=i,i;for(o=u=0,l=(h=n.children).length;u<l;o=++u)if(h[o].isRoot)return n.children.splice(o,0,i),i;return n.children.push(i),i},t.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},t.prototype.root=function(){var t;for(t=this;t;){if(t.type===r.Document)return t.rootObject;if(t.isRoot)return t;t=t.parent}},t.prototype.document=function(){var t;for(t=this;t;){if(t.type===r.Document)return t;t=t.parent}},t.prototype.end=function(t){return this.document().end(t)},t.prototype.prev=function(){var t;if((t=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[t-1]},t.prototype.next=function(){var t;if(-1===(t=this.parent.children.indexOf(this))||t===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[t+1]},t.prototype.importDocument=function(t){var e;return(e=t.root().clone()).parent=this,e.isRoot=!1,this.children.push(e),this},t.prototype.debugInfo=function(t){var e,n;return null!=(t=t||this.name)||(null!=(e=this.parent)?e.name:void 0)?null==t?"parent: <"+this.parent.name+">":(null!=(n=this.parent)?n.name:void 0)?"node: <"+t+">, parent: <"+this.parent.name+">":"node: <"+t+">":""},t.prototype.ele=function(t,e,n){return this.element(t,e,n)},t.prototype.nod=function(t,e,n){return this.node(t,e,n)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.doc=function(){return this.document()},t.prototype.dec=function(t,e,n){return this.declaration(t,e,n)},t.prototype.e=function(t,e,n){return this.element(t,e,n)},t.prototype.n=function(t,e,n){return this.node(t,e,n)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.u=function(){return this.up()},t.prototype.importXMLBuilder=function(t){return this.importDocument(t)},t.prototype.replaceChild=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.removeChild=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.appendChild=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.hasChildNodes=function(){return 0!==this.children.length},t.prototype.cloneNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isSupported=function(t,e){return!0},t.prototype.hasAttributes=function(){return 0!==this.attribs.length},t.prototype.compareDocumentPosition=function(t){var n;return this,this===t?0:this.document()!==t.document()?(n=e.Disconnected|e.ImplementationSpecific,Math.random()<.5?n|=e.Preceding:n|=e.Following,n):this.isAncestor(t)?e.Contains|e.Preceding:this.isDescendant(t)?e.Contains|e.Following:this.isPreceding(t)?e.Preceding:e.Following},t.prototype.isSameNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.lookupPrefix=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isDefaultNamespace=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.lookupNamespaceURI=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isEqualNode=function(t){var e,n,r;if(t.nodeType!==this.nodeType)return!1;if(t.children.length!==this.children.length)return!1;for(e=n=0,r=this.children.length-1;0<=r?n<=r:n>=r;e=0<=r?++n:--n)if(!this.children[e].isEqualNode(t.children[e]))return!1;return!0},t.prototype.getFeature=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.setUserData=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getUserData=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.contains=function(t){return!!t&&(t===this||this.isDescendant(t))},t.prototype.isDescendant=function(t){var e,n,r,i;for(n=0,r=(i=this.children).length;n<r;n++){if(t===(e=i[n]))return!0;if(e.isDescendant(t))return!0}return!1},t.prototype.isAncestor=function(t){return t.isDescendant(this)},t.prototype.isPreceding=function(t){var e,n;return e=this.treePosition(t),n=this.treePosition(this),-1!==e&&-1!==n&&e<n},t.prototype.isFollowing=function(t){var e,n;return e=this.treePosition(t),n=this.treePosition(this),-1!==e&&-1!==n&&e>n},t.prototype.treePosition=function(t){var e,n;return n=0,e=!1,this.foreachTreeNode(this.document(),(function(r){if(n++,!e&&r===t)return e=!0})),e?n:-1},t.prototype.foreachTreeNode=function(t,e){var n,r,i,o,a;for(t||(t=this.document()),r=0,i=(o=t.children).length;r<i;r++){if(a=e(n=o[r]))return a;if(a=this.foreachTreeNode(n,e))return a}},t}()}).call(this)},function(t,e,n){"use strict";t.exports=function(t){return i.test("number"==typeof t?r(t):t.charAt(0))};var r=String.fromCharCode,i=/\s/},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProcedureService=void 0;const r=n(1),i=n(29);class o{constructor(){this.timeoutArray=new i.ConsistentArray,this.intervalArray=new i.ConsistentArray,this.realtime=Date.now(),this.gametime=Date.now()}gameUpdate(){this.gametime+=r.TARGET_MILLIS}update(){this.realtime+=r.TARGET_MILLIS,this.checkTimers(),this.timeoutArray.sync(),this.intervalArray.sync()}setTimeout(t,e){return this.timeoutArray.add(this.constructTimeoutReference(t,e,!1)),o.id++,o.id-1}setInterval(t,e){return this.intervalArray.add(this.constructTimeoutReference(t,e,!1)),o.id++,o.id-1}setGameTimeout(t,e){return this.timeoutArray.add(this.constructTimeoutReference(t,e,!0)),o.id++,o.id-1}setGameInterval(t,e){return this.intervalArray.add(this.constructTimeoutReference(t,e,!0)),o.id++,o.id-1}clearTimeout(t){const e=this.timeoutArray.getArray().find(e=>e.id===t);e&&this.timeoutArray.remove(e)}clearInterval(t){const e=this.intervalArray.getArray().find(e=>e.id===t);e&&this.intervalArray.remove(e)}getPendingTimerCounts(){return{intervals:this.intervalArray.getArray().length,timeouts:this.timeoutArray.getArray().length}}checkTimers(){for(const t of this.timeoutArray.getArray()){this.shouldRemoveTimer(t)&&(t.callback(),this.timeoutArray.remove(t))}for(const t of this.intervalArray.getArray()){this.shouldRemoveTimer(t)&&(t.callback(),t.startTime=t.gameTime?this.gametime:this.realtime,t.endTime=t.startTime+t.length)}}shouldRemoveTimer(t){const{endTime:e,gameTime:n}=t;return n?this.gametime>=e:this.realtime>=e}constructTimeoutReference(t,e,n){return{id:o.id,callback:t,startTime:n?this.gametime:this.realtime,endTime:(n?this.gametime:this.realtime)+e,length:e,gameTime:n}}}o.id=1,e.ProcedureService=new o},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(92),e)},function(t,e){(function(){var e,n,r,i,o,a,s,u=[].slice,c={}.hasOwnProperty;e=function(){var t,e,n,r,i,a;if(a=arguments[0],i=2<=arguments.length?u.call(arguments,1):[],o(Object.assign))Object.assign.apply(null,arguments);else for(t=0,n=i.length;t<n;t++)if(null!=(r=i[t]))for(e in r)c.call(r,e)&&(a[e]=r[e]);return a},o=function(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)},a=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},r=function(t){return o(Array.isArray)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},i=function(t){var e;if(r(t))return!t.length;for(e in t)if(c.call(t,e))return!1;return!0},s=function(t){var e,n;return a(t)&&(n=Object.getPrototypeOf(t))&&(e=n.constructor)&&"function"==typeof e&&e instanceof e&&Function.prototype.toString.call(e)===Function.prototype.toString.call(Object)},n=function(t){return o(t.valueOf)?t.valueOf():t},t.exports.assign=e,t.exports.isFunction=o,t.exports.isObject=a,t.exports.isArray=r,t.exports.isEmpty=i,t.exports.isPlainObject=s,t.exports.getValue=n}).call(this)},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useServiceLocator=e.useGame=void 0;const r=n(0),i=n(96);e.useGame=()=>r.useContext(i.gameContext);e.useServiceLocator=()=>r.useContext(i.gameContext).getServiceLocator()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InteractionSourceType=e.InteractionType=void 0,function(t){t.ATTACK="ATTACK",t.BARTER="BARTER",t.INTERACT="INTERACT"}(e.InteractionType||(e.InteractionType={})),function(t){t.PLAYER="PLAYER",t.ENTITY="ENTITY"}(e.InteractionSourceType||(e.InteractionSourceType={}))},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";var r=n(47),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=f;var o=Object.create(n(30));o.inherits=n(17);var a=n(113),s=n(79);o.inherits(f,a);for(var u=i(s.prototype),c=0;c<u.length;c++){var l=u[c];f.prototype[l]||(f.prototype[l]=s.prototype[l])}function f(t){if(!(this instanceof f))return new f(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),f.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Entity=void 0;const r=n(38),i=n(37),o=n(20);e.Entity=class{constructor(t,e,...n){this.serviceLocator=t,this.state=e,this.type=o.EntityType.NULL,this.shouldEmit=!1,this.eventSubscriber=new i.FunctionEventSubscriber(r.emptyActions),this.components=n,this.newState=e,n.forEach(t=>this.eventSubscriber.subscribe(t.getActions(this)))}withType(t){return this.type=t,this}getState(){return this.newState}update(){this.shouldEmit&&(this.shouldEmit=!1,this.getActions().onStateTransition(this.state,this.newState)),this.state=this.newState;for(let t=0;t<this.components.length;t++)this.components[t].update&&this.components[t].update(this)}setState(t,e=!0){this.newState=Object.assign(Object.assign({},this.newState),t),this.shouldEmit=this.shouldEmit||e}getActions(){return this.eventSubscriber.actions()}getServiceLocator(){return this.serviceLocator}getComponents(){return this.components}delete(){this.serviceLocator.getWorld().removeEntity(this)}create(){this.serviceLocator.getWorld().addEntity(this)}getEventSubscriber(){return this.eventSubscriber}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntityFactory=e.EntityType=void 0;const r=n(122),i=n(119),o=n(50),a=n(128),s=n(82),u=n(83),c=n(129);var l;function f(t,e){return e||console.error(`Missing entity type "${t}"`),(n,r)=>e(n,r).withType(t)}!function(t){t.NULL="NULL",t.DOOR="DOOR",t.DOOR_LOCKED="DOOR_LOCKED",t.NPC_BULKY_MAN="NPC_BULKY_MAN",t.ITEM_DROP="ITEM_DROP",t.LADDER="LADDER",t.SCENERY_FLOOR="SCENERY_FLOOR",t.SCENERY_WALL="SCENERY_WALL",t.SCENERY_SPRITE="SCENERY_SPRITE",t.SCRIPT="SCRIPT",t.CHEST="CHEST"}(l=e.EntityType||(e.EntityType={}));const h={[l.NULL]:()=>{throw new Error("Entity type is null")},[l.DOOR]:(...t)=>(0,i.createDoor)(t[0],t[1]),[l.DOOR_LOCKED]:(...t)=>(0,i.createLockedDoor)(t[0],t[1]),[l.ITEM_DROP]:o.createItemDrop,[l.LADDER]:a.createLadder,[l.SCENERY_FLOOR]:u.createStaticFloor,[l.SCENERY_WALL]:u.createStaticWall,[l.SCENERY_SPRITE]:u.createStaticSprite,[l.NPC_BULKY_MAN]:s.createNPC,[l.SCRIPT]:c.createScript,[l.CHEST]:r.createChest},d={};for(const t in h){const e=t;d[e]=f(e,h[e])}e.EntityFactory=d},function(t,e,n){"use strict";n.r(e),n.d(e,"glMatrix",(function(){return r})),n.d(e,"mat2",(function(){return i})),n.d(e,"mat2d",(function(){return o})),n.d(e,"mat3",(function(){return a})),n.d(e,"mat4",(function(){return s})),n.d(e,"quat",(function(){return l})),n.d(e,"quat2",(function(){return f})),n.d(e,"vec2",(function(){return h})),n.d(e,"vec3",(function(){return u})),n.d(e,"vec4",(function(){return c}));var r={};n.r(r),n.d(r,"EPSILON",(function(){return d})),n.d(r,"ARRAY_TYPE",(function(){return p})),n.d(r,"RANDOM",(function(){return m})),n.d(r,"setMatrixArrayType",(function(){return g})),n.d(r,"toRadian",(function(){return y})),n.d(r,"equals",(function(){return b}));var i={};n.r(i),n.d(i,"create",(function(){return E})),n.d(i,"clone",(function(){return S})),n.d(i,"copy",(function(){return w})),n.d(i,"identity",(function(){return _})),n.d(i,"fromValues",(function(){return T})),n.d(i,"set",(function(){return x})),n.d(i,"transpose",(function(){return A})),n.d(i,"invert",(function(){return I})),n.d(i,"adjoint",(function(){return P})),n.d(i,"determinant",(function(){return M})),n.d(i,"multiply",(function(){return O})),n.d(i,"rotate",(function(){return C})),n.d(i,"scale",(function(){return R})),n.d(i,"fromRotation",(function(){return D})),n.d(i,"fromScaling",(function(){return k})),n.d(i,"str",(function(){return L})),n.d(i,"frob",(function(){return N})),n.d(i,"LDU",(function(){return j})),n.d(i,"add",(function(){return F})),n.d(i,"subtract",(function(){return U})),n.d(i,"exactEquals",(function(){return B})),n.d(i,"equals",(function(){return H})),n.d(i,"multiplyScalar",(function(){return G})),n.d(i,"multiplyScalarAndAdd",(function(){return z})),n.d(i,"mul",(function(){return W})),n.d(i,"sub",(function(){return V}));var o={};n.r(o),n.d(o,"create",(function(){return Y})),n.d(o,"clone",(function(){return q})),n.d(o,"copy",(function(){return $})),n.d(o,"identity",(function(){return K})),n.d(o,"fromValues",(function(){return Q})),n.d(o,"set",(function(){return X})),n.d(o,"invert",(function(){return Z})),n.d(o,"determinant",(function(){return J})),n.d(o,"multiply",(function(){return tt})),n.d(o,"rotate",(function(){return et})),n.d(o,"scale",(function(){return nt})),n.d(o,"translate",(function(){return rt})),n.d(o,"fromRotation",(function(){return it})),n.d(o,"fromScaling",(function(){return ot})),n.d(o,"fromTranslation",(function(){return at})),n.d(o,"str",(function(){return st})),n.d(o,"frob",(function(){return ut})),n.d(o,"add",(function(){return ct})),n.d(o,"subtract",(function(){return lt})),n.d(o,"multiplyScalar",(function(){return ft})),n.d(o,"multiplyScalarAndAdd",(function(){return ht})),n.d(o,"exactEquals",(function(){return dt})),n.d(o,"equals",(function(){return pt})),n.d(o,"mul",(function(){return mt})),n.d(o,"sub",(function(){return gt}));var a={};n.r(a),n.d(a,"create",(function(){return vt})),n.d(a,"fromMat4",(function(){return yt})),n.d(a,"clone",(function(){return bt})),n.d(a,"copy",(function(){return Et})),n.d(a,"fromValues",(function(){return St})),n.d(a,"set",(function(){return wt})),n.d(a,"identity",(function(){return _t})),n.d(a,"transpose",(function(){return Tt})),n.d(a,"invert",(function(){return xt})),n.d(a,"adjoint",(function(){return At})),n.d(a,"determinant",(function(){return It})),n.d(a,"multiply",(function(){return Pt})),n.d(a,"translate",(function(){return Mt})),n.d(a,"rotate",(function(){return Ot})),n.d(a,"scale",(function(){return Ct})),n.d(a,"fromTranslation",(function(){return Rt})),n.d(a,"fromRotation",(function(){return Dt})),n.d(a,"fromScaling",(function(){return kt})),n.d(a,"fromMat2d",(function(){return Lt})),n.d(a,"fromQuat",(function(){return Nt})),n.d(a,"normalFromMat4",(function(){return jt})),n.d(a,"projection",(function(){return Ft})),n.d(a,"str",(function(){return Ut})),n.d(a,"frob",(function(){return Bt})),n.d(a,"add",(function(){return Ht})),n.d(a,"subtract",(function(){return Gt})),n.d(a,"multiplyScalar",(function(){return zt})),n.d(a,"multiplyScalarAndAdd",(function(){return Wt})),n.d(a,"exactEquals",(function(){return Vt})),n.d(a,"equals",(function(){return Yt})),n.d(a,"mul",(function(){return qt})),n.d(a,"sub",(function(){return $t}));var s={};n.r(s),n.d(s,"create",(function(){return Kt})),n.d(s,"clone",(function(){return Qt})),n.d(s,"copy",(function(){return Xt})),n.d(s,"fromValues",(function(){return Zt})),n.d(s,"set",(function(){return Jt})),n.d(s,"identity",(function(){return te})),n.d(s,"transpose",(function(){return ee})),n.d(s,"invert",(function(){return ne})),n.d(s,"adjoint",(function(){return re})),n.d(s,"determinant",(function(){return ie})),n.d(s,"multiply",(function(){return oe})),n.d(s,"translate",(function(){return ae})),n.d(s,"scale",(function(){return se})),n.d(s,"rotate",(function(){return ue})),n.d(s,"rotateX",(function(){return ce})),n.d(s,"rotateY",(function(){return le})),n.d(s,"rotateZ",(function(){return fe})),n.d(s,"fromTranslation",(function(){return he})),n.d(s,"fromScaling",(function(){return de})),n.d(s,"fromRotation",(function(){return pe})),n.d(s,"fromXRotation",(function(){return me})),n.d(s,"fromYRotation",(function(){return ge})),n.d(s,"fromZRotation",(function(){return ve})),n.d(s,"fromRotationTranslation",(function(){return ye})),n.d(s,"fromQuat2",(function(){return be})),n.d(s,"getTranslation",(function(){return Ee})),n.d(s,"getScaling",(function(){return Se})),n.d(s,"getRotation",(function(){return we})),n.d(s,"fromRotationTranslationScale",(function(){return _e})),n.d(s,"fromRotationTranslationScaleOrigin",(function(){return Te})),n.d(s,"fromQuat",(function(){return xe})),n.d(s,"frustum",(function(){return Ae})),n.d(s,"perspectiveNO",(function(){return Ie})),n.d(s,"perspective",(function(){return Pe})),n.d(s,"perspectiveZO",(function(){return Me})),n.d(s,"perspectiveFromFieldOfView",(function(){return Oe})),n.d(s,"orthoNO",(function(){return Ce})),n.d(s,"ortho",(function(){return Re})),n.d(s,"orthoZO",(function(){return De})),n.d(s,"lookAt",(function(){return ke})),n.d(s,"targetTo",(function(){return Le})),n.d(s,"str",(function(){return Ne})),n.d(s,"frob",(function(){return je})),n.d(s,"add",(function(){return Fe})),n.d(s,"subtract",(function(){return Ue})),n.d(s,"multiplyScalar",(function(){return Be})),n.d(s,"multiplyScalarAndAdd",(function(){return He})),n.d(s,"exactEquals",(function(){return Ge})),n.d(s,"equals",(function(){return ze})),n.d(s,"mul",(function(){return We})),n.d(s,"sub",(function(){return Ve}));var u={};n.r(u),n.d(u,"create",(function(){return Ye})),n.d(u,"clone",(function(){return qe})),n.d(u,"length",(function(){return $e})),n.d(u,"fromValues",(function(){return Ke})),n.d(u,"copy",(function(){return Qe})),n.d(u,"set",(function(){return Xe})),n.d(u,"add",(function(){return Ze})),n.d(u,"subtract",(function(){return Je})),n.d(u,"multiply",(function(){return tn})),n.d(u,"divide",(function(){return en})),n.d(u,"ceil",(function(){return nn})),n.d(u,"floor",(function(){return rn})),n.d(u,"min",(function(){return on})),n.d(u,"max",(function(){return an})),n.d(u,"round",(function(){return sn})),n.d(u,"scale",(function(){return un})),n.d(u,"scaleAndAdd",(function(){return cn})),n.d(u,"distance",(function(){return ln})),n.d(u,"squaredDistance",(function(){return fn})),n.d(u,"squaredLength",(function(){return hn})),n.d(u,"negate",(function(){return dn})),n.d(u,"inverse",(function(){return pn})),n.d(u,"normalize",(function(){return mn})),n.d(u,"dot",(function(){return gn})),n.d(u,"cross",(function(){return vn})),n.d(u,"lerp",(function(){return yn})),n.d(u,"hermite",(function(){return bn})),n.d(u,"bezier",(function(){return En})),n.d(u,"random",(function(){return Sn})),n.d(u,"transformMat4",(function(){return wn})),n.d(u,"transformMat3",(function(){return _n})),n.d(u,"transformQuat",(function(){return Tn})),n.d(u,"rotateX",(function(){return xn})),n.d(u,"rotateY",(function(){return An})),n.d(u,"rotateZ",(function(){return In})),n.d(u,"angle",(function(){return Pn})),n.d(u,"zero",(function(){return Mn})),n.d(u,"str",(function(){return On})),n.d(u,"exactEquals",(function(){return Cn})),n.d(u,"equals",(function(){return Rn})),n.d(u,"sub",(function(){return kn})),n.d(u,"mul",(function(){return Ln})),n.d(u,"div",(function(){return Nn})),n.d(u,"dist",(function(){return jn})),n.d(u,"sqrDist",(function(){return Fn})),n.d(u,"len",(function(){return Un})),n.d(u,"sqrLen",(function(){return Bn})),n.d(u,"forEach",(function(){return Hn}));var c={};n.r(c),n.d(c,"create",(function(){return Gn})),n.d(c,"clone",(function(){return zn})),n.d(c,"fromValues",(function(){return Wn})),n.d(c,"copy",(function(){return Vn})),n.d(c,"set",(function(){return Yn})),n.d(c,"add",(function(){return qn})),n.d(c,"subtract",(function(){return $n})),n.d(c,"multiply",(function(){return Kn})),n.d(c,"divide",(function(){return Qn})),n.d(c,"ceil",(function(){return Xn})),n.d(c,"floor",(function(){return Zn})),n.d(c,"min",(function(){return Jn})),n.d(c,"max",(function(){return tr})),n.d(c,"round",(function(){return er})),n.d(c,"scale",(function(){return nr})),n.d(c,"scaleAndAdd",(function(){return rr})),n.d(c,"distance",(function(){return ir})),n.d(c,"squaredDistance",(function(){return or})),n.d(c,"length",(function(){return ar})),n.d(c,"squaredLength",(function(){return sr})),n.d(c,"negate",(function(){return ur})),n.d(c,"inverse",(function(){return cr})),n.d(c,"normalize",(function(){return lr})),n.d(c,"dot",(function(){return fr})),n.d(c,"cross",(function(){return hr})),n.d(c,"lerp",(function(){return dr})),n.d(c,"random",(function(){return pr})),n.d(c,"transformMat4",(function(){return mr})),n.d(c,"transformQuat",(function(){return gr})),n.d(c,"zero",(function(){return vr})),n.d(c,"str",(function(){return yr})),n.d(c,"exactEquals",(function(){return br})),n.d(c,"equals",(function(){return Er})),n.d(c,"sub",(function(){return Sr})),n.d(c,"mul",(function(){return wr})),n.d(c,"div",(function(){return _r})),n.d(c,"dist",(function(){return Tr})),n.d(c,"sqrDist",(function(){return xr})),n.d(c,"len",(function(){return Ar})),n.d(c,"sqrLen",(function(){return Ir})),n.d(c,"forEach",(function(){return Pr}));var l={};n.r(l),n.d(l,"create",(function(){return Mr})),n.d(l,"identity",(function(){return Or})),n.d(l,"setAxisAngle",(function(){return Cr})),n.d(l,"getAxisAngle",(function(){return Rr})),n.d(l,"getAngle",(function(){return Dr})),n.d(l,"multiply",(function(){return kr})),n.d(l,"rotateX",(function(){return Lr})),n.d(l,"rotateY",(function(){return Nr})),n.d(l,"rotateZ",(function(){return jr})),n.d(l,"calculateW",(function(){return Fr})),n.d(l,"exp",(function(){return Ur})),n.d(l,"ln",(function(){return Br})),n.d(l,"pow",(function(){return Hr})),n.d(l,"slerp",(function(){return Gr})),n.d(l,"random",(function(){return zr})),n.d(l,"invert",(function(){return Wr})),n.d(l,"conjugate",(function(){return Vr})),n.d(l,"fromMat3",(function(){return Yr})),n.d(l,"fromEuler",(function(){return qr})),n.d(l,"str",(function(){return $r})),n.d(l,"clone",(function(){return ei})),n.d(l,"fromValues",(function(){return ni})),n.d(l,"copy",(function(){return ri})),n.d(l,"set",(function(){return ii})),n.d(l,"add",(function(){return oi})),n.d(l,"mul",(function(){return ai})),n.d(l,"scale",(function(){return si})),n.d(l,"dot",(function(){return ui})),n.d(l,"lerp",(function(){return ci})),n.d(l,"length",(function(){return li})),n.d(l,"len",(function(){return fi})),n.d(l,"squaredLength",(function(){return hi})),n.d(l,"sqrLen",(function(){return di})),n.d(l,"normalize",(function(){return pi})),n.d(l,"exactEquals",(function(){return mi})),n.d(l,"equals",(function(){return gi})),n.d(l,"rotationTo",(function(){return vi})),n.d(l,"sqlerp",(function(){return yi})),n.d(l,"setAxes",(function(){return bi}));var f={};n.r(f),n.d(f,"create",(function(){return Ei})),n.d(f,"clone",(function(){return Si})),n.d(f,"fromValues",(function(){return wi})),n.d(f,"fromRotationTranslationValues",(function(){return _i})),n.d(f,"fromRotationTranslation",(function(){return Ti})),n.d(f,"fromTranslation",(function(){return xi})),n.d(f,"fromRotation",(function(){return Ai})),n.d(f,"fromMat4",(function(){return Ii})),n.d(f,"copy",(function(){return Pi})),n.d(f,"identity",(function(){return Mi})),n.d(f,"set",(function(){return Oi})),n.d(f,"getReal",(function(){return Ci})),n.d(f,"getDual",(function(){return Ri})),n.d(f,"setReal",(function(){return Di})),n.d(f,"setDual",(function(){return ki})),n.d(f,"getTranslation",(function(){return Li})),n.d(f,"translate",(function(){return Ni})),n.d(f,"rotateX",(function(){return ji})),n.d(f,"rotateY",(function(){return Fi})),n.d(f,"rotateZ",(function(){return Ui})),n.d(f,"rotateByQuatAppend",(function(){return Bi})),n.d(f,"rotateByQuatPrepend",(function(){return Hi})),n.d(f,"rotateAroundAxis",(function(){return Gi})),n.d(f,"add",(function(){return zi})),n.d(f,"multiply",(function(){return Wi})),n.d(f,"mul",(function(){return Vi})),n.d(f,"scale",(function(){return Yi})),n.d(f,"dot",(function(){return qi})),n.d(f,"lerp",(function(){return $i})),n.d(f,"invert",(function(){return Ki})),n.d(f,"conjugate",(function(){return Qi})),n.d(f,"length",(function(){return Xi})),n.d(f,"len",(function(){return Zi})),n.d(f,"squaredLength",(function(){return Ji})),n.d(f,"sqrLen",(function(){return to})),n.d(f,"normalize",(function(){return eo})),n.d(f,"str",(function(){return no})),n.d(f,"exactEquals",(function(){return ro})),n.d(f,"equals",(function(){return io}));var h={};n.r(h),n.d(h,"create",(function(){return oo})),n.d(h,"clone",(function(){return ao})),n.d(h,"fromValues",(function(){return so})),n.d(h,"copy",(function(){return uo})),n.d(h,"set",(function(){return co})),n.d(h,"add",(function(){return lo})),n.d(h,"subtract",(function(){return fo})),n.d(h,"multiply",(function(){return ho})),n.d(h,"divide",(function(){return po})),n.d(h,"ceil",(function(){return mo})),n.d(h,"floor",(function(){return go})),n.d(h,"min",(function(){return vo})),n.d(h,"max",(function(){return yo})),n.d(h,"round",(function(){return bo})),n.d(h,"scale",(function(){return Eo})),n.d(h,"scaleAndAdd",(function(){return So})),n.d(h,"distance",(function(){return wo})),n.d(h,"squaredDistance",(function(){return _o})),n.d(h,"length",(function(){return To})),n.d(h,"squaredLength",(function(){return xo})),n.d(h,"negate",(function(){return Ao})),n.d(h,"inverse",(function(){return Io})),n.d(h,"normalize",(function(){return Po})),n.d(h,"dot",(function(){return Mo})),n.d(h,"cross",(function(){return Oo})),n.d(h,"lerp",(function(){return Co})),n.d(h,"random",(function(){return Ro})),n.d(h,"transformMat2",(function(){return Do})),n.d(h,"transformMat2d",(function(){return ko})),n.d(h,"transformMat3",(function(){return Lo})),n.d(h,"transformMat4",(function(){return No})),n.d(h,"rotate",(function(){return jo})),n.d(h,"angle",(function(){return Fo})),n.d(h,"zero",(function(){return Uo})),n.d(h,"str",(function(){return Bo})),n.d(h,"exactEquals",(function(){return Ho})),n.d(h,"equals",(function(){return Go})),n.d(h,"len",(function(){return zo})),n.d(h,"sub",(function(){return Wo})),n.d(h,"mul",(function(){return Vo})),n.d(h,"div",(function(){return Yo})),n.d(h,"dist",(function(){return qo})),n.d(h,"sqrDist",(function(){return $o})),n.d(h,"sqrLen",(function(){return Ko})),n.d(h,"forEach",(function(){return Qo}));var d=1e-6,p="undefined"!=typeof Float32Array?Float32Array:Array,m=Math.random;function g(t){p=t}var v=Math.PI/180;function y(t){return t*v}function b(t,e){return Math.abs(t-e)<=d*Math.max(1,Math.abs(t),Math.abs(e))}function E(){var t=new p(4);return p!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function S(t){var e=new p(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function w(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function _(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function T(t,e,n,r){var i=new p(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function x(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function A(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function I(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function P(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function M(t){return t[0]*t[3]-t[2]*t[1]}function O(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*l,t[3]=i*c+a*l,t}function C(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t}function R(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t}function D(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function k(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function L(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function N(t){return Math.hypot(t[0],t[1],t[2],t[3])}function j(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function F(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function U(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function B(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function H(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=d*Math.max(1,Math.abs(o),Math.abs(c))}function G(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function z(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var W=O,V=U;function Y(){var t=new p(6);return p!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function q(t){var e=new p(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function $(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function K(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Q(t,e,n,r,i,o){var a=new p(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function X(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function Z(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-n*s)*u,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1],f=n[2],h=n[3],d=n[4],p=n[5];return t[0]=r*c+o*l,t[1]=i*c+a*l,t[2]=r*f+o*h,t[3]=i*f+a*h,t[4]=r*d+o*p+s,t[5]=i*d+a*p+u,t}function et(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*c,t[1]=i*l+a*c,t[2]=r*-c+o*l,t[3]=i*-c+a*l,t[4]=s,t[5]=u,t}function nt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=i*c,t[2]=o*l,t[3]=a*l,t[4]=s,t[5]=u,t}function rt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*l+s,t[5]=i*c+a*l+u,t}function it(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function at(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function st(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ct(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function lt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function ft(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function ht(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function dt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function pt(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=e[0],c=e[1],l=e[2],f=e[3],h=e[4],p=e[5];return Math.abs(n-u)<=d*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=d*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-l)<=d*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-f)<=d*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-h)<=d*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-p)<=d*Math.max(1,Math.abs(s),Math.abs(p))}var mt=tt,gt=lt;function vt(){var t=new p(9);return p!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function bt(t){var e=new p(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Et(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function St(t,e,n,r,i,o,a,s,u){var c=new p(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=a,c[7]=s,c[8]=u,c}function wt(t,e,n,r,i,o,a,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t}function _t(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Tt(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function xt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*a-s*c,h=-l*o+s*u,d=c*o-a*u,p=n*f+r*h+i*d;return p?(p=1/p,t[0]=f*p,t[1]=(-l*r+i*c)*p,t[2]=(s*r-i*a)*p,t[3]=h*p,t[4]=(l*n-i*u)*p,t[5]=(-s*n+i*o)*p,t[6]=d*p,t[7]=(-c*n+r*u)*p,t[8]=(a*n-r*o)*p,t):null}function At(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=a*l-s*c,t[1]=i*c-r*l,t[2]=r*s-i*a,t[3]=s*u-o*l,t[4]=n*l-i*u,t[5]=i*o-n*s,t[6]=o*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*o,t}function It(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+n*(-c*i+a*s)+r*(u*i-o*s)}function Pt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=n[0],d=n[1],p=n[2],m=n[3],g=n[4],v=n[5],y=n[6],b=n[7],E=n[8];return t[0]=h*r+d*a+p*c,t[1]=h*i+d*s+p*l,t[2]=h*o+d*u+p*f,t[3]=m*r+g*a+v*c,t[4]=m*i+g*s+v*l,t[5]=m*o+g*u+v*f,t[6]=y*r+b*a+E*c,t[7]=y*i+b*s+E*l,t[8]=y*o+b*u+E*f,t}function Mt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h*r+d*a+c,t[7]=h*i+d*s+l,t[8]=h*o+d*u+f,t}function Ot(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*a,t[1]=d*i+h*s,t[2]=d*o+h*u,t[3]=d*a-h*r,t[4]=d*s-h*i,t[5]=d*u-h*o,t[6]=c,t[7]=l,t[8]=f,t}function Ct(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Rt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Dt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function kt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Lt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Nt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,h=i*a,d=i*s,p=i*u,m=o*a,g=o*s,v=o*u;return t[0]=1-f-p,t[3]=l-v,t[6]=h+g,t[1]=l+v,t[4]=1-c-p,t[7]=d-m,t[2]=h-g,t[5]=d+m,t[8]=1-c-f,t}function jt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=n*s-r*a,b=n*u-i*a,E=n*c-o*a,S=r*u-i*s,w=r*c-o*s,_=i*c-o*u,T=l*m-f*p,x=l*g-h*p,A=l*v-d*p,I=f*g-h*m,P=f*v-d*m,M=h*v-d*g,O=y*M-b*P+E*I+S*A-w*x+_*T;return O?(O=1/O,t[0]=(s*M-u*P+c*I)*O,t[1]=(u*A-a*M-c*x)*O,t[2]=(a*P-s*A+c*T)*O,t[3]=(i*P-r*M-o*I)*O,t[4]=(n*M-i*A+o*x)*O,t[5]=(r*A-n*P-o*T)*O,t[6]=(m*_-g*w+v*S)*O,t[7]=(g*E-p*_-v*b)*O,t[8]=(p*w-m*E+v*y)*O,t):null}function Ft(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Ut(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Bt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Ht(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Gt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function zt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Wt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Vt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Yt(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=e[0],h=e[1],p=e[2],m=e[3],g=e[4],v=e[5],y=e[6],b=e[7],E=e[8];return Math.abs(n-f)<=d*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-h)<=d*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-p)<=d*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-m)<=d*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=d*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-v)<=d*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-y)<=d*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-b)<=d*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(l-E)<=d*Math.max(1,Math.abs(l),Math.abs(E))}var qt=Pt,$t=Gt;function Kt(){var t=new p(16);return p!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Qt(t){var e=new p(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Xt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Zt(t,e,n,r,i,o,a,s,u,c,l,f,h,d,m,g){var v=new p(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=i,v[5]=o,v[6]=a,v[7]=s,v[8]=u,v[9]=c,v[10]=l,v[11]=f,v[12]=h,v[13]=d,v[14]=m,v[15]=g,v}function Jt(t,e,n,r,i,o,a,s,u,c,l,f,h,d,p,m,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=n*s-r*a,b=n*u-i*a,E=n*c-o*a,S=r*u-i*s,w=r*c-o*s,_=i*c-o*u,T=l*m-f*p,x=l*g-h*p,A=l*v-d*p,I=f*g-h*m,P=f*v-d*m,M=h*v-d*g,O=y*M-b*P+E*I+S*A-w*x+_*T;return O?(O=1/O,t[0]=(s*M-u*P+c*I)*O,t[1]=(i*P-r*M-o*I)*O,t[2]=(m*_-g*w+v*S)*O,t[3]=(h*w-f*_-d*S)*O,t[4]=(u*A-a*M-c*x)*O,t[5]=(n*M-i*A+o*x)*O,t[6]=(g*E-p*_-v*b)*O,t[7]=(l*_-h*E+d*b)*O,t[8]=(a*P-s*A+c*T)*O,t[9]=(r*A-n*P-o*T)*O,t[10]=(p*w-m*E+v*y)*O,t[11]=(f*E-l*w-d*y)*O,t[12]=(s*x-a*I-u*T)*O,t[13]=(n*I-r*x+i*T)*O,t[14]=(m*b-p*S-g*y)*O,t[15]=(l*S-f*b+h*y)*O,t):null}function re(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],g=e[14],v=e[15];return t[0]=s*(h*v-d*g)-f*(u*v-c*g)+m*(u*d-c*h),t[1]=-(r*(h*v-d*g)-f*(i*v-o*g)+m*(i*d-o*h)),t[2]=r*(u*v-c*g)-s*(i*v-o*g)+m*(i*c-o*u),t[3]=-(r*(u*d-c*h)-s*(i*d-o*h)+f*(i*c-o*u)),t[4]=-(a*(h*v-d*g)-l*(u*v-c*g)+p*(u*d-c*h)),t[5]=n*(h*v-d*g)-l*(i*v-o*g)+p*(i*d-o*h),t[6]=-(n*(u*v-c*g)-a*(i*v-o*g)+p*(i*c-o*u)),t[7]=n*(u*d-c*h)-a*(i*d-o*h)+l*(i*c-o*u),t[8]=a*(f*v-d*m)-l*(s*v-c*m)+p*(s*d-c*f),t[9]=-(n*(f*v-d*m)-l*(r*v-o*m)+p*(r*d-o*f)),t[10]=n*(s*v-c*m)-a*(r*v-o*m)+p*(r*c-o*s),t[11]=-(n*(s*d-c*f)-a*(r*d-o*f)+l*(r*c-o*s)),t[12]=-(a*(f*g-h*m)-l*(s*g-u*m)+p*(s*h-u*f)),t[13]=n*(f*g-h*m)-l*(r*g-i*m)+p*(r*h-i*f),t[14]=-(n*(s*g-u*m)-a*(r*g-i*m)+p*(r*u-i*s)),t[15]=n*(s*h-u*f)-a*(r*h-i*f)+l*(r*u-i*s),t}function ie(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],d=t[12],p=t[13],m=t[14],g=t[15];return(e*a-n*o)*(f*g-h*m)-(e*s-r*o)*(l*g-h*p)+(e*u-i*o)*(l*m-f*p)+(n*s-r*a)*(c*g-h*d)-(n*u-i*a)*(c*m-f*d)+(r*u-i*s)*(c*p-l*d)}function oe(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],p=e[11],m=e[12],g=e[13],v=e[14],y=e[15],b=n[0],E=n[1],S=n[2],w=n[3];return t[0]=b*r+E*s+S*f+w*m,t[1]=b*i+E*u+S*h+w*g,t[2]=b*o+E*c+S*d+w*v,t[3]=b*a+E*l+S*p+w*y,b=n[4],E=n[5],S=n[6],w=n[7],t[4]=b*r+E*s+S*f+w*m,t[5]=b*i+E*u+S*h+w*g,t[6]=b*o+E*c+S*d+w*v,t[7]=b*a+E*l+S*p+w*y,b=n[8],E=n[9],S=n[10],w=n[11],t[8]=b*r+E*s+S*f+w*m,t[9]=b*i+E*u+S*h+w*g,t[10]=b*o+E*c+S*d+w*v,t[11]=b*a+E*l+S*p+w*y,b=n[12],E=n[13],S=n[14],w=n[15],t[12]=b*r+E*s+S*f+w*m,t[13]=b*i+E*u+S*h+w*g,t[14]=b*o+E*c+S*d+w*v,t[15]=b*a+E*l+S*p+w*y,t}function ae(t,e,n){var r,i,o,a,s,u,c,l,f,h,d,p,m=n[0],g=n[1],v=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=d,t[11]=p,t[12]=r*m+s*g+f*v+e[12],t[13]=i*m+u*g+h*v+e[13],t[14]=o*m+c*g+d*v+e[14],t[15]=a*m+l*g+p*v+e[15]),t}function se(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(t,e,n,r){var i,o,a,s,u,c,l,f,h,p,m,g,v,y,b,E,S,w,_,T,x,A,I,P,M=r[0],O=r[1],C=r[2],R=Math.hypot(M,O,C);return R<d?null:(M*=R=1/R,O*=R,C*=R,i=Math.sin(n),a=1-(o=Math.cos(n)),s=e[0],u=e[1],c=e[2],l=e[3],f=e[4],h=e[5],p=e[6],m=e[7],g=e[8],v=e[9],y=e[10],b=e[11],E=M*M*a+o,S=O*M*a+C*i,w=C*M*a-O*i,_=M*O*a-C*i,T=O*O*a+o,x=C*O*a+M*i,A=M*C*a+O*i,I=O*C*a-M*i,P=C*C*a+o,t[0]=s*E+f*S+g*w,t[1]=u*E+h*S+v*w,t[2]=c*E+p*S+y*w,t[3]=l*E+m*S+b*w,t[4]=s*_+f*T+g*x,t[5]=u*_+h*T+v*x,t[6]=c*_+p*T+y*x,t[7]=l*_+m*T+b*x,t[8]=s*A+f*I+g*P,t[9]=u*A+h*I+v*P,t[10]=c*A+p*I+y*P,t[11]=l*A+m*I+b*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t}function le(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-f*r,t[3]=u*i-h*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+f*i,t[11]=u*r+h*i,t}function fe(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t}function he(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function de(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e,n){var r,i,o,a=n[0],s=n[1],u=n[2],c=Math.hypot(a,s,u);return c<d?null:(a*=c=1/c,s*=c,u*=c,r=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=a*a*o+i,t[1]=s*a*o+u*r,t[2]=u*a*o-s*r,t[3]=0,t[4]=a*s*o-u*r,t[5]=s*s*o+i,t[6]=u*s*o+a*r,t[7]=0,t[8]=a*u*o+s*r,t[9]=s*u*o-a*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function me(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ge(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,l=r*s,f=r*u,h=r*c,d=i*u,p=i*c,m=o*c,g=a*s,v=a*u,y=a*c;return t[0]=1-(d+m),t[1]=f+y,t[2]=h-v,t[3]=0,t[4]=f-y,t[5]=1-(l+m),t[6]=p+g,t[7]=0,t[8]=h+v,t[9]=p-g,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function be(t,e){var n=new p(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=r*r+i*i+o*o+a*a;return f>0?(n[0]=2*(s*a+l*r+u*o-c*i)/f,n[1]=2*(u*a+l*i+c*r-s*o)/f,n[2]=2*(c*a+l*o+s*i-u*r)/f):(n[0]=2*(s*a+l*r+u*o-c*i),n[1]=2*(u*a+l*i+c*r-s*o),n[2]=2*(c*a+l*o+s*i-u*r)),ye(t,e,n),t}function Ee(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Se(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,c,l),t}function we(t,e){var n=new p(3);Se(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,s=e[1]*i,u=e[2]*o,c=e[4]*r,l=e[5]*i,f=e[6]*o,h=e[8]*r,d=e[9]*i,m=e[10]*o,g=a+l+m,v=0;return g>0?(v=2*Math.sqrt(g+1),t[3]=.25*v,t[0]=(f-d)/v,t[1]=(h-u)/v,t[2]=(s-c)/v):a>l&&a>m?(v=2*Math.sqrt(1+a-l-m),t[3]=(f-d)/v,t[0]=.25*v,t[1]=(s+c)/v,t[2]=(h+u)/v):l>m?(v=2*Math.sqrt(1+l-a-m),t[3]=(h-u)/v,t[0]=(s+c)/v,t[1]=.25*v,t[2]=(f+d)/v):(v=2*Math.sqrt(1+m-a-l),t[3]=(s-c)/v,t[0]=(h+u)/v,t[1]=(f+d)/v,t[2]=.25*v),t}function _e(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,l=a+a,f=i*u,h=i*c,d=i*l,p=o*c,m=o*l,g=a*l,v=s*u,y=s*c,b=s*l,E=r[0],S=r[1],w=r[2];return t[0]=(1-(p+g))*E,t[1]=(h+b)*E,t[2]=(d-y)*E,t[3]=0,t[4]=(h-b)*S,t[5]=(1-(f+g))*S,t[6]=(m+v)*S,t[7]=0,t[8]=(d+y)*w,t[9]=(m-v)*w,t[10]=(1-(f+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Te(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,l=a+a,f=s+s,h=o*c,d=o*l,p=o*f,m=a*l,g=a*f,v=s*f,y=u*c,b=u*l,E=u*f,S=r[0],w=r[1],_=r[2],T=i[0],x=i[1],A=i[2],I=(1-(m+v))*S,P=(d+E)*S,M=(p-b)*S,O=(d-E)*w,C=(1-(h+v))*w,R=(g+y)*w,D=(p+b)*_,k=(g-y)*_,L=(1-(h+m))*_;return t[0]=I,t[1]=P,t[2]=M,t[3]=0,t[4]=O,t[5]=C,t[6]=R,t[7]=0,t[8]=D,t[9]=k,t[10]=L,t[11]=0,t[12]=n[0]+T-(I*T+O*x+D*A),t[13]=n[1]+x-(P*T+C*x+k*A),t[14]=n[2]+A-(M*T+R*x+L*A),t[15]=1,t}function xe(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,h=i*a,d=i*s,p=i*u,m=o*a,g=o*s,v=o*u;return t[0]=1-f-p,t[1]=l+v,t[2]=h-g,t[3]=0,t[4]=l-v,t[5]=1-c-p,t[6]=d+m,t[7]=0,t[8]=h+g,t[9]=d-m,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ae(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function Ie(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var Pe=Ie;function Me(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=i*o,t[14]=i*r*o):(t[10]=-1,t[14]=-r),t}function Oe(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Ce(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}var Re=Ce;function De(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=o*c,t[15]=1,t}function ke(t,e,n,r){var i,o,a,s,u,c,l,f,h,p,m=e[0],g=e[1],v=e[2],y=r[0],b=r[1],E=r[2],S=n[0],w=n[1],_=n[2];return Math.abs(m-S)<d&&Math.abs(g-w)<d&&Math.abs(v-_)<d?te(t):(l=m-S,f=g-w,h=v-_,i=b*(h*=p=1/Math.hypot(l,f,h))-E*(f*=p),o=E*(l*=p)-y*h,a=y*f-b*l,(p=Math.hypot(i,o,a))?(i*=p=1/p,o*=p,a*=p):(i=0,o=0,a=0),s=f*a-h*o,u=h*i-l*a,c=l*o-f*i,(p=Math.hypot(s,u,c))?(s*=p=1/p,u*=p,c*=p):(s=0,u=0,c=0),t[0]=i,t[1]=s,t[2]=l,t[3]=0,t[4]=o,t[5]=u,t[6]=f,t[7]=0,t[8]=a,t[9]=c,t[10]=h,t[11]=0,t[12]=-(i*m+o*g+a*v),t[13]=-(s*m+u*g+c*v),t[14]=-(l*m+f*g+h*v),t[15]=1,t)}function Le(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],c=r[2],l=i-n[0],f=o-n[1],h=a-n[2],d=l*l+f*f+h*h;d>0&&(l*=d=1/Math.sqrt(d),f*=d,h*=d);var p=u*h-c*f,m=c*l-s*h,g=s*f-u*l;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=f*g-h*m,t[5]=h*p-l*g,t[6]=l*m-f*p,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function Ne(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function je(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Fe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Ue(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Be(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function He(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Ge(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function ze(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=e[0],E=e[1],S=e[2],w=e[3],_=e[4],T=e[5],x=e[6],A=e[7],I=e[8],P=e[9],M=e[10],O=e[11],C=e[12],R=e[13],D=e[14],k=e[15];return Math.abs(n-b)<=d*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-E)<=d*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(i-S)<=d*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(o-w)<=d*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-_)<=d*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-T)<=d*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(u-x)<=d*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(c-A)<=d*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(l-I)<=d*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(f-P)<=d*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(h-M)<=d*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(p-O)<=d*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(m-C)<=d*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(g-R)<=d*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(v-D)<=d*Math.max(1,Math.abs(v),Math.abs(D))&&Math.abs(y-k)<=d*Math.max(1,Math.abs(y),Math.abs(k))}var We=oe,Ve=Ue;function Ye(){var t=new p(3);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function qe(t){var e=new p(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function $e(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Ke(t,e,n){var r=new p(3);return r[0]=t,r[1]=e,r[2]=n,r}function Qe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Xe(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ze(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Je(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function tn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function en(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function nn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function rn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function on(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function an(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function sn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function un(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function cn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function ln(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function fn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function hn(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function dn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function pn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function mn(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function gn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function vn(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function yn(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function bn(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*l,t}function En(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,f=3*u*a,h=u*o;return t[0]=e[0]*c+n[0]*l+r[0]*f+i[0]*h,t[1]=e[1]*c+n[1]*l+r[1]*f+i[1]*h,t[2]=e[2]*c+n[2]*l+r[2]*f+i[2]*h,t}function Sn(t,e){e=e||1;var n=2*m()*Math.PI,r=2*m()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function wn(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function _n(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function Tn(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=i*c-o*u,f=o*s-r*c,h=r*u-i*s,d=i*h-o*f,p=o*l-r*h,m=r*f-i*l,g=2*a;return l*=g,f*=g,h*=g,d*=2,p*=2,m*=2,t[0]=s+l+d,t[1]=u+f+p,t[2]=c+h+m,t}function xn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function An(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function In(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function Pn(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+a*a+s*s),c=u&&gn(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function Mn(t){return t[0]=0,t[1]=0,t[2]=0,t}function On(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Cn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Rn(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=d*Math.max(1,Math.abs(i),Math.abs(s))}var Dn,kn=Je,Ln=tn,Nn=en,jn=ln,Fn=fn,Un=$e,Bn=hn,Hn=(Dn=Ye(),function(t,e,n,r,i,o){var a,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)Dn[0]=t[a],Dn[1]=t[a+1],Dn[2]=t[a+2],i(Dn,Dn,o),t[a]=Dn[0],t[a+1]=Dn[1],t[a+2]=Dn[2];return t});function Gn(){var t=new p(4);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function zn(t){var e=new p(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Wn(t,e,n,r){var i=new p(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function Vn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Yn(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function qn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function $n(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Kn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Qn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Xn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Zn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Jn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function tr(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function er(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function nr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function rr(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function ir(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(n,r,i,o)}function or(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function ar(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function sr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function ur(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function cr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function lr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function fr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function hr(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],l=e[0],f=e[1],h=e[2],d=e[3];return t[0]=f*c-h*u+d*s,t[1]=-l*c+h*a-d*o,t[2]=l*u-f*a+d*i,t[3]=-l*s+f*o-h*i,t}function dr(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function pr(t,e){var n,r,i,o,a,s;e=e||1;do{a=(n=2*m()-1)*n+(r=2*m()-1)*r}while(a>=1);do{s=(i=2*m()-1)*i+(o=2*m()-1)*o}while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*i*u,t[3]=e*o*u,t}function mr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function gr(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,h=c*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=l*c+d*-a+f*-u-h*-s,t[1]=f*c+d*-s+h*-a-l*-u,t[2]=h*c+d*-u+l*-s-f*-a,t[3]=e[3],t}function vr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function yr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function br(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Er(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=d*Math.max(1,Math.abs(o),Math.abs(c))}var Sr=$n,wr=Kn,_r=Qn,Tr=ir,xr=or,Ar=ar,Ir=sr,Pr=function(){var t=Gn();return function(e,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function Mr(){var t=new p(4);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Or(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Cr(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Rr(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>d?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Dr(t,e){var n=ui(t,e);return Math.acos(2*n*n-1)}function kr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-r*c,t[2]=o*l+a*c+r*u-i*s,t[3]=a*l-r*s-i*u-o*c,t}function Lr(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t}function Nr(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t}function jr(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t}function Fr(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function Ur(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),s=Math.exp(o),u=a>0?s*Math.sin(a)/a:0;return t[0]=n*u,t[1]=r*u,t[2]=i*u,t[3]=s*Math.cos(a),t}function Br(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),s=a>0?Math.atan2(a,o)/a:0;return t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=.5*Math.log(n*n+r*r+i*i+o*o),t}function Hr(t,e,n){return Br(t,e),si(t,t,n),Ur(t,t),t}function Gr(t,e,n,r){var i,o,a,s,u,c=e[0],l=e[1],f=e[2],h=e[3],p=n[0],m=n[1],g=n[2],v=n[3];return(o=c*p+l*m+f*g+h*v)<0&&(o=-o,p=-p,m=-m,g=-g,v=-v),1-o>d?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*c+u*p,t[1]=s*l+u*m,t[2]=s*f+u*g,t[3]=s*h+u*v,t}function zr(t){var e=m(),n=m(),r=m(),i=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=o*Math.sin(2*Math.PI*r),t[3]=o*Math.cos(2*Math.PI*r),t}function Wr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t}function Vr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Yr(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}function qr(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=o*u*l-a*s*c,t[1]=a*s*l+o*u*c,t[2]=a*u*c-o*s*l,t[3]=a*u*l+o*s*c,t}function $r(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Kr,Qr,Xr,Zr,Jr,ti,ei=zn,ni=Wn,ri=Vn,ii=Yn,oi=qn,ai=kr,si=nr,ui=fr,ci=dr,li=ar,fi=li,hi=sr,di=hi,pi=lr,mi=br,gi=Er,vi=(Kr=Ye(),Qr=Ke(1,0,0),Xr=Ke(0,1,0),function(t,e,n){var r=gn(e,n);return r<-.999999?(vn(Kr,Qr,e),Un(Kr)<1e-6&&vn(Kr,Xr,e),mn(Kr,Kr),Cr(t,Kr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(vn(Kr,e,n),t[0]=Kr[0],t[1]=Kr[1],t[2]=Kr[2],t[3]=1+r,pi(t,t))}),yi=(Zr=Mr(),Jr=Mr(),function(t,e,n,r,i,o){return Gr(Zr,e,i,o),Gr(Jr,n,r,o),Gr(t,Zr,Jr,2*o*(1-o)),t}),bi=(ti=vt(),function(t,e,n,r){return ti[0]=n[0],ti[3]=n[1],ti[6]=n[2],ti[1]=r[0],ti[4]=r[1],ti[7]=r[2],ti[2]=-e[0],ti[5]=-e[1],ti[8]=-e[2],pi(t,Yr(t,ti))});function Ei(){var t=new p(8);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function Si(t){var e=new p(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function wi(t,e,n,r,i,o,a,s){var u=new p(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=o,u[6]=a,u[7]=s,u}function _i(t,e,n,r,i,o,a){var s=new p(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*i,c=.5*o,l=.5*a;return s[4]=u*r+c*n-l*e,s[5]=c*r+l*t-u*n,s[6]=l*r+u*e-c*t,s[7]=-u*t-c*e-l*n,s}function Ti(t,e,n){var r=.5*n[0],i=.5*n[1],o=.5*n[2],a=e[0],s=e[1],u=e[2],c=e[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+i*u-o*s,t[5]=i*c+o*a-r*u,t[6]=o*c+r*s-i*a,t[7]=-r*a-i*s-o*u,t}function xi(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Ai(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ii(t,e){var n=Mr();we(n,e);var r=new p(3);return Ee(r,e),Ti(t,n,r),t}function Pi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Mi(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Oi(t,e,n,r,i,o,a,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t}var Ci=ri;function Ri(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Di=ri;function ki(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Li(t,e){var n=e[4],r=e[5],i=e[6],o=e[7],a=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+o*a+r*u-i*s),t[1]=2*(r*c+o*s+i*a-n*u),t[2]=2*(i*c+o*u+n*s-r*a),t}function Ni(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],l=e[4],f=e[5],h=e[6],d=e[7];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=a*s+i*c-o*u+l,t[5]=a*u+o*s-r*c+f,t[6]=a*c+r*u-i*s+h,t[7]=-r*s-i*u-o*c+d,t}function ji(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*a+l*r+u*o-c*i,h=u*a+l*i+c*r-s*o,d=c*a+l*o+s*i-u*r,p=l*a-s*r-u*i-c*o;return Lr(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=f*a+p*r+h*o-d*i,t[5]=h*a+p*i+d*r-f*o,t[6]=d*a+p*o+f*i-h*r,t[7]=p*a-f*r-h*i-d*o,t}function Fi(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*a+l*r+u*o-c*i,h=u*a+l*i+c*r-s*o,d=c*a+l*o+s*i-u*r,p=l*a-s*r-u*i-c*o;return Nr(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=f*a+p*r+h*o-d*i,t[5]=h*a+p*i+d*r-f*o,t[6]=d*a+p*o+f*i-h*r,t[7]=p*a-f*r-h*i-d*o,t}function Ui(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*a+l*r+u*o-c*i,h=u*a+l*i+c*r-s*o,d=c*a+l*o+s*i-u*r,p=l*a-s*r-u*i-c*o;return jr(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=f*a+p*r+h*o-d*i,t[5]=h*a+p*i+d*r-f*o,t[6]=d*a+p*o+f*i-h*r,t[7]=p*a-f*r-h*i-d*o,t}function Bi(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=e[3];return t[0]=s*a+l*r+u*o-c*i,t[1]=u*a+l*i+c*r-s*o,t[2]=c*a+l*o+s*i-u*r,t[3]=l*a-s*r-u*i-c*o,s=e[4],u=e[5],c=e[6],l=e[7],t[4]=s*a+l*r+u*o-c*i,t[5]=u*a+l*i+c*r-s*o,t[6]=c*a+l*o+s*i-u*r,t[7]=l*a-s*r-u*i-c*o,t}function Hi(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-r*c,t[2]=o*l+a*c+r*u-i*s,t[3]=a*l-r*s-i*u-o*c,s=n[4],u=n[5],c=n[6],l=n[7],t[4]=r*l+a*s+i*c-o*u,t[5]=i*l+a*u+o*s-r*c,t[6]=o*l+a*c+r*u-i*s,t[7]=a*l-r*s-i*u-o*c,t}function Gi(t,e,n,r){if(Math.abs(r)<d)return Pi(t,e);var i=Math.hypot(n[0],n[1],n[2]);r*=.5;var o=Math.sin(r),a=o*n[0]/i,s=o*n[1]/i,u=o*n[2]/i,c=Math.cos(r),l=e[0],f=e[1],h=e[2],p=e[3];t[0]=l*c+p*a+f*u-h*s,t[1]=f*c+p*s+h*a-l*u,t[2]=h*c+p*u+l*s-f*a,t[3]=p*c-l*a-f*s-h*u;var m=e[4],g=e[5],v=e[6],y=e[7];return t[4]=m*c+y*a+g*u-v*s,t[5]=g*c+y*s+v*a-m*u,t[6]=v*c+y*u+m*s-g*a,t[7]=y*c-m*a-g*s-v*u,t}function zi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function Wi(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[4],u=n[5],c=n[6],l=n[7],f=e[4],h=e[5],d=e[6],p=e[7],m=n[0],g=n[1],v=n[2],y=n[3];return t[0]=r*y+a*m+i*v-o*g,t[1]=i*y+a*g+o*m-r*v,t[2]=o*y+a*v+r*g-i*m,t[3]=a*y-r*m-i*g-o*v,t[4]=r*l+a*s+i*c-o*u+f*y+p*m+h*v-d*g,t[5]=i*l+a*u+o*s-r*c+h*y+p*g+d*m-f*v,t[6]=o*l+a*c+r*u-i*s+d*y+p*v+f*g-h*m,t[7]=a*l-r*s-i*u-o*c+p*y-f*m-h*g-d*v,t}var Vi=Wi;function Yi(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var qi=ui;function $i(t,e,n,r){var i=1-r;return qi(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function Ki(t,e){var n=Ji(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Qi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Xi=li,Zi=Xi,Ji=hi,to=Ji;function eo(t,e){var n=Ji(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,o=e[2]/n,a=e[3]/n,s=e[4],u=e[5],c=e[6],l=e[7],f=r*s+i*u+o*c+a*l;t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=(s-r*f)/n,t[5]=(u-i*f)/n,t[6]=(c-o*f)/n,t[7]=(l-a*f)/n}return t}function no(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function ro(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function io(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=e[0],f=e[1],h=e[2],p=e[3],m=e[4],g=e[5],v=e[6],y=e[7];return Math.abs(n-l)<=d*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-f)<=d*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-h)<=d*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-p)<=d*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=d*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-g)<=d*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-v)<=d*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-y)<=d*Math.max(1,Math.abs(c),Math.abs(y))}function oo(){var t=new p(2);return p!=Float32Array&&(t[0]=0,t[1]=0),t}function ao(t){var e=new p(2);return e[0]=t[0],e[1]=t[1],e}function so(t,e){var n=new p(2);return n[0]=t,n[1]=e,n}function uo(t,e){return t[0]=e[0],t[1]=e[1],t}function co(t,e,n){return t[0]=e,t[1]=n,t}function lo(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function fo(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function ho(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function po(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function mo(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function go(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function vo(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function yo(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function bo(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Eo(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function So(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function wo(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function _o(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function To(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function xo(t){var e=t[0],n=t[1];return e*e+n*n}function Ao(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Io(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Po(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function Mo(t,e){return t[0]*e[0]+t[1]*e[1]}function Oo(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function Co(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function Ro(t,e){e=e||1;var n=2*m()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function Do(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function ko(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function Lo(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function No(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function jo(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=i*s-o*a+n[0],t[1]=i*a+o*s+n[1],t}function Fo(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function Uo(t){return t[0]=0,t[1]=0,t}function Bo(t){return"vec2("+t[0]+", "+t[1]+")"}function Ho(t,e){return t[0]===e[0]&&t[1]===e[1]}function Go(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=d*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))}var zo=To,Wo=fo,Vo=ho,Yo=po,qo=wo,$o=_o,Ko=xo,Qo=function(){var t=oo();return function(e,n,r,i,o,a){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SyncedArray=void 0;e.SyncedArray=class{constructor(t){this.callbacks=t,this.array=[],this.uniqueId=0}createItem(t){return this.uniqueId++,this.array.push({obj:t,uniqueId:this.uniqueId}),this.requireConstruction=!0,this.uniqueId}updateItem(t,e){const n=this.findRealIndexOf(t);if(n>=0){const t=this.array[n];t.obj=Object.assign(Object.assign({},t.obj),e),this.requireConstruction||(this.callbacks.onInjection(n,this.array[n]),this.requireUpdate=!0)}}freeItem(t){const e=this.findRealIndexOf(t);e>=0&&(this.requireConstruction=!0,this.array.splice(e,1))}sync(){this.requireConstruction&&(this.callbacks.onReconstruct(this.array),this.requireUpdate=!1,this.requireConstruction=!1),this.requireUpdate&&(this.callbacks.onUpdate(this.array),this.requireUpdate=!1)}getArray(){return this.array}findRealIndexOf(t){if(0===this.array.length)return-1;let e,n=!1,r=0,i=this.array.length;for(;0==n&&!(r>i);){e=~~((r+i)/2);const o=this.array[e].uniqueId;if(NaN===o||o===1/0)return-1;if(t===o){n=!0;break}t<o?i=e-1:t>o&&(r=e+1)}return!0===n?e:-1}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEmptyInventory=e.ItemType=e.EquipmentType=void 0,function(t){t.WEAPON="WEAPON",t.HELMET="HELMET",t.SHIELD="SHIELD",t.BODY="BODY",t.SHOES="SHOES",t.RING="RING"}(e.EquipmentType||(e.EquipmentType={})),function(t){t.CONSUMABLE="Consumable",t.CRAFTING="Crafting",t.PRECIOUS="Precious",t.KEY="Key",t.EQUIPMENT="Equipment"}(e.ItemType||(e.ItemType={}));e.getEmptyInventory=()=>({items:[],equipped:{}})},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){(e=t.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compileTextureRepeatShader=e.compileVoxelShader=e.compileModelShader=e.compileParticleShader=e.compileSpriteShader=void 0;const r=n(153),i=n(35),o=n(154),a=n(36),s=n(155),u=n(156),c=n(157),l=n(158),f=n(159),h=n(160),d=n(161);e.compileSpriteShader=function(t){const e=(0,u.initShaderProgram)(t,c.BilloardVertex.source,o.fsSource);return{shaderId:e,uniform:Object.assign(Object.assign(Object.assign({},(0,i.fadeUniformPositions)(e,t)),(0,a.hazeUniformPositions)(e,t)),{textureSampler:t.getUniformLocation(e,c.BilloardVertex.v.textureSampler),projectionMatrix:t.getUniformLocation(e,c.BilloardVertex.v.projectionMatrix),modelMatrix:t.getUniformLocation(e,c.BilloardVertex.v.modelMatrix)}),attribute:{vertexPosition:t.getAttribLocation(e,c.BilloardVertex.v.vertexPosition),vertexTranslation:t.getAttribLocation(e,c.BilloardVertex.v.vertexTranslation),texturePosition:t.getAttribLocation(e,c.BilloardVertex.v.texturePosition)}}},e.compileParticleShader=function(t){const e=(0,u.initShaderProgram)(t,f.ParticleVertex.source,r.colourFragment);return{shaderId:e,uniform:Object.assign(Object.assign(Object.assign({},(0,i.fadeUniformPositions)(e,t)),(0,a.hazeUniformPositions)(e,t)),{projectionMatrix:t.getUniformLocation(e,c.BilloardVertex.v.projectionMatrix),modelMatrix:t.getUniformLocation(e,c.BilloardVertex.v.modelMatrix)}),attribute:{vertexPosition:t.getAttribLocation(e,c.BilloardVertex.v.vertexPosition),vertexTranslation:t.getAttribLocation(e,c.BilloardVertex.v.vertexTranslation)}}},e.compileModelShader=function(t){const e=(0,u.initShaderProgram)(t,d.Vertex.source,o.fsSource);return{shaderId:e,uniform:Object.assign(Object.assign(Object.assign({},(0,i.fadeUniformPositions)(e,t)),(0,a.hazeUniformPositions)(e,t)),{textureSampler:t.getUniformLocation(e,d.Vertex.v.textureSampler),projectionMatrix:t.getUniformLocation(e,d.Vertex.v.projectionMatrix),modelMatrix:t.getUniformLocation(e,d.Vertex.v.modelMatrix)}),attribute:{vertexPosition:t.getAttribLocation(e,d.Vertex.v.vertexPosition),texturePosition:t.getAttribLocation(e,d.Vertex.v.texturePosition)}}},e.compileVoxelShader=function(t){const e=(0,u.initShaderProgram)(t,l.ColourVertex.source,r.colourFragment);return{shaderId:e,uniform:Object.assign(Object.assign(Object.assign({},(0,i.fadeUniformPositions)(e,t)),(0,a.hazeUniformPositions)(e,t)),{projectionMatrix:t.getUniformLocation(e,l.ColourVertex.v.projectionMatrix),modelMatrix:t.getUniformLocation(e,l.ColourVertex.v.modelMatrix)}),attribute:{vertexPosition:t.getAttribLocation(e,l.ColourVertex.v.vertexPosition),colourOverride:t.getAttribLocation(e,l.ColourVertex.v.colourOverride)}}},e.compileTextureRepeatShader=function(t){const e=(0,u.initShaderProgram)(t,h.RepeatedVertex.source,s.rfsSource);return{shaderId:e,uniform:Object.assign(Object.assign(Object.assign({},(0,i.fadeUniformPositions)(e,t)),(0,a.hazeUniformPositions)(e,t)),{textureSampler:t.getUniformLocation(e,h.RepeatedVertex.v.textureSampler),projectionMatrix:t.getUniformLocation(e,h.RepeatedVertex.v.projectionMatrix),modelMatrix:t.getUniformLocation(e,h.RepeatedVertex.v.modelMatrix)}),attribute:{vertexPosition:t.getAttribLocation(e,h.RepeatedVertex.v.vertexPosition),texturePosition:t.getAttribLocation(e,h.RepeatedVertex.v.texturePosition),textureStart:t.getAttribLocation(e,h.RepeatedVertex.v.textureStart),textureSize:t.getAttribLocation(e,h.RepeatedVertex.v.textureSize)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Colours=void 0,e.Colours={HIDDEN_GREY:"#252323",DESELCT_GREY:"#2E2E2E",HOVER_GREY:"#8C8C8C",SELECT_WHITE:"#FFFFFF",LOCK_GOLD_DARKER:"#5e5b2a",LOCK_GOLD_DARK:"#85813a",LOCK_GOLD:"#efe737"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DoesHaveItem=e.DoesPlayerHaveItem=e.AddItemToInventory=e.RemoveItemFromInventory=e.PlayerPickUpItem=e.UnequipItemFromInventory=e.EquipItemFromInventory=e.ConsumeItemFromInventory=e.PlayerUseItemFromInventory=e.CloseInventory=e.OpenInventory=void 0;const r=n(4),i=n(40),o=n(3),a=n(41),s=n(23),u=n(59);e.OpenInventory=t=>()=>{t.getTutorialService().onEvent(u.TutorialServiceEvent.OPEN_INVENTORY),t.getGame().setUpdateWorld(!1),t.getInputService().setInputState(i.InputState.INVENTORY),t.getStore().getActions().onPlayerInventoryOpened(),t.getAudioService().play(t.getResourceManager().manifest.audio[(0,o.randomSelection)([r.Audios.MENU_0])])};e.CloseInventory=t=>()=>{t.getTutorialService().onEvent(u.TutorialServiceEvent.CLOSE_INVENTORY),t.getGame().setUpdateWorld(!0),t.getInputService().setInputState(i.InputState.DEFAULT),t.getStore().getActions().onPlayerInventoryClosed(),t.getAudioService().play(t.getResourceManager().manifest.audio[(0,o.randomSelection)([r.Audios.MENU_0])])};e.PlayerUseItemFromInventory=t=>n=>{switch(n.type){case s.ItemType.EQUIPMENT:(0,e.EquipItemFromInventory)(t,n);break;case s.ItemType.CONSUMABLE:(0,e.ConsumeItemFromInventory)(t,n)}};e.ConsumeItemFromInventory=(t,n)=>{var i;const o=t.getScriptingService().getPlayer().getInventory();(0,e.RemoveItemFromInventory)(o,n),null===(i=n.onConsume)||void 0===i||i.forEach(e=>(0,a.getEffect)(e).onTrigger({type:"PLAYER",player:t.getScriptingService().getPlayer(),serviceLocator:t})),t.getAudioService().play(t.getResourceManager().manifest.audio[r.Audios.EATING])};e.EquipItemFromInventory=(t,n)=>{var i,c,l;const f=t.getScriptingService().getPlayer().getInventory();(0,e.RemoveItemFromInventory)(f,n);const h=f.equipped[n.equipmentType];h&&((0,e.AddItemToInventory)(f,h),null===(i=h.onUnEquip)||void 0===i||i.forEach(e=>(0,a.getEffect)(e).onTrigger({type:"PLAYER",player:t.getScriptingService().getPlayer(),serviceLocator:t})),null===(c=h.onEquip)||void 0===c||c.forEach(e=>(0,a.getEffect)((0,a.inverse)(e)).onTrigger({type:"PLAYER",player:t.getScriptingService().getPlayer(),serviceLocator:t}))),f.equipped[n.equipmentType]=n,t.getStore().getActions().onPlayerItemEquipped(n),null===(l=n.onEquip)||void 0===l||l.forEach(e=>(0,a.getEffect)(e).onTrigger({type:"PLAYER",player:t.getScriptingService().getPlayer(),serviceLocator:t})),t.getScriptingService().getPlayer().equipment.onEquip(n),n.equipmentType===s.EquipmentType.WEAPON&&t.getTutorialService().onEvent(u.TutorialServiceEvent.EQUIPED_WEAPON),t.getAudioService().play(t.getResourceManager().manifest.audio[(0,o.randomSelection)([r.Audios.EQUIP_0])])};e.UnequipItemFromInventory=(t,n)=>{var i,c;const l=t.getScriptingService().getPlayer().getInventory();l.equipped[n.equipmentType]=void 0,(0,e.AddItemToInventory)(l,n),null===(i=n.onUnEquip)||void 0===i||i.forEach(e=>(0,a.getEffect)(e).onTrigger({type:"PLAYER",player:t.getScriptingService().getPlayer(),serviceLocator:t})),null===(c=n.onEquip)||void 0===c||c.forEach(e=>(0,a.getEffect)((0,a.inverse)(e)).onTrigger({type:"PLAYER",player:t.getScriptingService().getPlayer(),serviceLocator:t})),t.getScriptingService().getPlayer().equipment.onUnequip(n),n.equipmentType===s.EquipmentType.WEAPON&&t.getTutorialService().onEvent(u.TutorialServiceEvent.UNEQUIPED_WEAPON),t.getAudioService().play(t.getResourceManager().manifest.audio[(0,o.randomSelection)([r.Audios.EQUIP_1])])};e.PlayerPickUpItem=t=>n=>{t.getStore().getActions().onPlayerItemDropCollected(n),t.getTutorialService().onEvent(u.TutorialServiceEvent.PICKED_UP_ITEM);const i=t.getScriptingService().getPlayer().getInventory();(0,e.AddItemToInventory)(i,n),t.getAudioService().play(t.getResourceManager().manifest.audio[(0,o.randomSelection)([r.Audios.COLLECT_0])])};e.RemoveItemFromInventory=(t,e)=>{for(let n=0;n<t.items.length;n++){const r=t.items[n];if(r.item.id===e.id){r.count--,r.count<=0&&t.items.splice(n,1);break}}};let c=0;e.AddItemToInventory=(t,e)=>{let n=!1;for(let r=0;r<t.items.length;r++){const i=t.items[r];if(i.item.id===e.id&&i.item.stackable){i.count++,n=!0;break}}n||t.items.push({item:e,count:1,id:c++})};e.DoesPlayerHaveItem=(t,n)=>(0,e.DoesHaveItem)(t.getScriptingService().getPlayer().getInventory(),n);e.DoesHaveItem=(t,e)=>t.items.some(t=>t.item.id===e)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsistentArray=void 0;e.ConsistentArray=class{constructor(){this.array=[],this.toAdd=[],this.toRemove=[]}getArray(){return this.array}getToAdd(){return this.toAdd}getToRemove(){return this.toRemove}add(t){this.toAdd.push(t)}remove(t){this.toRemove.push(t)}clear(){this.array=[],this.toAdd=[],this.toRemove=[]}sync(){this.array.push(...this.toAdd),this.toRemove.forEach(t=>{const e=this.array.indexOf(t);e<0||this.array.splice(e,1)}),this.toAdd=[],this.toRemove=[]}}},function(t,e,n){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(77).Buffer.isBuffer},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JoinComponent=void 0;const r=n(38),i=n(37);e.JoinComponent=function(t){const e=new i.FunctionEventSubscriber(r.emptyActions);let n=!1;return{update:e=>t.forEach(t=>t.update&&t.update(e)),getActions:r=>(n||(n=!0,t.forEach(t=>e.subscribe(t.getActions(r)))),e.actions())}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SwitchComponent=void 0;const r=n(38),i=n(37);e.SwitchComponent=class{constructor(t,e,n){this.components=t,this.currentState=e,this.getSwitch=n,this.newState=e}update(t){if(this.newState!==this.currentState){const e=this.components[this.currentState]?this.components[this.currentState].getActions(t):{},n=this.components[this.newState]?this.components[this.newState].getActions(t):{};e.onEntityDeleted&&e.onEntityDeleted(),n.onEntityCreated&&n.onEntityCreated(),this.currentState=this.newState}const e=this.components[this.currentState];e&&e.update&&e.update(t)}getActions(t){const e=new i.FunctionEventSubscriber(r.emptyActions);Object.keys(this.components).forEach(n=>{e.subscribe(this.wrapActions(this.components[n].getActions(t),n,t))});const n=e.actions();return Object.assign(Object.assign({},n),{onStateTransition:(e,r)=>{n.onStateTransition&&n.onStateTransition(e,r),this.newState=this.getSwitch(t)}})}wrapActions(t,e,n){const r={};return Object.keys(t).forEach(i=>{r[i]=(...r)=>{if(this.getSwitch(n)===e){(0,t[i])(...r)}}}),r}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteRenderComponent=void 0;const r=n(12),i={r:0,g:0,b:0,intensity:0};function o(t){const{position:e,sprite:n,spriteWidth:o,spriteHeight:a,height:s,shade:u}=t.getState(),c="string"==typeof n?t.getServiceLocator().getResourceManager().manifest.spritesheets[r.SpriteSheets.SPRITE].getSprite(n).textureCoordinate:n;return{position:[e.x,e.y],size:[o,a],height:s+a/2,texture:c,shade:u||i}}e.SpriteRenderComponent=()=>{let t;return{getActions:e=>({onEntityCreated:()=>{t=e.getServiceLocator().getRenderService().spriteRenderService.createItem(o(e))},onEntityDeleted:()=>{t&&(e.getServiceLocator().getRenderService().spriteRenderService.freeItem(t),t=void 0)}}),update:e=>{const n=o(e);e.getServiceLocator().getRenderService().spriteRenderService.updateItem(t,n)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShadowComponentStyleSmall=e.ShadowComponentStyleAlpha=e.ShadowComponentStyle=void 0;const r="rgba(0, 0, 0, 0.8)";e.ShadowComponentStyle=()=>({backgroundColor:r,boxShadow:"0 0 20px 20px "+r});e.ShadowComponentStyleAlpha=()=>({backgroundColor:"rgba(0, 0, 0, 0.4)",boxShadow:"0 0 20px 20px rgba(0, 0, 0, 0.4)"});e.ShadowComponentStyleSmall=()=>({backgroundColor:r,boxShadow:"0 0 10px 10px "+r})},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.fadeUniformPositions=e.Parameters=e.fadeFunction=void 0,e.fadeFunction="\n\n    uniform lowp float fadeAccuracy;\n    uniform lowp float fadePixelAccuracy;\n    uniform lowp float minViewDistance;\n    uniform lowp float maxViewDistance;\n\n    lowp float fade(lowp float distance) {\n\n        lowp float accuracy = fadeAccuracy;\n        lowp float minDistance = minViewDistance;\n        lowp float maxDistance = maxViewDistance;\n\n        lowp float grad = (distance - minDistance) / (maxDistance - minDistance);\n\n        grad = floor(grad * accuracy) / accuracy;\n\n        return 1.0 - max(min(grad, 1.0), 0.0);\n    }\n",function(t){t.fadeAccuracy="fadeAccuracy",t.fadePixelAccuracy="fadePixelAccuracy",t.minViewDistance="minViewDistance",t.maxViewDistance="maxViewDistance"}(r=e.Parameters||(e.Parameters={}));e.fadeUniformPositions=(t,e)=>{const n={};for(const i in r)n[i]=e.getUniformLocation(t,i);return n}},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.hazeUniformPositions=e.Parameters=e.hazeFunction=void 0,e.hazeFunction="\n    uniform lowp float hazeAmount;\n    uniform lowp float hazeR;\n    uniform lowp float hazeG;\n    uniform lowp float hazeB;\n\n    lowp vec3 haze(lowp vec3 colour, lowp float distance) {\n\n        lowp vec3 hazeColour = vec3(\n            hazeR, hazeG, hazeB\n        );\n\n        lowp float grad = 1.0 - distance;\n\n        return (grad * hazeColour) + ((1.0 - grad) * colour);\n    }\n",function(t){t.hazeAmount="hazeAmount",t.hazeR="hazeR",t.hazeG="hazeG",t.hazeB="hazeB"}(r=e.Parameters||(e.Parameters={}));e.hazeUniformPositions=(t,e)=>{const n={};for(const i in r)n[i]=e.getUniformLocation(t,i);return n}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(94),e),i(n(169),e),i(n(170),e),i(n(171),e)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.emptyActions=void 0,e.emptyActions={onGameInitialised:()=>{},fadeBackground:()=>{},fadeMenu:()=>{},setGameFPS:t=>{},setGameLoadPercentage:t=>{},startGame:()=>{},stopGame:()=>{},closeMiniGame:()=>{},addKeyHint:t=>{},removeKeyHint:t=>{},onEntityCreated:()=>{},onEntityDeleted:()=>{},onStateTransition:(t,e)=>{},onInteract:(t,e)=>{},openLockpickEvent:(t,e)=>{},onPhysicsImpulse:t=>{},onPlayerHealth:t=>{},onPlayerAttack:()=>{},onPlayerDamaged:()=>{},onPlayerKilled:()=>{},onPlayerInfoChanged:()=>{},onPlayerItemDropCollected:t=>{},onPlayerItemUsed:t=>{},onPlayerHealed:t=>{},onPlayerInventoryOpened:()=>{},onPlayerInventoryClosed:()=>{},onPlayerItemEquipped:t=>{},onDamagedByPlayer:(t,e)=>{},onBeatGame:()=>{},onChestOpened:()=>{},onEnemyKilled:()=>{},onStageReached:t=>{},onMaxStageReached:t=>{}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Spacing=void 0,e.Spacing={RADIUS_SMALL:8,RADIUS_MEDIUM:16}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InputService=e.InputState=void 0;const r=n(181),i=n(191),o=n(192);var a;!function(t){t.DEFAULT="DEFAULT",t.INVENTORY="INVENTORY",t.MENU="MENU",t.MINIGAME="MINIGAME"}(a=e.InputState||(e.InputState={}));e.InputService=class{constructor(){this.setInputState=t=>{switch(this.inputState=t,t){case a.DEFAULT:this.controlScheme=new r.DefaultControlScheme(this.serviceLocator);break;case a.MENU:this.controlScheme=new o.MenuControlScheme(this.serviceLocator);break;case a.INVENTORY:this.controlScheme=new i.InventoryControlScheme(this.serviceLocator)}},this.getInputState=()=>this.inputState,this.onKeyUp=t=>{this.keydown[t.code]=!1,this.controlScheme.onKeyUp(t.code,this.keydown)},this.onKeyDown=t=>{this.keydown[t.code]=!0,this.controlScheme.onKeyDown(t.code,this.keydown)},this.keydown={}}init(t){this.serviceLocator=t,this.setInputState(a.MENU),this.attachWindowHooks()}update(){this.controlScheme.poll(this.keydown)}attachWindowHooks(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEffect=e.emptyItemActions=e.inverse=e.EffectType=void 0;const r=n(184),i=n(185),o=n(186),a=n(187),s=n(188),u=n(189),c=n(190);!function(t){t.HEALS_SELF="HEALS_SELF",t.DAMAGES_TARGET="DAMAGES_TARGET",t.DAMAGES_TARGET_IN_RANGE="DAMAGES_TARGET_IN_RANGE",t.HEALTH_INCREASE="HEALTH_INCREASE",t.ANCIENT_POWER="ANCIENT_POWER",t.ATTACK_SPEED_INCREASE="ATTACK_SPEED_INCREASE",t.ACCURACY_INCREASE="ACCURACY_INCREASE",t.PROTECTION_INCREASE="PROTECTION_INCREASE",t.SPEED_INCREASE="SPEED_INCREASE"}(e.EffectType||(e.EffectType={}));e.inverse=t=>Object.assign(Object.assign({},t),{inverse:!0}),e.emptyItemActions={onTrigger:t=>{},onTriggerInverse:t=>{}};const l={HEALS_SELF:s.EffectHealsPlayer,DAMAGES_TARGET:a.EffectDamagesTarget,DAMAGES_TARGET_IN_RANGE:a.EffectDamagesTargetInRange,HEALTH_INCREASE:s.EffectIncreaseHealthPlayer,ANCIENT_POWER:i.EffectAncientPower,ATTACK_SPEED_INCREASE:o.EffectAttackSpeedIncrease,ACCURACY_INCREASE:r.EffectAccuracyIncrease,PROTECTION_INCREASE:u.EffectProtectionIncrease,SPEED_INCREASE:c.EffectSpeedIncrease};e.getEffect=t=>{const e=l[t.type](t);return t.inverse?{onTrigger:e.onTriggerInverse,onTriggerInverse:e.onTrigger}:e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DeregisterKeyHint=e.RegisterKeyHint=void 0;let r=1;e.RegisterKeyHint=t=>e=>{r++;const{code:n,hint:i}=e;return t.getStore().getActions().addKeyHint({id:""+r,keys:n,hint:i}),r};e.DeregisterKeyHint=t=>e=>{t.getStore().getActions().removeKeyHint({id:""+e})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActionDelay=void 0;const r=n(10);e.ActionDelay=class{constructor(t){this.canPerform=!0,this.delay=t}setDelay(t){this.delay=t}canAction(){return this.canPerform}onAction(){this.canPerform=!1,r.ProcedureService.setGameTimeout(()=>{this.canPerform=!0},this.delay)}updateDelay(t){this.delay=t}}},function(t,e,n){(function(){var e,r={}.hasOwnProperty;e=n(8),t.exports=function(t){function e(t){e.__super__.constructor.call(this,t),this.value=""}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(e.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.substringData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.appendData=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.insertData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.deleteData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.replaceData=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isEqualNode=function(t){return!!e.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.data===this.data},e}(e)}).call(this)},function(t,e){(function(){t.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}v(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&v(t,"error",e,n)}(t,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function f(t,e,n,r){var i,o,a,s;if(c(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):g(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function v(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var c=u.length,l=g(u,c);for(n=0;n<c;++n)o(l[n],this,e)}return!0},s.prototype.addListener=function(t,e){return f(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return f(this,t,e,!0)},s.prototype.once=function(t,e){return c(e),this.on(t,d(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,d(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,o,a;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,n(24))},function(t,e,n){var r=n(77),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.withInteractionHint=e.onCanBeInteractedWithByPlayer=e.onInteractedWith=e.CanBeInteractedWith=void 0;const r=n(16),i=n(237),o=n(42),a=n(31),s=(t,e)=>{let n;return{getActions:r=>({onEntityCreated:()=>{n=e(r),r.getServiceLocator().getInteractionService().registerEntity(n,t)},onEntityDeleted:()=>{r.getServiceLocator().getInteractionService().unregisterEntity(n,t)}})}};e.CanBeInteractedWith=t=>s(t,t=>({onInteract:t=>{},getPosition:()=>t.getState(),source:{type:r.InteractionSourceType.ENTITY,entity:t}}));e.onInteractedWith=(t,e)=>s(t,t=>({onInteract:n=>e(t,n),getPosition:()=>t.getState(),source:{type:r.InteractionSourceType.ENTITY,entity:t}}));e.onCanBeInteractedWithByPlayer=(t,e,n)=>{let o=!1;return(0,a.JoinComponent)([{update:(0,i.throttleCount)(t=>{const i=t.getServiceLocator().getScriptingService().getPlayer(),{position:a,angle:s}=i.getCamera(),u=t.getServiceLocator().getInteractionService().getInteractables(r.InteractionType.INTERACT,a,s,1).some(e=>e.source.type===r.InteractionSourceType.ENTITY&&e.source.entity===t);u&&!1===o&&(e(),o=!0),u||!0!==o||(n(),o=!1)},5),getActions:()=>({onEntityDeleted:n})},s(t,t=>({getPosition:()=>t.getState(),source:{type:r.InteractionSourceType.ENTITY,entity:t}}))])};e.withInteractionHint=(t,n,r,i)=>{let a;return(0,e.onCanBeInteractedWithByPlayer)(n,()=>{a=(0,o.RegisterKeyHint)(t)({code:r,hint:i})},()=>{void 0!==a&&(0,o.DeregisterKeyHint)(t)(a)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createItemDrop=e.createItemDropState=e.WhenInPlayerVicinity=void 0;const r=n(6),i=n(3),o=n(28),a=n(126),s=n(33),u=n(81),c=n(32),l=n(19);e.WhenInPlayerVicinity=(t,e,n)=>{let r=!1;return{update:o=>{const a=o.getServiceLocator().getScriptingService().getPlayer(),{position:s}=o.getState(),u=a.getPositon(),c=i.vec.vec_sub(u,s),l=i.vec.vec_distance(c);r?l>t&&(r=!1,n(o)):l<=t&&(r=!0,e(o))},getActions:()=>({onEntityCreated:()=>r=!1})}};e.createItemDropState=function(t){const{item:e,position:n}=t,r=2*Math.random()*Math.PI,o={x:Math.sin(r),y:Math.cos(r)};let a=t.withVelocity?i.vec.vec_mult_scalar(o,.1):{x:0,y:0};a=t.force?i.vec.vec_add(a,t.force):a;const s=i.vec.vec_add(n,i.vec.vec_mult_scalar(o,.1)),u=e.dropSize?.4*e.dropSize:.4;return{yOffset:0,position:s,height:0,heightVelocity:0,radius:u/2,angle:0,spriteWidth:u,spriteHeight:u,sprite:e.spriteIcon,velocity:a,friction:.8,mass:1,elastic:1,collidesEntities:!1,collidesWalls:!0,item:t.item,attracting:"false"}},e.createItemDrop=function(t,n){const f=n.item.dropSize?.4*n.item.dropSize:.4,h=n.item.dropSize?.08*n.item.dropSize:.08;return new l.Entity(t,n,(0,s.SpriteRenderComponent)(),(0,a.PhysicsComponent)(),((t,e,n)=>(0,u.AnimationComponent)(i=>(0,r.animation)(r=>{const o=Math.sin(r*Math.PI),a=t+o*n,s=e+o*n;i.setState({spriteWidth:a,spriteHeight:s})}).speed(350).withOffset(Math.random()).looping()))(f,f,h),(0,e.WhenInPlayerVicinity)(.5,t=>{t.delete(),(0,o.PlayerPickUpItem)(t.getServiceLocator())(t.getState().item)},()=>{}),new c.SwitchComponent({false:(0,e.WhenInPlayerVicinity)(1,t=>{t.setState({attracting:"true"})},()=>{}),true:(d=t=>t.getServiceLocator().getScriptingService().getPlayer().getPositon(),p=.05,{update:t=>{const{velocity:e,position:n}=t.getState(),r=d(t),o=i.vec.vec_sub(r,n),a=i.vec.vec_distance(o),s=p/(a+1),u=i.vec.vec_mult_scalar(i.vec.vec_normalize(o),s);t.setState({velocity:i.vec.vec_add(e,u)},!1)},getActions:()=>({})})},"false",t=>t.getState().attracting));var d,p}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FadeComponent=void 0;const r=n(0),i=n(6);class o extends r.Component{constructor(t){super(t),this.currentAnimation=null;let e=t.shouldShow?1:0;void 0!==t.startingShown&&(e=t.startingShown?1:0),this.state={opacity:e}}componentDidMount(){this.setAnimation()}componentDidUpdate(t){t.shouldShow!==this.props.shouldShow&&this.setAnimation()}setAnimation(){var t;this.currentAnimation&&this.currentAnimation.stop(),this.currentAnimation=(0,i.animation)(t=>this.setState({opacity:t})).speed(this.props.shouldShow?this.props.fadeInSpeed:this.props.fadeOutSpeed).tween((0,i.interpolate)(this.state.opacity,this.props.shouldShow?1:0)).driven(!1).whenDone(()=>this.props.shouldShow?this.props.onFadeIn&&this.props.onFadeIn():this.props.onFadeOut&&this.props.onFadeOut()),setTimeout(()=>this.currentAnimation.start(),null!==(t=this.props.delay)&&void 0!==t?t:0)}componentWillUnmount(){this.currentAnimation.stop()}render(){return r.createElement(r.Fragment,null,this.props.render(this.state.opacity,this.props.shouldShow))}}e.FadeComponent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewportComponent=void 0;const r=n(0);e.ViewportComponent=t=>r.createElement("div",{style:Object.assign({maxWidth:t.width,maxHeight:t.height,width:t.width,height:t.height,overflow:"hidden",marginLeft:t.x,marginTop:t.y,position:"absolute"},t.style)},t.children)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteImageComponent=void 0;const r=n(0),i=n(262),o=n(15);e.SpriteImageComponent=t=>{const e=(0,o.useServiceLocator)().getResourceManager().manifest.spritesheets[t.spriteSheet];return r.createElement("div",{style:Object.assign(Object.assign({},(0,i.getImagePropsFromSprite)(e.getSprite(t.sprite),t.style.width,t.style.height)),t.style)})}},function(t,e,n){"use strict";t.exports=function(t){var e="string"==typeof t?t.charCodeAt(0):t;return e>=48&&e<=57}},function(t,e,n){"use strict";t.exports=s;var r=n(309),i=r.CONTINUE,o=r.SKIP,a=r.EXIT;function s(t,e,n,i){"function"==typeof e&&"function"!=typeof n&&(i=n,n=e,e=null),r(t,e,(function(t,e){var r=e[e.length-1],i=r?r.children.indexOf(t):null;return n(t,i,r)}),i)}s.CONTINUE=i,s.SKIP=o,s.EXIT=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Maps=void 0,function(t){t.PRISON="PRISON",t.TEST="TEST",t.CELLAR="CELLAR"}(e.Maps||(e.Maps={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.store=e.reducers=void 0;const r=n(37),i=n(38),o=n(172),a=n(173),s=n(174),u=n(175),c=n(176),l=n(177);e.reducers={uiState:l.uiReducer,gameStart:o.gameStartReducer,inventory:a.inventoryReducer,minigame:u.minigameReducer,keyHints:s.keyHintReducer,player:c.playerReducer},e.store=new r.Store((0,r.combineReducers)(e.reducers),i.emptyActions)},function(t,e,n){"use strict";function r(){return Math.random()}function i(t,e){return Math.floor(r()*(e-t))+t}Object.defineProperty(e,"__esModule",{value:!0}),e.randomSelection=e.randomBool=e.randomFloatRange=e.randomIntRange=e.randomFloat=void 0,e.randomFloat=r,e.randomIntRange=i,e.randomFloatRange=function(t,e){const n=r();return n*e+(1-n)*t},e.randomBool=function(){return r()>.5},e.randomSelection=function(t){return t[i(0,t.length)]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TutorialService=e.TutorialServiceEvent=void 0;const r=n(42),i={movement:"WALKING",inventory:"NONE",weapon:"NONE",equip:"NONE"};var o;!function(t){t[t.START=0]="START",t[t.WALK=1]="WALK",t[t.TURN=2]="TURN",t[t.OPEN_INVENTORY=3]="OPEN_INVENTORY",t[t.CLOSE_INVENTORY=4]="CLOSE_INVENTORY",t[t.PICKED_UP_ITEM=5]="PICKED_UP_ITEM",t[t.EQUIPED_WEAPON=6]="EQUIPED_WEAPON",t[t.UNEQUIPED_WEAPON=7]="UNEQUIPED_WEAPON",t[t.ATTACKED=8]="ATTACKED"}(o=e.TutorialServiceEvent||(e.TutorialServiceEvent={}));const a={walk:{code:["W","A","S","D"],hint:"Walk"},turn:{code:["",""],hint:"Turn"},inventory:{code:["I"],hint:"Open Inventory"},closeInventory:{code:["I"],hint:"Close Inventory"},attack:{code:["Space"],hint:"Attack"}};e.TutorialService=class{constructor(){this.state=i}init(t){this.serviceLocator=t}onStart(t){this.state=t||i,this.onEvent(o.START)}onEvent(t){switch(t){case o.START:"WALKING"===this.state.movement&&this.register(a.walk),"TURNING"===this.state.movement&&this.register(a.turn),"OPENED"===this.state.inventory&&this.register(a.inventory),"CLOSED"===this.state.inventory&&(this.state.inventory="OPENED",this.register(a.inventory));break;case o.WALK:"WALKING"===this.state.movement&&(this.deregister(a.walk),this.register(a.turn),this.state.movement="TURNING");break;case o.TURN:"TURNING"===this.state.movement&&(this.deregister(a.turn),this.state.movement="DONE");break;case o.PICKED_UP_ITEM:"NONE"===this.state.inventory&&(this.register(a.inventory),this.state.inventory="OPENED"),"NONE"===this.state.equip&&(this.state.equip="PICKED_UP");break;case o.OPEN_INVENTORY:"OPENED"===this.state.inventory&&(this.deregister(a.inventory),this.register(a.closeInventory),this.state.inventory="CLOSED");break;case o.CLOSE_INVENTORY:"CLOSED"===this.state.inventory&&(this.deregister(a.closeInventory),this.state.inventory="DONE");break;case o.EQUIPED_WEAPON:"NONE"===this.state.weapon&&this.register(a.attack),"PICKED_UP"===this.state.equip&&(this.state.equip="DONE");break;case o.UNEQUIPED_WEAPON:this.deregister(a.attack);break;case o.ATTACKED:this.deregister(a.attack),this.state.weapon="DONE"}}serialise(){return this.state}destroy(){for(const t in a)this.deregister(a[t])}shouldShowEquipHint(){return"PICKED_UP"===this.state.equip}register(t){t.id||(t.id=(0,r.RegisterKeyHint)(this.serviceLocator)(t))}deregister(t){t.id&&((0,r.DeregisterKeyHint)(this.serviceLocator)(t.id),t.id=void 0)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logFPS=e.fpsNorm=e.setFPSProportion=void 0,e.setFPSProportion=function(t){o().setProportion(t)},e.fpsNorm=function(t){return o().norm(t)},e.logFPS=function(t){o().logFPS(t)};class r{constructor(){this.proportion=1,this.framesSinceLastLog=0,this.previousLogTime=Date.now()}setProportion(t){this.proportion=t}norm(t){return t*this.proportion}logFPS(t){this.framesSinceLastLog++;Date.now()-this.previousLogTime>=1e4&&(t(this.framesSinceLastLog/10),this.framesSinceLastLog=0,this.previousLogTime=Date.now())}}let i;const o=()=>(i||(i=new r),i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameItems=e.createAncientSword=e.createBasicSword=e.createBasicFood=e.GameItem=void 0;const r=n(41),i=n(23);var o;!function(t){t.GOLD_KEY="GOLD_KEY",t.GOLD_RING="GOLD_RING",t.GOLD_COIN="GOLD_COIN",t.WEAPON_WOOD_STICK="WEAPON_WOOD_STICK",t.EQUIPMENT_CHEST="EQUIPMENT_CHEST",t.EQUIPMENT_GREAVES="EQUIPMENT_GREAVES",t.EQUIPMENT_SHIELD="EQUIPMENT_SHIELD",t.EQUIPMENT_HELMET="EQUIPMENT_HELMET"}(o=e.GameItem||(e.GameItem={}));e.createBasicFood=(t,e,n,o)=>({id:t,type:i.ItemType.CONSUMABLE,name:e,description:n,spriteIcon:t,stackable:!0,onConsume:[{type:r.EffectType.HEALS_SELF,points:o}]});e.createBasicSword=(t,e,n,o)=>({id:""+Math.random(),spriteIcon:t,stackable:!1,name:e,type:i.ItemType.EQUIPMENT,description:n,onAttack:[{type:r.EffectType.DAMAGES_TARGET_IN_RANGE,a:o,b:o+1}],equipmentType:i.EquipmentType.WEAPON});e.createAncientSword=()=>Object.assign(Object.assign({},(0,e.createBasicSword)("weapon_demon_staff","Demon Staff","A staff made from the bones of a long dead demon",50)),{onEquip:[{type:r.EffectType.ANCIENT_POWER}],onAttack:[{type:r.EffectType.DAMAGES_TARGET_IN_RANGE,a:30,b:50}]}),e.GameItems={[o.GOLD_KEY]:{id:o.GOLD_KEY,spriteIcon:"item_key",stackable:!1,name:"Gold Key",type:i.ItemType.KEY,description:"I wonder what it unlocks"},[o.WEAPON_WOOD_STICK]:(0,e.createBasicSword)("weapon_wood_stick","Wooden Club","A heavy wooden club, good for bashing some heads",1),[o.GOLD_COIN]:{id:o.GOLD_COIN,type:i.ItemType.PRECIOUS,spriteIcon:"item_gold_coin",stackable:!0,name:"Gold Coin",description:"Marked with the image of the Emperor",dropSize:.4},[o.GOLD_RING]:{id:o.GOLD_RING,spriteIcon:"item_gold_ring",stackable:!1,name:"Ring of Power",type:i.ItemType.EQUIPMENT,onEquip:[{type:r.EffectType.ANCIENT_POWER},{type:r.EffectType.ATTACK_SPEED_INCREASE},{type:r.EffectType.HEALTH_INCREASE,points:10}],equipmentType:i.EquipmentType.RING,description:"Pulls my arm as I swing"},[o.EQUIPMENT_HELMET]:{id:o.EQUIPMENT_HELMET,spriteIcon:"equipment_helmet",stackable:!1,name:"Helmet of Intellect",type:i.ItemType.EQUIPMENT,onEquip:[{type:r.EffectType.ANCIENT_POWER},{type:r.EffectType.ACCURACY_INCREASE},{type:r.EffectType.HEALTH_INCREASE,points:20}],equipmentType:i.EquipmentType.HELMET,description:"Sharpens my eyes and hones my thrust"},[o.EQUIPMENT_CHEST]:{id:o.EQUIPMENT_CHEST,spriteIcon:"equipment_chestplate",stackable:!1,name:"Chestplate of Endurance",type:i.ItemType.EQUIPMENT,onEquip:[{type:r.EffectType.ANCIENT_POWER},{type:r.EffectType.HEALTH_INCREASE,points:200}],equipmentType:i.EquipmentType.BODY,description:"Imbued with intense life force"},[o.EQUIPMENT_SHIELD]:{id:o.EQUIPMENT_SHIELD,spriteIcon:"equipment_shield",stackable:!1,name:"Shield of the Guardians",type:i.ItemType.EQUIPMENT,onEquip:[{type:r.EffectType.ANCIENT_POWER},{type:r.EffectType.HEALTH_INCREASE,points:40},{type:r.EffectType.PROTECTION_INCREASE}],equipmentType:i.EquipmentType.SHIELD,description:"Awards with the protection of the forefathers"},[o.EQUIPMENT_GREAVES]:{id:o.EQUIPMENT_GREAVES,spriteIcon:"equipment_greaves",stackable:!1,name:"Greaves of Swift",type:i.ItemType.EQUIPMENT,onEquip:[{type:r.EffectType.ANCIENT_POWER},{type:r.EffectType.HEALTH_INCREASE,points:30},{type:r.EffectType.SPEED_INCREASE}],equipmentType:i.EquipmentType.SHOES,description:"Speed gifted by the ancients"}}},function(t,e){(function(){e.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},function(t,e,n){(function(){var e,r,i,o,a,s,u,c,l={}.hasOwnProperty;c=n(13),u=c.isObject,s=c.isFunction,a=c.getValue,o=n(8),e=n(2),r=n(108),i=n(64),t.exports=function(t){function n(t,r,i){var o,a,s,u;if(n.__super__.constructor.call(this,t),null==r)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(r),this.type=e.Element,this.attribs={},this.schemaTypeInfo=null,null!=i&&this.attribute(i),t.type===e.Document&&(this.isRoot=!0,this.documentObject=t,t.rootObject=this,t.children))for(a=0,s=(u=t.children).length;a<s;a++)if((o=u[a]).type===e.DocType){o.name=this.name;break}}return function(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),Object.defineProperty(n.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(n.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(n.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new i(this.attribs)),this.attributeMap}}),n.prototype.clone=function(){var t,e,n,r;for(e in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attribs={},r=this.attribs)l.call(r,e)&&(t=r[e],n.attribs[e]=t.clone());return n.children=[],this.children.forEach((function(t){var e;return(e=t.clone()).parent=n,n.children.push(e)})),n},n.prototype.attribute=function(t,e){var n,i;if(null!=t&&(t=a(t)),u(t))for(n in t)l.call(t,n)&&(i=t[n],this.attribute(n,i));else s(e)&&(e=e.apply()),this.options.keepNullAttributes&&null==e?this.attribs[t]=new r(this,t,""):null!=e&&(this.attribs[t]=new r(this,t,e));return this},n.prototype.removeAttribute=function(t){var e,n,r;if(null==t)throw new Error("Missing attribute name. "+this.debugInfo());if(t=a(t),Array.isArray(t))for(n=0,r=t.length;n<r;n++)e=t[n],delete this.attribs[e];else delete this.attribs[t];return this},n.prototype.toString=function(t){return this.options.writer.element(this,this.options.writer.filterOptions(t))},n.prototype.att=function(t,e){return this.attribute(t,e)},n.prototype.a=function(t,e){return this.attribute(t,e)},n.prototype.getAttribute=function(t){return this.attribs.hasOwnProperty(t)?this.attribs[t].value:null},n.prototype.setAttribute=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNode=function(t){return this.attribs.hasOwnProperty(t)?this.attribs[t]:null},n.prototype.setAttributeNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.removeAttributeNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setAttributeNS=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.removeAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNodeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setAttributeNodeNS=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.hasAttribute=function(t){return this.attribs.hasOwnProperty(t)},n.prototype.hasAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setIdAttribute=function(t,e){return this.attribs.hasOwnProperty(t)?this.attribs[t].isId:e},n.prototype.setIdAttributeNS=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setIdAttributeNode=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByClassName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.isEqualNode=function(t){var e,r,i;if(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(t))return!1;if(t.namespaceURI!==this.namespaceURI)return!1;if(t.prefix!==this.prefix)return!1;if(t.localName!==this.localName)return!1;if(t.attribs.length!==this.attribs.length)return!1;for(e=r=0,i=this.attribs.length-1;0<=i?r<=i:r>=i;e=0<=i?++r:--r)if(!this.attribs[e].isEqualNode(t.attribs[e]))return!1;return!0},n}(o)}).call(this)},function(t,e){(function(){t.exports=function(){function t(t){this.nodes=t}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.getNamedItem=function(t){return this.nodes[t]},t.prototype.setNamedItem=function(t){var e;return e=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,e||null},t.prototype.removeNamedItem=function(t){var e;return e=this.nodes[t],delete this.nodes[t],e||null},t.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},t.prototype.getNamedItemNS=function(t,e){throw new Error("This DOM method is not implemented.")},t.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},t.prototype.removeNamedItemNS=function(t,e){throw new Error("This DOM method is not implemented.")},t}()}).call(this)},function(t,e,n){(function(){var e,r,i={}.hasOwnProperty;e=n(2),r=n(44),t.exports=function(t){function n(t,r){if(n.__super__.constructor.call(this,t),null==r)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=e.CData,this.value=this.stringify.cdata(r)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.cdata(this,this.options.writer.filterOptions(t))},n}(r)}).call(this)},function(t,e,n){(function(){var e,r,i={}.hasOwnProperty;e=n(2),r=n(44),t.exports=function(t){function n(t,r){if(n.__super__.constructor.call(this,t),null==r)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=e.Comment,this.value=this.stringify.comment(r)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.comment(this,this.options.writer.filterOptions(t))},n}(r)}).call(this)},function(t,e,n){(function(){var e,r,i,o={}.hasOwnProperty;i=n(13).isObject,r=n(8),e=n(2),t.exports=function(t){function n(t,r,o,a){var s;n.__super__.constructor.call(this,t),i(r)&&(r=(s=r).version,o=s.encoding,a=s.standalone),r||(r="1.0"),this.type=e.Declaration,this.version=this.stringify.xmlVersion(r),null!=o&&(this.encoding=this.stringify.xmlEncoding(o)),null!=a&&(this.standalone=this.stringify.xmlStandalone(a))}return function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),n.prototype.toString=function(t){return this.options.writer.declaration(this,this.options.writer.filterOptions(t))},n}(r)}).call(this)},function(t,e,n){(function(){var e,r,i,o,a,s,u,c,l={}.hasOwnProperty;c=n(13).isObject,u=n(8),e=n(2),r=n(69),o=n(70),i=n(71),a=n(72),s=n(64),t.exports=function(t){function n(t,r,i){var o,a,s,u,l,f;if(n.__super__.constructor.call(this,t),this.type=e.DocType,t.children)for(a=0,s=(u=t.children).length;a<s;a++)if((o=u[a]).type===e.Element){this.name=o.name;break}this.documentObject=t,c(r)&&(r=(l=r).pubID,i=l.sysID),null==i&&(i=(f=[r,i])[0],r=f[1]),null!=r&&(this.pubID=this.stringify.dtdPubID(r)),null!=i&&(this.sysID=this.stringify.dtdSysID(i))}return function(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),Object.defineProperty(n.prototype,"entities",{get:function(){var t,n,r,i,o;for(i={},n=0,r=(o=this.children).length;n<r;n++)(t=o[n]).type!==e.EntityDeclaration||t.pe||(i[t.name]=t);return new s(i)}}),Object.defineProperty(n.prototype,"notations",{get:function(){var t,n,r,i,o;for(i={},n=0,r=(o=this.children).length;n<r;n++)(t=o[n]).type===e.NotationDeclaration&&(i[t.name]=t);return new s(i)}}),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(n.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),n.prototype.element=function(t,e){var n;return n=new i(this,t,e),this.children.push(n),this},n.prototype.attList=function(t,e,n,i,o){var a;return a=new r(this,t,e,n,i,o),this.children.push(a),this},n.prototype.entity=function(t,e){var n;return n=new o(this,!1,t,e),this.children.push(n),this},n.prototype.pEntity=function(t,e){var n;return n=new o(this,!0,t,e),this.children.push(n),this},n.prototype.notation=function(t,e){var n;return n=new a(this,t,e),this.children.push(n),this},n.prototype.toString=function(t){return this.options.writer.docType(this,this.options.writer.filterOptions(t))},n.prototype.ele=function(t,e){return this.element(t,e)},n.prototype.att=function(t,e,n,r,i){return this.attList(t,e,n,r,i)},n.prototype.ent=function(t,e){return this.entity(t,e)},n.prototype.pent=function(t,e){return this.pEntity(t,e)},n.prototype.not=function(t,e){return this.notation(t,e)},n.prototype.up=function(){return this.root()||this.documentObject},n.prototype.isEqualNode=function(t){return!!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&(t.name===this.name&&(t.publicId===this.publicId&&t.systemId===this.systemId))},n}(u)}).call(this)},function(t,e,n){(function(){var e,r,i={}.hasOwnProperty;r=n(8),e=n(2),t.exports=function(t){function n(t,r,i,o,a,s){if(n.__super__.constructor.call(this,t),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==i)throw new Error("Missing DTD attribute name. "+this.debugInfo(r));if(!o)throw new Error("Missing DTD attribute type. "+this.debugInfo(r));if(!a)throw new Error("Missing DTD attribute default. "+this.debugInfo(r));if(0!==a.indexOf("#")&&(a="#"+a),!a.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(r));if(s&&!a.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(r));this.elementName=this.stringify.name(r),this.type=e.AttributeDeclaration,this.attributeName=this.stringify.name(i),this.attributeType=this.stringify.dtdAttType(o),s&&(this.defaultValue=this.stringify.dtdAttDefault(s)),this.defaultValueType=a}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),n.prototype.toString=function(t){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(t))},n}(r)}).call(this)},function(t,e,n){(function(){var e,r,i,o={}.hasOwnProperty;i=n(13).isObject,r=n(8),e=n(2),t.exports=function(t){function n(t,r,o,a){if(n.__super__.constructor.call(this,t),null==o)throw new Error("Missing DTD entity name. "+this.debugInfo(o));if(null==a)throw new Error("Missing DTD entity value. "+this.debugInfo(o));if(this.pe=!!r,this.name=this.stringify.name(o),this.type=e.EntityDeclaration,i(a)){if(!a.pubID&&!a.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(o));if(a.pubID&&!a.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(o));if(this.internal=!1,null!=a.pubID&&(this.pubID=this.stringify.dtdPubID(a.pubID)),null!=a.sysID&&(this.sysID=this.stringify.dtdSysID(a.sysID)),null!=a.nData&&(this.nData=this.stringify.dtdNData(a.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(o))}else this.value=this.stringify.dtdEntityValue(a),this.internal=!0}return function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(n.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(n.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"xmlVersion",{get:function(){return null}}),n.prototype.toString=function(t){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(t))},n}(r)}).call(this)},function(t,e,n){(function(){var e,r,i={}.hasOwnProperty;r=n(8),e=n(2),t.exports=function(t){function n(t,r,i){if(n.__super__.constructor.call(this,t),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());i||(i="(#PCDATA)"),Array.isArray(i)&&(i="("+i.join(",")+")"),this.name=this.stringify.name(r),this.type=e.ElementDeclaration,this.value=this.stringify.dtdElementValue(i)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),n.prototype.toString=function(t){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(t))},n}(r)}).call(this)},function(t,e,n){(function(){var e,r,i={}.hasOwnProperty;r=n(8),e=n(2),t.exports=function(t){function n(t,r,i){if(n.__super__.constructor.call(this,t),null==r)throw new Error("Missing DTD notation name. "+this.debugInfo(r));if(!i.pubID&&!i.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(r));this.name=this.stringify.name(r),this.type=e.NotationDeclaration,null!=i.pubID&&(this.pubID=this.stringify.dtdPubID(i.pubID)),null!=i.sysID&&(this.sysID=this.stringify.dtdSysID(i.sysID))}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n.prototype.toString=function(t){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(t))},n}(r)}).call(this)},function(t,e,n){(function(){var e,r,i={}.hasOwnProperty;e=n(2),r=n(8),t.exports=function(t){function n(t,r){if(n.__super__.constructor.call(this,t),null==r)throw new Error("Missing raw text. "+this.debugInfo());this.type=e.Raw,this.value=this.stringify.raw(r)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.raw(this,this.options.writer.filterOptions(t))},n}(r)}).call(this)},function(t,e,n){(function(){var e,r,i={}.hasOwnProperty;e=n(2),r=n(44),t.exports=function(t){function n(t,r){if(n.__super__.constructor.call(this,t),null==r)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=e.Text,this.value=this.stringify.text(r)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var t,e,n;for(n="",e=this.previousSibling;e;)n=e.data+n,e=e.previousSibling;for(n+=this.data,t=this.nextSibling;t;)n+=t.data,t=t.nextSibling;return n}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.text(this,this.options.writer.filterOptions(t))},n.prototype.splitText=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceWholeText=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(r)}).call(this)},function(t,e,n){(function(){var e,r,i={}.hasOwnProperty;e=n(2),r=n(44),t.exports=function(t){function n(t,r,i){if(n.__super__.constructor.call(this,t),null==r)throw new Error("Missing instruction target. "+this.debugInfo());this.type=e.ProcessingInstruction,this.target=this.stringify.insTarget(r),this.name=this.target,i&&(this.value=this.stringify.insValue(i))}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(t))},n.prototype.isEqualNode=function(t){return!!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.target===this.target},n}(r)}).call(this)},function(t,e,n){(function(){var e,r={}.hasOwnProperty;e=n(111),t.exports=function(t){function e(t){e.__super__.constructor.call(this,t)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.document=function(t,e){var n,r,i,o,a;for(e=this.filterOptions(e),o="",r=0,i=(a=t.children).length;r<i;r++)n=a[r],o+=this.writeChildNode(n,e,0);return e.pretty&&o.slice(-e.newline.length)===e.newline&&(o=o.slice(0,-e.newline.length)),o},e}(e)}).call(this)},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(217),i=n(218),o=n(112);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(r)return B(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return I(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return x(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function E(t,e,n,r){return G(B(e,t.length-n),t,n,r)}function S(t,e,n,r){return G(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return S(t,e,n,r)}function _(t,e,n,r){return G(H(e),t,n,r)}function T(t,e,n,r){return G(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function x(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):m.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),f=0;f<s;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function M(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=U(t[o]);return i}function O(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function k(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function L(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,o){return o||L(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function j(t,e,n,r,o){return o||L(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):k(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):k(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:B(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(11))},function(t,e,n){(e=t.exports=n(113)).Stream=e,e.Readable=e,e.Writable=n(79),e.Duplex=n(18),e.Transform=n(117),e.PassThrough=n(225)},function(t,e,n){"use strict";(function(e,r,i){var o=n(47);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var s,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o.nextTick;y.WritableState=v;var c=Object.create(n(30));c.inherits=n(17);var l={deprecate:n(224)},f=n(114),h=n(48).Buffer,d=i.Uint8Array||function(){};var p,m=n(115);function g(){}function v(t,e){s=s||n(18),t=t||{};var r=e instanceof s;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,c=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===t.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(T,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),T(t,e))}(t,n,r,e,i);else{var a=w(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||S(t,n),r?u(E,t,n,a,i):E(t,n,a,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(t){if(s=s||n(18),!(p.call(y,this)||this instanceof s))return new y(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),f.call(this)}function b(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function E(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),T(t,e)}function S(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,b(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,f=n.callback;if(b(t,e,!1,e.objectMode?1:c.length,c,l,f),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function _(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),T(t,e)}))}function T(t,e){var n=w(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(_,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(y,f),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===y&&(t&&t._writableState instanceof v)}})):p=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,n){var r,i=this._writableState,a=!1,s=!i.objectMode&&(r=t,h.isBuffer(r)||r instanceof d);return s&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=g),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(s||function(t,e,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),o.nextTick(r,a),i=!1),i}(this,i,t,n))&&(i.pendingcb++,a=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=h.from(e,n));return e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,s,r,i,o);return u}(this,i,s,t,e,n)),a},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||S(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,T(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(24),n(116).setImmediate,n(11))},function(t,e,n){"use strict";var r=n(48).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=f,e=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function h(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationComponent=void 0,e.AnimationComponent=function(t){let e;return{getActions:n=>({onEntityCreated:()=>{e=t(n),e.start()},onEntityDeleted:()=>e&&e.stop()}),update:()=>e.tick()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createNPCState=e.createNPC=void 0;const r=n(4),i=n(16),o=n(10),a=n(123),s=n(239),u=n(240),c=n(124),l=n(241),f=n(6),h=n(3),d=n(97),p=n(43),m=n(125),g=n(49),v=n(126),y=n(33),b=n(81),E=n(31),S=n(32),w=n(127),_=n(19),T=n(242),x=n(20),A=n(50),I=n(243),P=n(83);var M;!function(t){t.SPAWNING="SPAWNING",t.IDLE="IDLE",t.PURSUING="PURSUING",t.DAMAGED="DAMAGED",t.ATTACKING="ATTACKING"}(M||(M={}));const O=t=>{const e=.02*t;return(0,b.AnimationComponent)(n=>(0,f.animation)(r=>{n.setState({spriteHeight:t+e*r})}).speed(3e3).tween(t=>Math.cos(2*Math.PI*t)).looping())},C=t=>({getActions:e=>({onDamagedByPlayer:()=>t(e)})}),R=()=>{const t=new p.ActionDelay(200);return{getActions:t=>({}),update:e=>{const n=e.getServiceLocator().getScriptingService().getPlayer().getPositon(),i=e.getState().position,o=d.vec.vec_sub(n,i),a=d.vec.vec_normalize(o),s=d.vec.vec_mult_scalar(a,.01*e.getState().npcType.speed),u=d.vec.vec_add(e.getState().velocity,s);e.setState({velocity:u}),t.canAction()&&(t.onAction(),e.getServiceLocator().getAudioService().play3D(e.getServiceLocator().getResourceManager().manifest.audio[(0,h.randomSelection)([r.Audios.FOOTSTEP_0,r.Audios.FOOTSTEP_1,r.Audios.FOOTSTEP_2,r.Audios.FOOTSTEP_3])],[i.x,i.y]))}}},D=(t,e)=>{let n=!1,r=!1;const i=t=>{n&&r&&t.setState({behaviour:M.PURSUING})};return[C(t=>t.setState({behaviour:M.DAMAGED})),O(t.spriteHeight),(0,A.WhenInPlayerVicinity)(e,t=>{n=!0,i(t)},t=>{n=!1}),{getActions:t=>({onEntityCreated:()=>{n=!1,r=!1,o.ProcedureService.setGameTimeout(()=>{r=!0,i(t)},1e3)}})}]},k=(t,e)=>{let n,r=0;return[C(t=>t.setState({behaviour:M.DAMAGED})),R(),(0,A.WhenInPlayerVicinity)(e,t=>{t.setState({behaviour:M.ATTACKING})},t=>{}),(0,b.AnimationComponent)(t=>(n=(0,f.animation)(e=>{const n=t.getServiceLocator().getResourceManager().getDefaultSpriteSheet().getAnimationInterp(t.getState().npcType.spriteRun,e);if(t.setState({sprite:n.textureCoordinate}),r<.25&&e>.25||r<.75&&e>.75){const e=t.getState().npcType;e.moveVibration&&t.getServiceLocator().getRenderService().screenShakeService.shake(e.moveVibration.amount)}r=e}).looping(),n)),{getActions:t=>({onEntityDeleted:()=>{t.setState({sprite:t.getState().npcType.spriteIdle})}}),update:t=>{const e=50/d.vec.vec_distance(t.getState().velocity);n&&n.speed(e)}}]},L=t=>{const e=t.getServiceLocator(),{position:n,spriteWidth:r,spriteHeight:i,itemDrops:o,velocity:a,npcType:s}=t.getState();t.delete();x.EntityFactory[x.EntityType.SCENERY_SPRITE](e,(0,P.createStaticSpriteState)(s.spriteDead,n,0,r,i)).create(),(0,m.DropItemDistribution)(e,o,n,a,!0),t.getServiceLocator().getWorld().forEachEntity(t=>t.getActions().onEnemyKilled())};function N(t){const{position:e,boss:n}=t,r=n?1e3:500;return[{getActions:t=>({onEntityCreated:()=>{const i=(0,s.SpawnEmitter)({creator:t=>(0,l.SpawnParticle)({start:t}),position:[e.x,0,e.y],rate:t.getState().boss?1:.5});if(t.getServiceLocator().getParticleService().addEmitter(i.emitter),o.ProcedureService.setGameTimeout(()=>{t.getServiceLocator().getParticleService().removeEmitter(i.emitter)},r),n){const n=(0,a.BurstEmitter)({creator:t=>(0,c.SmokeParticle)({start:t}),position:[e.x,0,e.y],rate:.5});t.getServiceLocator().getParticleService().addEmitter(n.emitter),o.ProcedureService.setGameTimeout(()=>{t.getServiceLocator().getParticleService().removeEmitter(n.emitter)},r)}}})},(0,w.TimeoutComponent)(t=>{t.setState({behaviour:M.IDLE})},r)]}const j={intensity:1,r:1,g:1,b:1};e.createNPC=function(t,e){return new _.Entity(t,e,(0,y.SpriteRenderComponent)(),(0,v.PhysicsComponent)(),(0,g.CanBeInteractedWith)(i.InteractionType.ATTACK),{getActions:t=>({onDamagedByPlayer:(e,n)=>{if(t.getState().boss&&!n)return void t.getServiceLocator().getAudioService().play(t.getServiceLocator().getResourceManager().manifest.audio[(0,h.randomSelection)([r.Audios.ENEMY_RESIST])]);let i=t.getState().health-e;i=i<0?0:i,t.setState({health:i}),0===i?t.getServiceLocator().getAudioService().play(t.getServiceLocator().getResourceManager().manifest.audio[(0,h.randomSelection)([r.Audios.ENEMY_KILLED])]):t.getServiceLocator().getAudioService().play(t.getServiceLocator().getResourceManager().manifest.audio[(0,h.randomSelection)([r.Audios.ENEMY_HURT])])}})},((t=.1)=>({getActions:e=>({onDamagedByPlayer:n=>{const{velocity:r,position:i}=e.getState(),o=e.getServiceLocator().getScriptingService().getPlayer().getPositon(),a=d.vec.vec_normalize(d.vec.vec_sub(i,o)),s=d.vec.vec_mult_scalar(a,t),u=d.vec.vec_add(r,s);e.setState({velocity:u})}})}))(),(n=L,{getActions:t=>({onStateTransition:(e,r)=>{0!==e.health&&0===r.health&&n(t)}})}),new S.SwitchComponent({[M.SPAWNING]:(0,E.JoinComponent)(N(e)),[M.IDLE]:(0,E.JoinComponent)(D(e,80)),[M.PURSUING]:(0,E.JoinComponent)(k(0,1.5)),[M.DAMAGED]:(0,E.JoinComponent)([{getActions:t=>({onEntityCreated:()=>{const{spriteWidth:e,spriteHeight:n}=t.getState().npcType;t.setState({shade:j,spriteWidth:1.1*e,spriteHeight:1.1*n})},onEntityDeleted:()=>{const{spriteWidth:e,spriteHeight:n}=t.getState().npcType;t.setState({shade:void 0,spriteWidth:e,spriteHeight:n})}})},(0,w.TimeoutComponent)(t=>{t.setState({behaviour:M.IDLE})},200)]),[M.ATTACKING]:(0,E.JoinComponent)([C(t=>t.setState({behaviour:M.DAMAGED})),{getActions:t=>({onEntityCreated:()=>{const{spriteWidth:e,spriteHeight:n,damage:r}=t.getState().npcType,i=(0,h.randomSelection)(t.getState().npcType.spriteAttack);t.getServiceLocator().getScriptingService().getPlayer().onDamage(r,t.getState().position),t.setState({sprite:i}),t.setState({spriteWidth:1.1*e,spriteHeight:1.1*n}),o.ProcedureService.setGameTimeout(()=>t.setState({behaviour:M.IDLE}),200)},onEntityDeleted:()=>{const{spriteWidth:e,spriteHeight:n}=t.getState().npcType;t.setState({sprite:t.getState().npcType.spriteIdle}),t.setState({spriteWidth:e,spriteHeight:n})}})}])},e.behaviour,t=>t.getState().behaviour),{getActions:t=>({onDamagedByPlayer:(e,n)=>{const{position:r,height:i,spriteHeight:o,health:a}=t.getState(),s=[r.x,i+o/2,r.y];!t.getState().boss||n?(t.getServiceLocator().getParticleService().addParticle((0,u.HealthDropParticle)({damage:a,start:s,getAngle:()=>t.getServiceLocator().getScriptingService().getPlayer().getAngle()})),t.getServiceLocator().getParticleService().addParticle((0,u.DamageTextParticle)({damage:e,start:s,getAngle:()=>t.getServiceLocator().getScriptingService().getPlayer().getAngle()}))):t.getServiceLocator().getParticleService().addParticle((0,u.DamageTextParticle)({damage:0,start:s,getAngle:()=>t.getServiceLocator().getScriptingService().getPlayer().getAngle()}))}})});var n},e.createNPCState=function(t){const{position:e,npcTypeId:n}=t,r=I.NPCTypes[n],{health:i,itemDropId:o,spriteIdle:a,spriteWidth:s,spriteHeight:u,boss:c,damage:l}=r,f=T.ITEM_DROP_MAP[o];return{npcType:r,behaviour:M.SPAWNING,sprite:a,spriteHeight:u,spriteWidth:s,position:e,height:0,yOffset:0,radius:.6,angle:0,velocity:{x:0,y:0},heightVelocity:0,friction:.9,mass:1,elastic:.9,collidesEntities:!0,collidesWalls:!0,health:i,itemDrops:f,boss:c,damage:l}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createBlock=e.createStaticSprite=e.createStaticSpriteState=e.createStaticWall=e.createStaticWallState=e.createStaticFloor=e.createStaticFloorState=void 0;const r=n(120),i=n(244),o=n(33),a=n(121),s=n(19),u=n(20);function c(t,e,n,r=1,i=0,o=!0){return{boundaryState:{boundary:{start:e,end:n},collides:o},wallSprite:t,wallStart:e,wallEnd:n,wallHeight:r,wallOffset:i}}e.createStaticFloorState=function(t,e,n,r){return{floorStart:n,floorEnd:r,floorSprite:t,floorHeight:e}},e.createStaticFloor=function(t,e){return new s.Entity(t,e,(0,i.FloorRenderComponent)())},e.createStaticWallState=c,e.createStaticWall=function(t,e){return new s.Entity(t,e,(0,a.WallRenderComponent)(),new r.BoundaryComponent)},e.createStaticSpriteState=function(t,e,n,r,i){return{yOffset:0,position:e,height:n,radius:0,angle:0,sprite:t,spriteWidth:r,spriteHeight:i}},e.createStaticSprite=function(t,e){return new s.Entity(t,e,(0,o.SpriteRenderComponent)())};e.createBlock=(t,e,n,r)=>{const i={x:e,y:n},o={x:e+1,y:n},a={x:e+1,y:n+1},s={x:e,y:n+1};return[u.EntityFactory.SCENERY_WALL(t,c(r,i,o)),u.EntityFactory.SCENERY_WALL(t,c(r,o,a)),u.EntityFactory.SCENERY_WALL(t,c(r,a,s)),u.EntityFactory.SCENERY_WALL(t,c(r,s,i))]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncMarkdown=void 0;const r=n(0),i=n(277),o=n(361);e.AsyncMarkdown=t=>{const[e,n]=r.useState("Loading");return r.useEffect(()=>{fetch(t.url).then(t=>t.text()).then(t=>{n(t)}).catch(t=>n(""+t))},[t.url]),r.createElement(i,Object.assign({},t,{source:e,renderers:(0,o.AsyncMarkdownRenderers)(),transformImageUri:t=>"doc/deepdive/"+t}))}},function(t,e,n){"use strict";var r=n(298),i=n(299),o=n(54),a=n(300),s=n(301),u=n(302);t.exports=function(t,e){var n,o,a={};e||(e={});for(o in h)n=e[o],a[o]=null==n?h[o]:n;(a.position.indent||a.position.start)&&(a.indent=a.position.indent||[],a.position=a.position.start);return function(t,e){var n,o,a,h,b,E,S,w,_,T,x,A,I,P,M,O,C,R,D,k=e.additional,L=e.nonTerminated,N=e.text,j=e.reference,F=e.warning,U=e.textContext,B=e.referenceContext,H=e.warningContext,G=e.position,z=e.indent||[],W=t.length,V=0,Y=-1,q=G.column||1,$=G.line||1,K="",Q=[];"string"==typeof k&&(k=k.charCodeAt(0));O=Z(),w=F?function(t,e){var n=Z();n.column+=e,n.offset+=e,F.call(H,v[t],n,t)}:f,V--,W++;for(;++V<W;)if(10===b&&(q=z[Y]||1),38===(b=t.charCodeAt(V))){if(9===(S=t.charCodeAt(V+1))||10===S||12===S||32===S||38===S||60===S||S!=S||k&&S===k){K+=l(b),q++;continue}for(A=I=V+1,D=I,35===S?(D=++A,88===(S=t.charCodeAt(D))||120===S?(P=p,D=++A):P="decimal"):P=d,n="",x="",h="",M=g[P],D--;++D<W&&(S=t.charCodeAt(D),M(S));)h+=l(S),P===d&&c.call(r,h)&&(n=h,x=r[h]);(a=59===t.charCodeAt(D))&&(D++,(o=P===d&&u(h))&&(n=h,x=o)),R=1+D-I,(a||L)&&(h?P===d?(a&&!x?w(5,1):(n!==h&&(D=A+n.length,R=1+D-A,a=!1),a||(_=n?1:3,e.attribute?61===(S=t.charCodeAt(D))?(w(_,R),x=null):s(S)?x=null:w(_,R):w(_,R))),E=x):(a||w(2,R),E=parseInt(h,m[P]),(X=E)>=55296&&X<=57343||X>1114111?(w(7,R),E=l(65533)):E in i?(w(6,R),E=i[E]):(T="",y(E)&&w(6,R),E>65535&&(T+=l((E-=65536)>>>10|55296),E=56320|1023&E),E=T+l(E))):P!==d&&w(4,R)),E?(J(),O=Z(),V=D-1,q+=D-I+1,Q.push(E),(C=Z()).offset++,j&&j.call(B,E,{start:O,end:C},t.slice(I-1,D)),O=C):(h=t.slice(I-1,D),K+=h,q+=h.length,V=D-1)}else 10===b&&($++,Y++,q=0),b==b?(K+=l(b),q++):J();var X;return Q.join("");function Z(){return{line:$,column:q,offset:V+(G.offset||0)}}function J(){K&&(Q.push(K),N&&N.call(U,K,{start:O,end:Z()}),K="")}}(t,a)};var c={}.hasOwnProperty,l=String.fromCharCode,f=Function.prototype,h={warning:null,reference:null,text:null,warningContext:null,referenceContext:null,textContext:null,position:{},additional:null,attribute:!1,nonTerminated:!0},d="named",p="hexadecimal",m={hexadecimal:16,decimal:10},g={};g[d]=s,g.decimal=o,g[p]=a;var v={};function y(t){return t>=1&&t<=8||11===t||t>=13&&t<=31||t>=127&&t<=159||t>=64976&&t<=65007||65535==(65535&t)||65534==(65535&t)}v[1]="Named character references must be terminated by a semicolon",v[2]="Numeric character references must be terminated by a semicolon",v[3]="Named character references cannot be empty",v[4]="Numeric character references cannot be empty",v[5]="Named character references must be known",v[6]="Numeric character references cannot be disallowed",v[7]="Numeric character references cannot be outside the permissible Unicode range"},function(t,e,n){"use strict";
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var r,i="";t.exports=function(t,e){if("string"!=typeof t)throw new TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var n=t.length*e;if(r!==t||void 0===r)r=t,i="";else if(i.length>=n)return i.substr(0,n);for(;n>i.length&&e>1;)1&e&&(i+=t),e>>=1,t+=t;return i=(i+=t).substr(0,n)}},function(t,e,n){"use strict";t.exports=function(t){return String(t).replace(/\n+$/,"")}},function(t,e,n){"use strict";t.exports=function(t,e,n,r){var i,o,a,s,u,c,l=["pedantic","commonmark"],f=l.length,h=t.length,d=-1;for(;++d<h;){for(i=t[d],o=i[1]||{},a=i[0],s=-1,c=!1;++s<f;)if(void 0!==o[u=l[s]]&&o[u]!==n.options[u]){c=!0;break}if(!c&&e[a].apply(n,r))return!0}return!1}},function(t,e,n){"use strict";var r=n(322);t.exports=function(t){return r(t).toLowerCase()}},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=a(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(147),e),i(n(148),e),i(n(149),e)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultManifest=e.SpriteSheets=void 0;const r=n(150),i=n(93),o=n(4),a=n(56);var s;!function(t){t.SPRITE="SPRITE"}(s=e.SpriteSheets||(e.SpriteSheets={}));const u=new i.ResourceManifestBuilder;u.Spritesheet(s.SPRITE,"img/out"),u.Map(a.Maps.PRISON,r.MapPrison),u.Builder(o.audios),e.defaultManifest=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteSheetManifestBuilder=e.ResourceManifestBuilder=void 0;e.ResourceManifestBuilder=class{constructor(){this.spritesheets={},this.audio={},this.maps={}}Spritesheet(t,e){this.spritesheets[t]=e}Audio(t,e,n){this.audio[t]={url:e,metadata:n}}Map(t,e){this.maps[t]=e}Builder(t){this.spritesheets=Object.assign(Object.assign({},this.spritesheets),t.spritesheets),this.audio=Object.assign(Object.assign({},this.audio),t.audio),this.maps=Object.assign(Object.assign({},this.maps),t.maps)}};e.SpriteSheetManifestBuilder=class{constructor(t){this.url="",this.sprites={},this.animations={},this.url=t}Sprite(t,e,n,r,i){this.sprites[t]={x:e,y:n,width:r,height:i}}Animation(t,e,n,r,i,o,a=!1){this.animations[t]={x:e,y:n,width:r,height:i,frames:o,vertical:a}}}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionEventSubscriber=void 0;var i=function(){function t(t){this.emptyActions=t,this.listeners=[]}return t.prototype.actions=function(){return this.compiledActions||this.emptyActions},t.prototype.subscribe=function(t){this.listeners.push(t),this.compileEvents()},t.prototype.unsubscribe=function(t){var e=this.listeners.indexOf(t);e<0||(this.listeners.splice(e,1),this.compileEvents())},t.prototype.compileEvents=function(){var t={};this.listeners.forEach((function(e){Object.keys(e).forEach((function(n){var r=e[n];t[n]?t[n].push(r):t[n]=[r]}))}));var e={};Object.keys(t).forEach((function(n){e[n]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t[n].forEach((function(t){return t.apply(void 0,e)}))}})),this.compiledActions=r(r({},this.emptyActions),e)},t}();e.FunctionEventSubscriber=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameButtonContainer=void 0;const r=n(0),i=n(27),o=n(39),a=n(15),s=n(4);e.GameButtonContainer=t=>{const[e,n]=r.useState(!1),[u,c]=r.useState(!1),l=(0,a.useServiceLocator)(),{width:f,height:h}=t,d=u?i.Colours.SELECT_WHITE:e?i.Colours.HOVER_GREY:i.Colours.DESELCT_GREY;return r.createElement("div",{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onMouseDown:()=>c(!0),onMouseUp:()=>{c(!1),t.onSelect(),l.getAudioService().play(l.getResourceManager().manifest.audio[s.Audios.BUTTON_PRESS],.4)},style:Object.assign({width:f,height:h,backgroundColor:d,borderRadius:o.Spacing.RADIUS_SMALL,cursor:"pointer"},t.childStyle)},t.children)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.gameContext=e.game=void 0;const r=n(0),i=n(179);e.game=new i.Game,e.gameContext=r.createContext(e.game)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.vec=void 0;function r(t,e){return{x:t.x+e.x,y:t.y+e.y}}e.vec={vec_normalize:function(t){const e=Math.sqrt(t.x*t.x+t.y*t.y);return 0===e?{x:0,y:0}:{x:t.x/e,y:t.y/e}},vec_interpolate:function(t,e){const n={x:0,y:0};return t.forEach((t,r)=>{n.x+=t.x*e[r],n.y+=t.y*e[r]}),n},vec_sum_immutable:function(t){let e={x:0,y:0};return t.forEach(t=>{e=r(e,t)}),e},vec_sum:function(t){const e={x:0,y:0};return t.forEach(t=>{var n,r;(n=e).x+=(r=t).x,n.y+=r.y}),e},vec_scale:function(t,e){return{x:t.x*e,y:t.y*e}},vec_distance:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},vec_rotate:function(t,e){const n=~~(100*Math.cos(e))/100,r=~~(100*Math.sin(e))/100;return{x:t.x*n-t.y*r,y:t.y*n+t.x*r}},vec_mult_scalar:function(t,e){return{x:t.x*e,y:t.y*e}},vec_divide:function(t,e){return{x:t.x/e.x,y:t.y/e.y}},vec_sub:function(t,e){return{x:t.x-e.x,y:t.y-e.y}},vec_cross:function(t,e){return t.x*e.y-t.y*e.x},vec_add:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Attack=e.Interact=e.Turn=e.Walk=e.TurnDirection=e.WalkDirection=void 0;const r=n(59);!function(t){t.FORWARD="FORWARD",t.BACK="BACK",t.LEFT="LEFT",t.RIGHT="RIGHT"}(e.WalkDirection||(e.WalkDirection={})),function(t){t.CLOCKWISE="CLOCKWISE",t.ANTICLOCKWISE="ANTICLOCKWISE"}(e.TurnDirection||(e.TurnDirection={}));e.Walk=t=>e=>{t.getScriptingService().getPlayer().walk(e),t.getTutorialService().onEvent(r.TutorialServiceEvent.WALK)};e.Turn=t=>e=>{t.getScriptingService().getPlayer().turn(e),t.getTutorialService().onEvent(r.TutorialServiceEvent.TURN)};e.Interact=t=>()=>t.getScriptingService().getPlayer().interact();e.Attack=t=>{t.getScriptingService().getPlayer().attack(),t.getTutorialService().onEvent(r.TutorialServiceEvent.ATTACKED)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Player=void 0;const r=n(1),i=n(16),o=n(43),a=n(23),s=n(194),u=n(197),c=n(3),l=n(4);e.Player=class{constructor(t,e,n){this.serviceLocator=t,this.state=Object.assign(Object.assign(Object.assign({},{inventory:(0,a.getEmptyInventory)(),surface:{position:{x:39,y:29},height:0,angle:0,yOffset:0,radius:r.DEFAULT_PLAYER_RADIUS,heightVelocity:0,velocity:{x:0,y:0},friction:.8,mass:1,elastic:0,collidesEntities:!0,collidesWalls:!0},health:{current:10,max:10},bonuses:{moveSpeed:!1,accuracy:!1,ancientPowerCount:0,ancientPower:!1,attackSpeed:!1,protection:!1},beatenGame:!1}),{beatenGame:e}),n),this.interactDelay=new o.ActionDelay(300),this.movement=new s.PlayerMovement(this.serviceLocator,()=>this.state.surface,t=>this.state.surface.velocity=t,t=>this.state.surface.angle=t,()=>this.state.bonuses),this.equipment=new u.PlayerEquipment(this.serviceLocator,()=>this,()=>{const{x:t,y:e}=this.state.surface.position;return[t,this.state.surface.height,e]},()=>this.state.surface.angle,()=>this.state.bonuses),this.physicsRegistration={collidesEntities:!0,collidesWalls:!0,setHeight:t=>this.state.surface.height=t,setHeightVelocity:t=>this.state.surface.heightVelocity=t,setVelocity:(t,e)=>this.state.surface.velocity={x:t,y:e},setPosition:(t,e)=>{this.state.surface.position={x:t,y:e}},getPhysicsInformation:()=>this.state.surface},this.serviceLocator.getPhysicsService().registerPhysicsEntity(this.physicsRegistration)}init(){this.equipment.init(),this.serviceLocator.getStore().getActions().onPlayerHealth(this.state.health)}update(){this.movement.update(),this.equipment.update()}getCamera(){const{position:t,height:e,angle:n}=this.state.surface;return{position:t,angle:n,height:e+this.movement.getHeadbobOffset()+r.DEFAULT_PLAYER_HEIGHT,fov:r.FOV,aspectRatio:r.ASPECT_RATIO,zNear:r.ZNEAR,zFar:r.ZFAR}}getPositon(){return this.state.surface.position}setPosition(t,e){this.state.surface.position={x:t,y:e}}setAngle(t){this.state.surface.angle=t}getAngle(){return this.state.surface.angle}getInventory(){return this.state.inventory}interact(){if(!this.interactDelay.canAction())return;this.interactDelay.onAction();const t=this.state.surface;this.serviceLocator.getInteractionService().getInteractables(i.InteractionType.INTERACT,t.position,t.angle,1.5).forEach(t=>{t.onInteract&&t.onInteract({type:i.InteractionSourceType.PLAYER,player:this})})}onDamage(t,e){this.serviceLocator.getAudioService().play(this.serviceLocator.getResourceManager().manifest.audio[(0,c.randomSelection)([l.Audios.DAMAGE_0])]);const n=this.state.bonuses.protection?t/2:t;this.state.health.current-=n,this.state.health.current<=0&&(this.state.health.current=0,this.onDeath()),this.serviceLocator.getStore().getActions().onPlayerHealth(this.state.health),this.serviceLocator.getStore().getActions().onPlayerDamaged(),this.serviceLocator.getRenderService().screenShakeService.shake(n);const r=c.vec.vec_sub(this.getPositon(),e);if(r.x>0||r.y>0){const t=c.vec.vec_normalize(r),e=.1;this.state.surface.velocity.x+=t.x*e,this.state.surface.velocity.y+=t.y*e}}setHealthBonus(t){const e=t-this.state.health.max;this.state.health.current+=e,this.state.health.max=t,this.state.health.current<=0&&(this.state.health.current=1)}getMutableState(){return this.state}getHealthBonus(){return this.state.health.max}onHealed(t){this.state.health.current=Math.min(this.state.health.current+t,this.state.health.max),this.serviceLocator.getStore().getActions().onPlayerHealth(this.state.health)}onDeath(){this.serviceLocator.getScriptingService().stopGame()}attack(){this.equipment.attack()}walk(t){this.movement.walk(t)}turn(t){this.movement.turn(t)}serialise(){return this.state}destroy(){this.serviceLocator.getPhysicsService().unregisterPhysicsEntity(this.physicsRegistration),this.equipment.destroy()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IntervalDriver=void 0;const r=n(10),i=n(101);e.IntervalDriver=class{constructor(t){this.gameTime=t}drive(t){return this.maybeStopTimer(),this.intervalId=this.gameTime?r.ProcedureService.setGameInterval(t,i.ANIMATION_RESOLUTION):r.ProcedureService.setInterval(t,i.ANIMATION_RESOLUTION),this}undrive(){this.maybeStopTimer()}maybeStopTimer(){this.intervalId&&r.ProcedureService.clearInterval(this.intervalId),this.intervalId=void 0}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameAnimation=e.ANIMATION_RESOLUTION=void 0;const r=n(1),i=n(100);e.ANIMATION_RESOLUTION=Math.floor(1e3/r.TARGET_FPS);e.GameAnimation=class{constructor(t){return this.callback=t,this.speedMilliseconds=1e3,this.loop=!1,this.currentPosition=0,this.playCount=0,this.playing=!1,this.tweenFunction=t=>t,this}driven(t){return this.driver=new i.IntervalDriver(t),this}speed(t){return this.speedMilliseconds=t||1e3,this}tween(t){const e=this.tweenFunction;return this.tweenFunction=n=>t(e(n)),this}looping(){return this.loop=!0,this}whenDone(t){return this.onFinish=t,this}withOffset(t){return this.currentPosition=t,this}start(){return this.playing=!0,this.driver&&this.driver.drive(()=>this.tick()),this}pause(){this.playing=!1,this.driver&&this.driver.undrive()}stop(){this.playing=!1,this.currentPosition=0,this.driver&&this.driver.undrive()}tick(){if(this.playing)if(this.currentPosition>=1)this.callback(this.tweenFunction(1)),this.loop?this.currentPosition=0:this.stop(),this.playCount++,this.onFinish&&this.onFinish();else{this.callback(this.tweenFunction(this.currentPosition));const t=e.ANIMATION_RESOLUTION/this.speedMilliseconds;this.currentPosition+=t}}getCurrentPosition(){return this.currentPosition}getPlayCount(){return this.playCount}isPlaying(){return this.isPlaying}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.playSound=e.loadSound=e.AudioService=void 0;function r(t,e,n,r,i=(()=>{})){if(t.timeSinceLastPlayed=Date.now(),n<0)return;const o=new StereoPannerNode(e,{pan:r}),a=e.createGain();a.gain.setValueAtTime(n,e.currentTime);const s=e.createBufferSource();return s.buffer=t.buffer,s.connect(o).connect(a).connect(e.destination),s.start(0),s.addEventListener("ended",i),s}e.AudioService=class{constructor(t){this.context=t,this.currentSong=void 0,this.isPaused=!1,window.AudioContext=window.AudioContext}attachCamera(t){this.camera=t}play(t,e=1,n=0,i=(()=>{})){if(this.canPlay(t))return r(t,this.context,e,n,i)}playSong(t,e=1,n=!0){if(this.fadeOutInterval&&clearInterval(this.fadeOutInterval),this.fadeInInterval&&clearInterval(this.fadeInInterval),this.currentSong&&n){const t=this.currentSong;let e=t.gainNode.gain.value;this.fadeOutInterval=setInterval(()=>{e-=.02,e<=0&&(e=0,clearInterval(this.fadeOutInterval),t.source.stop()),t.gainNode.gain.setValueAtTime(e,this.context.currentTime)},60)}else this.currentSong&&this.currentSong.source.stop();const r=this.context.createGain();r.gain.setValueAtTime(0,this.context.currentTime);let i=0;this.isPaused||(this.fadeInInterval=setInterval(()=>{i+=.02,i>=1&&(i=1,clearInterval(this.fadeInInterval)),r.gain.setValueAtTime(i*e,this.context.currentTime)},60));const o=this.context.createBufferSource();return o.buffer=t.buffer,o.connect(r).connect(this.context.destination),o.start(0),this.currentSong={source:o,gainNode:r},this.currentSong.source.loop=!0,this.currentSong}play3D(t,e,n=1){if(!this.camera||!this.canPlay(t))return;const{position:i,angle:o}=this.camera(),a=e[0]-i.x,s=e[1]-i.y,u=Math.sqrt(a*a+s*s),c=Math.min(n/(1*u),1),l=Math.sin(Math.atan2(a,-s)-o);return r(t,this.context,c,l)}getContext(){return this.context}canPlay(t){if(void 0===t.timeSinceLastPlayed)return!0;return Date.now()-t.timeSinceLastPlayed>=100}stopSong(){this.currentSong&&this.currentSong.source.stop()}isPlayingSong(){return this.currentSong}pauseSong(){this.isPaused=!0,this.currentSong&&(this.currentSong.gainNode.gain.setValueAtTime(0,this.context.currentTime),this.fadeInInterval&&clearInterval(this.fadeInInterval))}resumeSong(){this.isPaused=!1,this.currentSong&&this.currentSong.gainNode.gain.setValueAtTime(1,this.context.currentTime)}},e.loadSound=function(t,e,n){return new Promise(r=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){e.decodeAudioData(i.response,t=>{r({buffer:t,metadata:n})},t=>console.log(t))},i.send()})},e.playSound=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tiledXMLtoGameTiledMap=e.GameTiledObjectType=void 0;const r=n(104);var i;!function(t){t.Ellipse="Ellipse",t.Polygon="Polygon",t.Rectangle="Rectangle",t.Point="Point"}(i=e.GameTiledObjectType||(e.GameTiledObjectType={})),e.tiledXMLtoGameTiledMap=function(t){const{map:e}=t,{$:n,objectgroup:o}=e,{width:a,height:s,tilewidth:u,tileheight:c}=n,l=Number.parseFloat(u),f=Number.parseFloat(c),h=[];return o.forEach(t=>t.object&&t.object.forEach(t=>{!function(t){const{object:e,destination:n,tileWidth:o,tileHeight:a}=t,s=e.$.type,u=s&&r.defaultTiledObjectProperties[s]?Object.assign({},r.defaultTiledObjectProperties[s]):{};e.properties&&e.properties.forEach(t=>{t.property.forEach(t=>{u[t.$.name]=t.$.value})});const c={id:Number.parseFloat(e.$.id),type:s,x:Number.parseFloat(e.$.x)/o,y:Number.parseFloat(e.$.y)/a,properties:u},l=e.polyline||e.polygon;l&&n.push({data:c,type:i.Polygon,points:l[0].$.points.split(" ").map(t=>{const e=t.split(",");return{x:Number.parseFloat(e[0])/o+c.x,y:Number.parseFloat(e[1])/a+c.y}}),closed:!!e.polygon});e.$.width&&e.$.height?e.ellipse?n.push({data:c,type:i.Ellipse,width:Number.parseFloat(e.$.width)/o,height:Number.parseFloat(e.$.height)/a}):n.push({data:c,type:i.Rectangle,width:Number.parseFloat(e.$.width)/o,height:Number.parseFloat(e.$.height)/a}):l||n.push({data:c,type:i.Point})}({object:t,destination:h,tileWidth:l,tileHeight:f})})),{width:Number.parseFloat(a),height:Number.parseFloat(s),objects:h}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTiledObjectProperties=e.TiledObjectType=void 0;const r=n(61),i=n(56);var o;!function(t){t.Wall="Wall",t.Door="Door",t.SpawnPoint="SpawnPoint",t.Floor="Floor",t.GameItem="GameItem",t.Portal="Portal",t.StaticSprite="StaticSprite",t.NPC="NPC",t.Script="Script"}(o=e.TiledObjectType||(e.TiledObjectType={})),e.defaultTiledObjectProperties={[o.Wall]:{sprite:"wall",height:"1",offset:"0",collides:"true"},[o.Door]:{sprite:"cell"},[o.SpawnPoint]:{angle:"0",name:"BIRTH"},[o.Floor]:{sprite:"floor",height:"0"},[o.GameItem]:{item:r.GameItem.GOLD_KEY},[o.Portal]:{map:i.Maps.PRISON,spawn:"BIRTH"},[o.StaticSprite]:{sprite:"skull",height:"0.5"},[o.NPC]:{npcTypeId:"jailor"},[o.Script]:{}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.loadImageData=e.getImageData=e.loadSpriteSheet=e.loadTextureFromURL=e.loadTextureFromImage=e.loadJson=e.loadImage=void 0;const i=n(204);function o(t){return new Promise(e=>{const n=new Image;n.onload=function(){e(n)},n.onerror=e=>{console.log("Error loading image "+t,e)},n.src=t})}function a(t){return fetch(t).then(t=>t.json())}function s(t,e){const n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),n}e.loadImage=o,e.loadJson=a,e.loadTextureFromImage=s,e.loadTextureFromURL=function(t,e){return o(e).then(e=>s(t,e))},e.loadSpriteSheet=function(t,e){return r(this,void 0,void 0,(function*(){const n=e+".png",r=e+".json",u=yield o(n),c=yield a(r),l=s(t,u);return[new i.SpriteSheet(u.width,u.height,l,u),c]}))},e.getImageData=function(t){const e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height),e.getContext("2d").getImageData(0,0,t.width,t.height)},e.loadImageData=function(t){return r(this,void 0,void 0,(function*(){const e=yield o(t),n=document.createElement("canvas");n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(e,0,0,e.width,e.height);return n.getContext("2d").getImageData(0,0,e.width,e.height)}))}},function(t,e){(function(){t.exports=function(){function t(){}return t.prototype.hasFeature=function(t,e){return!0},t.prototype.createDocumentType=function(t,e,n){throw new Error("This DOM method is not implemented.")},t.prototype.createDocument=function(t,e,n){throw new Error("This DOM method is not implemented.")},t.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},t.prototype.getFeature=function(t,e){throw new Error("This DOM method is not implemented.")},t}()}).call(this)},function(t,e,n){(function(){var e,r,i,o,a,s,u,c={}.hasOwnProperty;u=n(13).isPlainObject,i=n(106),r=n(208),o=n(8),e=n(2),s=n(110),a=n(76),t.exports=function(t){function n(t){n.__super__.constructor.call(this,null),this.name="#document",this.type=e.Document,this.documentURI=null,this.domConfig=new r,t||(t={}),t.writer||(t.writer=new a),this.options=t,this.stringify=new s(t)}return function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),Object.defineProperty(n.prototype,"implementation",{value:new i}),Object.defineProperty(n.prototype,"doctype",{get:function(){var t,n,r,i;for(n=0,r=(i=this.children).length;n<r;n++)if((t=i[n]).type===e.DocType)return t;return null}}),Object.defineProperty(n.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(n.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(n.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration?this.children[0].encoding:null}}),Object.defineProperty(n.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(n.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(n.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(n.prototype,"origin",{get:function(){return null}}),Object.defineProperty(n.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(n.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(n.prototype,"contentType",{get:function(){return null}}),n.prototype.end=function(t){var e;return e={},t?u(t)&&(e=t,t=this.options.writer):t=this.options.writer,t.document(this,t.filterOptions(e))},n.prototype.toString=function(t){return this.options.writer.document(this,this.options.writer.filterOptions(t))},n.prototype.createElement=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createTextNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createComment=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createCDATASection=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createProcessingInstruction=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createAttribute=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createEntityReference=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.importNode=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createElementNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementById=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.adoptNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.renameNode=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByClassName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createEvent=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createNodeIterator=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createTreeWalker=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(o)}).call(this)},function(t,e,n){(function(){var e;e=n(2),n(8),t.exports=function(){function t(t,n,r){if(this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==n)throw new Error("Missing attribute name. "+this.debugInfo(n));this.name=this.stringify.name(n),this.value=this.stringify.attValue(r),this.type=e.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(t){return this.options.writer.attribute(this,this.options.writer.filterOptions(t))},t.prototype.debugInfo=function(t){return null==(t=t||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+t+"}, parent: <"+this.parent.name+">"},t.prototype.isEqualNode=function(t){return t.namespaceURI===this.namespaceURI&&(t.prefix===this.prefix&&(t.localName===this.localName&&t.value===this.value))},t}()}).call(this)},function(t,e,n){(function(){var e,r,i={}.hasOwnProperty;r=n(8),e=n(2),t.exports=function(t){function n(t){n.__super__.constructor.call(this,t),this.type=e.Dummy}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return""},n}(r)}).call(this)},function(t,e){(function(){var e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;t.exports=function(){function t(t){var r,i,o;for(r in this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this),t||(t={}),this.options=t,this.options.version||(this.options.version="1.0"),i=t.stringify||{})n.call(i,r)&&(o=i[r],this[r]=o)}return t.prototype.name=function(t){return this.options.noValidation?t:this.assertLegalName(""+t||"")},t.prototype.text=function(t){return this.options.noValidation?t:this.assertLegalChar(this.textEscape(""+t||""))},t.prototype.cdata=function(t){return this.options.noValidation?t:(t=(t=""+t||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(t))},t.prototype.comment=function(t){if(this.options.noValidation)return t;if((t=""+t||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)},t.prototype.raw=function(t){return this.options.noValidation?t:""+t||""},t.prototype.attValue=function(t){return this.options.noValidation?t:this.assertLegalChar(this.attEscape(t=""+t||""))},t.prototype.insTarget=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.insValue=function(t){if(this.options.noValidation)return t;if((t=""+t||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return this.assertLegalChar(t)},t.prototype.xmlVersion=function(t){if(this.options.noValidation)return t;if(!(t=""+t||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t},t.prototype.xmlEncoding=function(t){if(this.options.noValidation)return t;if(!(t=""+t||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+t);return this.assertLegalChar(t)},t.prototype.xmlStandalone=function(t){return this.options.noValidation?t:t?"yes":"no"},t.prototype.dtdPubID=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdSysID=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdElementValue=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdAttType=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdAttDefault=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdEntityValue=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdNData=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(t){var e,n;if(this.options.noValidation)return t;if(e="","1.0"===this.options.version){if(e=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=t.match(e))throw new Error("Invalid character in string: "+t+" at index "+n.index)}else if("1.1"===this.options.version&&(e=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=t.match(e)))throw new Error("Invalid character in string: "+t+" at index "+n.index);return t},t.prototype.assertLegalName=function(t){var e;if(this.options.noValidation)return t;if(this.assertLegalChar(t),e=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!t.match(e))throw new Error("Invalid character in name");return t},t.prototype.textEscape=function(t){var e;return this.options.noValidation?t:(e=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},t.prototype.attEscape=function(t){var e;return this.options.noValidation?t:(e=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},t}()}).call(this)},function(t,e,n){(function(){var e,r,i,o={}.hasOwnProperty;i=n(13).assign,e=n(2),n(67),n(68),n(65),n(66),n(63),n(73),n(74),n(75),n(109),n(69),n(71),n(70),n(72),r=n(45),t.exports=function(){function t(t){var e,n,r;for(e in t||(t={}),this.options=t,n=t.writer||{})o.call(n,e)&&(r=n[e],this["_"+e]=this[e],this[e]=r)}return t.prototype.filterOptions=function(t){var e,n,o,a,s,u,c,l;return t||(t={}),t=i({},this.options,t),(e={writer:this}).pretty=t.pretty||!1,e.allowEmpty=t.allowEmpty||!1,e.indent=null!=(n=t.indent)?n:"  ",e.newline=null!=(o=t.newline)?o:"\n",e.offset=null!=(a=t.offset)?a:0,e.dontPrettyTextNodes=null!=(s=null!=(u=t.dontPrettyTextNodes)?u:t.dontprettytextnodes)?s:0,e.spaceBeforeSlash=null!=(c=null!=(l=t.spaceBeforeSlash)?l:t.spacebeforeslash)?c:"",!0===e.spaceBeforeSlash&&(e.spaceBeforeSlash=" "),e.suppressPrettyCount=0,e.user={},e.state=r.None,e},t.prototype.indent=function(t,e,n){var r;return!e.pretty||e.suppressPrettyCount?"":e.pretty&&(r=(n||0)+e.offset+1)>0?new Array(r).join(e.indent):""},t.prototype.endline=function(t,e,n){return!e.pretty||e.suppressPrettyCount?"":e.newline},t.prototype.attribute=function(t,e,n){var r;return this.openAttribute(t,e,n),r=" "+t.name+'="'+t.value+'"',this.closeAttribute(t,e,n),r},t.prototype.cdata=function(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"<![CDATA[",e.state=r.InsideTag,i+=t.value,e.state=r.CloseTag,i+="]]>"+this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i},t.prototype.comment=function(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"\x3c!-- ",e.state=r.InsideTag,i+=t.value,e.state=r.CloseTag,i+=" --\x3e"+this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i},t.prototype.declaration=function(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"<?xml",e.state=r.InsideTag,i+=' version="'+t.version+'"',null!=t.encoding&&(i+=' encoding="'+t.encoding+'"'),null!=t.standalone&&(i+=' standalone="'+t.standalone+'"'),e.state=r.CloseTag,i+=e.spaceBeforeSlash+"?>",i+=this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i},t.prototype.docType=function(t,e,n){var i,o,a,s,u;if(n||(n=0),this.openNode(t,e,n),e.state=r.OpenTag,s=this.indent(t,e,n),s+="<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?s+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(s+=' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(s+=" [",s+=this.endline(t,e,n),e.state=r.InsideTag,o=0,a=(u=t.children).length;o<a;o++)i=u[o],s+=this.writeChildNode(i,e,n+1);e.state=r.CloseTag,s+="]"}return e.state=r.CloseTag,s+=e.spaceBeforeSlash+">",s+=this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),s},t.prototype.element=function(t,n,i){var a,s,u,c,l,f,h,d,p,m,g,v,y,b;for(p in i||(i=0),m=!1,g="",this.openNode(t,n,i),n.state=r.OpenTag,g+=this.indent(t,n,i)+"<"+t.name,v=t.attribs)o.call(v,p)&&(a=v[p],g+=this.attribute(a,n,i));if(c=0===(u=t.children.length)?null:t.children[0],0===u||t.children.every((function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value})))n.allowEmpty?(g+=">",n.state=r.CloseTag,g+="</"+t.name+">"+this.endline(t,n,i)):(n.state=r.CloseTag,g+=n.spaceBeforeSlash+"/>"+this.endline(t,n,i));else if(!n.pretty||1!==u||c.type!==e.Text&&c.type!==e.Raw||null==c.value){if(n.dontPrettyTextNodes)for(l=0,h=(y=t.children).length;l<h;l++)if(((s=y[l]).type===e.Text||s.type===e.Raw)&&null!=s.value){n.suppressPrettyCount++,m=!0;break}for(g+=">"+this.endline(t,n,i),n.state=r.InsideTag,f=0,d=(b=t.children).length;f<d;f++)s=b[f],g+=this.writeChildNode(s,n,i+1);n.state=r.CloseTag,g+=this.indent(t,n,i)+"</"+t.name+">",m&&n.suppressPrettyCount--,g+=this.endline(t,n,i),n.state=r.None}else g+=">",n.state=r.InsideTag,n.suppressPrettyCount++,m=!0,g+=this.writeChildNode(c,n,i+1),n.suppressPrettyCount--,m=!1,n.state=r.CloseTag,g+="</"+t.name+">"+this.endline(t,n,i);return this.closeNode(t,n,i),g},t.prototype.writeChildNode=function(t,n,r){switch(t.type){case e.CData:return this.cdata(t,n,r);case e.Comment:return this.comment(t,n,r);case e.Element:return this.element(t,n,r);case e.Raw:return this.raw(t,n,r);case e.Text:return this.text(t,n,r);case e.ProcessingInstruction:return this.processingInstruction(t,n,r);case e.Dummy:return"";case e.Declaration:return this.declaration(t,n,r);case e.DocType:return this.docType(t,n,r);case e.AttributeDeclaration:return this.dtdAttList(t,n,r);case e.ElementDeclaration:return this.dtdElement(t,n,r);case e.EntityDeclaration:return this.dtdEntity(t,n,r);case e.NotationDeclaration:return this.dtdNotation(t,n,r);default:throw new Error("Unknown XML node type: "+t.constructor.name)}},t.prototype.processingInstruction=function(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"<?",e.state=r.InsideTag,i+=t.target,t.value&&(i+=" "+t.value),e.state=r.CloseTag,i+=e.spaceBeforeSlash+"?>",i+=this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i},t.prototype.raw=function(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n),e.state=r.InsideTag,i+=t.value,e.state=r.CloseTag,i+=this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i},t.prototype.text=function(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n),e.state=r.InsideTag,i+=t.value,e.state=r.CloseTag,i+=this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i},t.prototype.dtdAttList=function(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"<!ATTLIST",e.state=r.InsideTag,i+=" "+t.elementName+" "+t.attributeName+" "+t.attributeType,"#DEFAULT"!==t.defaultValueType&&(i+=" "+t.defaultValueType),t.defaultValue&&(i+=' "'+t.defaultValue+'"'),e.state=r.CloseTag,i+=e.spaceBeforeSlash+">"+this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i},t.prototype.dtdElement=function(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"<!ELEMENT",e.state=r.InsideTag,i+=" "+t.name+" "+t.value,e.state=r.CloseTag,i+=e.spaceBeforeSlash+">"+this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i},t.prototype.dtdEntity=function(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"<!ENTITY",e.state=r.InsideTag,t.pe&&(i+=" %"),i+=" "+t.name,t.value?i+=' "'+t.value+'"':(t.pubID&&t.sysID?i+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(i+=' SYSTEM "'+t.sysID+'"'),t.nData&&(i+=" NDATA "+t.nData)),e.state=r.CloseTag,i+=e.spaceBeforeSlash+">"+this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i},t.prototype.dtdNotation=function(t,e,n){var i;return this.openNode(t,e,n),e.state=r.OpenTag,i=this.indent(t,e,n)+"<!NOTATION",e.state=r.InsideTag,i+=" "+t.name,t.pubID&&t.sysID?i+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?i+=' PUBLIC "'+t.pubID+'"':t.sysID&&(i+=' SYSTEM "'+t.sysID+'"'),e.state=r.CloseTag,i+=e.spaceBeforeSlash+">"+this.endline(t,e,n),e.state=r.None,this.closeNode(t,e,n),i},t.prototype.openNode=function(t,e,n){},t.prototype.closeNode=function(t,e,n){},t.prototype.openAttribute=function(t,e,n){},t.prototype.closeAttribute=function(t,e,n){},t}()}).call(this)},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";(function(e,r){var i=n(47);t.exports=b;var o,a=n(112);b.ReadableState=y;n(46).EventEmitter;var s=function(t,e){return t.listeners(e).length},u=n(114),c=n(48).Buffer,l=e.Uint8Array||function(){};var f=Object.create(n(30));f.inherits=n(17);var h=n(220),d=void 0;d=h&&h.debuglog?h.debuglog("stream"):function(){};var p,m=n(221),g=n(115);f.inherits(b,u);var v=["error","close","destroy","pause","resume"];function y(t,e){t=t||{};var r=e instanceof(o=o||n(18));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(80).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function b(t){if(o=o||n(18),!(this instanceof b))return new b(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function E(t,e,n,r,i){var o,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,_(t)}(t,a)):(i||(o=function(t,e){var n;r=e,c.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):S(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?S(t,a,e,!1):x(t,a)):S(t,a,e,!1))):r||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function S(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&_(t)),x(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),n=!0),E(this,t,e,!1,n)},b.prototype.unshift=function(t){return E(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return p||(p=n(80).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};function w(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function _(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(T,t):T(t))}function T(t){d("emit readable"),t.emit("readable"),M(t)}function x(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(A,t,e))}function A(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function I(t){d("readable nexttick read 0"),t.read(0)}function P(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),M(t),e.flowing&&!e.reading&&t.read(0)}function M(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function O(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=c.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0===(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function C(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(R,e,t))}function R(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function D(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}b.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?C(this):_(this),null;if(0===(t=w(t,e))&&e.ended)return 0===e.length&&C(this),null;var r,i=e.needReadable;return d("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",i=!0),e.ended||e.reading?d("reading or ended",i=!1):i&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=w(n,e))),null===(r=t>0?O(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&C(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?l:b;function c(e,r){d("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,d("cleanup"),t.removeListener("close",v),t.removeListener("finish",y),t.removeListener("drain",f),t.removeListener("error",g),t.removeListener("unpipe",c),n.removeListener("end",l),n.removeListener("end",b),n.removeListener("data",m),h=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||f())}function l(){d("onend"),t.end()}o.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",c);var f=function(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,M(t))}}(n);t.on("drain",f);var h=!1;var p=!1;function m(e){d("ondata"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==D(o.pipes,t))&&!h&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function g(e){d("onerror",e),b(),t.removeListener("error",g),0===s(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",y),b()}function y(){d("onfinish"),t.removeListener("close",v),b()}function b(){d("unpipe"),n.unpipe(t)}return n.on("data",m),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",g),t.once("close",v),t.once("finish",y),t.emit("pipe",n),o.flowing||(d("pipe resume"),n.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=D(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},b.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&_(this):i.nextTick(I,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(P,t,e))}(this,t)),this},b.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(d("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(d("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<v.length;o++)t.on(v[o],this.emit.bind(this,v[o]));return this._read=function(e){d("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=O}).call(this,n(11),n(24))},function(t,e,n){t.exports=n(46).EventEmitter},function(t,e,n){"use strict";var r=n(47);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(223),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(11))},function(t,e,n){"use strict";t.exports=a;var r=n(18),i=Object.create(n(30));function o(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){u(t,e,n)})):u(this,null,null)}function u(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(17),i.inherits(a,r),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},function(t,e){(function(){"use strict";var t;t=new RegExp(/(?!xmlns)^.*:/),e.normalize=function(t){return t.toLowerCase()},e.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},e.stripPrefix=function(e){return e.replace(t,"")},e.parseNumbers=function(t){return isNaN(t)||(t=t%1==0?parseInt(t,10):parseFloat(t)),t},e.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t="true"===t.toLowerCase()),t}}).call(this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLockedDoor=e.createLockedDoorState=e.createDoor=e.createDoorState=e.doorOpensWithParticles=e.playsEffect=e.emitsParticles=void 0;const r=n(4),i=n(16),o=n(234),a=n(235),s=n(6),u=n(3),c=n(28),l=n(236),f=n(42),h=n(120),d=n(49),p=n(121),m=n(81),g=n(31),v=n(32),y=n(19);var b;!function(t){t.OPEN="OPEN",t.OPENING="OPENING",t.CLOSED="CLOSED"}(b||(b={}));e.emitsParticles=t=>({getActions:e=>({onEntityCreated:()=>{e.getServiceLocator().getParticleService().addEmitter(t)},onEntityDeleted:()=>{e.getServiceLocator().getParticleService().removeEmitter(t)}})});e.playsEffect=(t,e)=>{let n;return{getActions:r=>({onEntityCreated:()=>{n=r.getServiceLocator().getAudioService().play(r.getServiceLocator().getResourceManager().manifest.audio[t],e)},onEntityDeleted:()=>{n&&n.stop()}})}};e.doorOpensWithParticles=(t,n,i)=>{const c=(t=>{const{initialStart:e,initialEnd:n}=t;return(0,o.LineEmitter)({creator:t=>{const e=.2*Math.random();return(0,a.GravityDropParticle)({life:30,r:45/255+e,g:48/255+e,b:54/255+e,start:t})},initialStart:e,initialEnd:n,initialRate:1})})({initialStart:[t.x,1,t.y],initialEnd:[n.x,1,n.y]}),l={OPENING:(0,g.JoinComponent)([(0,m.AnimationComponent)(e=>(0,s.animation)(r=>{const[i,o]=(e=>{const r=u.vec.vec_sub(t,n),i=-.9*e+.06*Math.random(),o=u.vec.vec_mult_scalar(r,i);return[u.vec.vec_sub(t,o),u.vec.vec_sub(n,o)]})(r);e.setState({wallStart:i,wallEnd:o}),c.setEnd([o.x,1,o.y])}).speed(2e3).whenDone(()=>e.setState({open:b.OPEN}))),(0,e.emitsParticles)(c.emitter),(0,e.playsEffect)(r.Audios.DOOR_OPEN,.2)])};return new v.SwitchComponent(l,i,t=>t.getState().open)};e.createDoorState=(t,e,n)=>({boundaryState:{boundary:{start:t,end:e},collides:!0},wallSprite:n,wallStart:t,wallEnd:e,position:u.vec.vec_mult_scalar(u.vec.vec_add(t,e),.5),height:0,yOffset:0,radius:.5,angle:0,open:b.CLOSED});e.createDoor=(t,n)=>{const{wallStart:r,wallEnd:o,open:a}=n;let s;const u={CLOSED:(0,g.JoinComponent)([new h.BoundaryComponent,(0,d.onInteractedWith)(i.InteractionType.INTERACT,(e,n)=>{e.setState({open:b.OPENING}),void 0!==s&&(0,f.DeregisterKeyHint)(t)(s)}),(0,d.onCanBeInteractedWithByPlayer)(i.InteractionType.INTERACT,()=>{s=(0,f.RegisterKeyHint)(t)({code:["E"],hint:"Open Door"})},()=>{void 0!==s&&(0,f.DeregisterKeyHint)(t)(s)})])};return new y.Entity(t,n,(0,p.WallRenderComponent)(),new v.SwitchComponent(u,a,t=>t.getState().open),(0,e.doorOpensWithParticles)(r,o,a))};e.createLockedDoorState=t=>{const{start:e,end:n,spriteString:r,configuration:i,keyId:o}=t;return{boundaryState:{boundary:{start:e,end:n},collides:!0},wallSprite:r,wallStart:e,wallEnd:n,position:u.vec.vec_mult_scalar(u.vec.vec_add(e,n),.5),height:0,yOffset:0,radius:.5,angle:0,open:b.CLOSED,configuration:i,keyId:o}};e.createLockedDoor=(t,n)=>{const{wallStart:o,wallEnd:a,configuration:s,keyId:u,open:m}=n;let E;const S={CLOSED:(0,g.JoinComponent)([new h.BoundaryComponent,(0,d.onInteractedWith)(i.InteractionType.INTERACT,(e,n)=>{u&&(0,c.DoesPlayerHaveItem)(t,u)?(e.setState({open:b.OPENING}),t.getAudioService().play(t.getResourceManager().manifest.audio[r.Audios.DOOR_UNLOCK],.5),void 0!==E&&(0,f.DeregisterKeyHint)(t)(E)):s&&((0,l.OpenLockpickingChallenge)(t)(n=>{e.setState({open:n?b.OPENING:b.CLOSED}),t.getAudioService().play(t.getResourceManager().manifest.audio[r.Audios.DOOR_UNLOCK],.5)},s),void 0!==E&&(0,f.DeregisterKeyHint)(t)(E))}),(0,d.onCanBeInteractedWithByPlayer)(i.InteractionType.INTERACT,()=>{E=u&&(0,c.DoesPlayerHaveItem)(t,u)?(0,f.RegisterKeyHint)(t)({code:["E"],hint:"Unlock Door"}):s?(0,f.RegisterKeyHint)(t)({code:["E"],hint:"Lockpick Door"}):(0,f.RegisterKeyHint)(t)({code:["?"],hint:"Locked"})},()=>{void 0!==E&&(0,f.DeregisterKeyHint)(t)(E)})])};return new y.Entity(t,n,(0,p.WallRenderComponent)(),new v.SwitchComponent(S,m,t=>t.getState().open),(0,e.doorOpensWithParticles)(o,a,m))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BoundaryComponent=void 0;e.BoundaryComponent=class{getActions(t){return{onEntityCreated:()=>{const{boundary:e,collides:n}=t.getState().boundaryState;n&&t.getServiceLocator().getPhysicsService().registerBoundary(e)},onStateTransition:(e,n)=>{e.boundaryState.collides||!0!==n.boundaryState.collides||t.getServiceLocator().getPhysicsService().registerBoundary(n.boundaryState.boundary),!0!==e.boundaryState.collides||n.boundaryState.collides||t.getServiceLocator().getPhysicsService().unregisterBoundary(e.boundaryState.boundary)},onEntityDeleted:()=>{t.getServiceLocator().getPhysicsService().unregisterBoundary(t.getState().boundaryState.boundary)}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createWallType=e.WallRenderComponent=void 0;const r=n(1),i=n(12);e.WallRenderComponent=()=>{let t;return{getActions:n=>({onEntityCreated:()=>{const{wallSprite:r,wallStart:i,wallEnd:o,wallHeight:a,wallOffset:s}=n.getState(),u=(0,e.createWallType)(n.getServiceLocator(),r,i,o,a,s);t=n.getServiceLocator().getRenderService().wallRenderService.createItem(u)},onEntityDeleted:()=>{t&&(n.getServiceLocator().getRenderService().wallRenderService.freeItem(t),t=void 0)}}),update:n=>{const{wallSprite:r,wallStart:i,wallEnd:o,wallHeight:a,wallOffset:s}=n.getState(),u=(0,e.createWallType)(n.getServiceLocator(),r,i,o,a,s);n.getServiceLocator().getRenderService().wallRenderService.updateItem(t,u)}}};e.createWallType=(t,e,n,o,a=1,s=0)=>{const u=t.getResourceManager().manifest.spritesheets[i.SpriteSheets.SPRITE].getSprite(e),c=Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2))*u.textureCoordinate.textureWidth*r.SCENERY_PIXEL_DENSITY/u.pixelCoordinate.textureWidth,l=u.textureCoordinate.textureHeight*a*r.SCENERY_PIXEL_DENSITY/u.pixelCoordinate.textureHeight;return{startPos:[n.x,n.y],endPos:[o.x,o.y],startHeight:a,endHeight:a,startOffset:s,endOffset:s,textureX:u.textureCoordinate.textureX,textureY:u.textureCoordinate.textureY,textureWidth:c,textureHeight:l,repeatWidth:u.textureCoordinate.textureWidth,repeatHeight:u.textureCoordinate.textureHeight}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createChestState=e.createChest=void 0;const r=n(4),i=n(16),o=n(10),a=n(123),s=n(124),u=n(238),c=n(58),l=n(125),f=n(42),h=n(49),d=n(33),p=n(31),m=n(32),g=n(127),v=n(19);e.createChest=function(t,e){let n=void 0;return new v.Entity(t,e,(0,d.SpriteRenderComponent)(),new m.SwitchComponent({false:(0,p.JoinComponent)([(0,h.onInteractedWith)(i.InteractionType.INTERACT,(e,i)=>{e.setState({opened:!0}),void 0!==n&&(0,f.DeregisterKeyHint)(t)(n);const{itemDrops:o,position:a}=e.getState();(0,l.DropItemDistribution)(t,o,a,{x:0,y:0},!0),t.getAudioService().play3D(t.getResourceManager().manifest.audio[(0,c.randomSelection)([r.Audios.CHEST_OPEN_0,r.Audios.CHEST_OPEN_1])],[a.x,a.y])}),(0,h.onCanBeInteractedWithByPlayer)(i.InteractionType.INTERACT,()=>{n=(0,f.RegisterKeyHint)(t)({code:["E"],hint:"Open Chest"})},()=>{void 0!==n&&(0,f.DeregisterKeyHint)(t)(n)}),{getActions:t=>({onEntityCreated:()=>{const e=t.getState().position,n=(0,a.BurstEmitter)({creator:t=>(0,s.SmokeParticle)({start:t}),position:[e.x,.5,e.y],rate:.5});t.getServiceLocator().getParticleService().addEmitter(n.emitter),o.ProcedureService.setGameTimeout(()=>{t.getServiceLocator().getParticleService().removeEmitter(n.emitter)},500)}})}]),true:(0,p.JoinComponent)([{getActions:e=>({onEntityCreated:()=>{const n=e.getState().position;e.setState({sprite:"chest_closed"});const i=(0,a.BurstEmitter)({creator:t=>(0,u.SparkleParticle)({start:t}),position:[n.x,.5,n.y],rate:1});e.getServiceLocator().getParticleService().addEmitter(i.emitter),o.ProcedureService.setGameTimeout(()=>{e.getServiceLocator().getParticleService().removeEmitter(i.emitter)},300),t.getAudioService().playSong(t.getResourceManager().manifest.audio[r.Audios.FIGHT])}})},(0,g.TimeoutComponent)(e=>{e.getState().position;const n=e.getState().position;e.delete(),e.getServiceLocator().getWorld().forEachEntity(t=>t.getActions().onChestOpened());const i=(0,a.BurstEmitter)({creator:t=>(0,s.SmokeParticle)({start:t}),position:[n.x,.5,n.y],rate:.5});e.getServiceLocator().getParticleService().addEmitter(i.emitter),o.ProcedureService.setGameTimeout(()=>{e.getServiceLocator().getParticleService().removeEmitter(i.emitter)},500),t.getAudioService().play(t.getResourceManager().manifest.audio[(0,c.randomSelection)([r.Audios.CHEST_DISAPPEAR])])},3e3)])},""+e.opened,t=>""+t.getState().opened))},e.createChestState=function(t,e){return{yOffset:0,position:t,height:0,radius:1,angle:0,sprite:"chest_open",spriteWidth:1,spriteHeight:1,opened:!1,itemDrops:e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BurstEmitter=void 0;e.BurstEmitter=t=>{const{creator:e,position:n,rate:r}=t,i=()=>1*Math.random()-.5;return{emitter:{rate:r,createParticle:()=>{const t=i(),r=i(),o=i();return e([n[0]+t,n[1]+r,n[2]+o])}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmokeParticle=void 0;e.SmokeParticle=t=>{const{start:e}=t,n=1*Math.random()+.4;return{life:30,render:t=>({type:"Particle",particle:{position:[e[0],e[1]+.3*t,e[2]],size:[n,n],r:139/255,g:155/255,b:180/255}})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropItemDistribution=e.DropItem=e.DropItems=void 0;const r=n(3),i=n(20),o=n(50);e.DropItems=(t,n,r)=>{for(let i=0;i<r;i++)(0,e.DropItem)(t,n)};e.DropItem=(t,e)=>{const n=i.EntityFactory.ITEM_DROP(t,(0,o.createItemDropState)(e));t.getWorld().addEntity(n)};e.DropItemDistribution=(t,n,i,o,a)=>{const s=(0,r.randomFloat)();n.forEach(n=>{const[u,c,l]=n,[f,h,d]="number"==typeof c?[0,c,(0,r.randomFloat)()]:[...c,s];d>=f&&d<=h&&(0,e.DropItems)(t,{item:u,position:i,force:o,withVelocity:a},l)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhysicsComponent=e.PHYSICS_STATE_DEFAULT=void 0,e.PHYSICS_STATE_DEFAULT={velocity:{x:0,y:0},heightVelocity:0,friction:.9,mass:1,elastic:.9,collidesEntities:!0,collidesWalls:!0};e.PhysicsComponent=()=>{let t;return{getActions:e=>({onEntityCreated:()=>{const{collidesEntities:n,collidesWalls:r}=e.getState();t={collidesWalls:r,collidesEntities:n,setHeight:t=>e.setState({height:t}),setHeightVelocity:t=>e.setState({heightVelocity:t}),setVelocity:(t,n)=>e.setState({velocity:{x:t,y:n}}),setPosition:(t,n)=>e.setState({position:{x:t,y:n}}),getPhysicsInformation:()=>e.getState()},e.getServiceLocator().getPhysicsService().registerPhysicsEntity(t)},onEntityDeleted:()=>{e.getServiceLocator().getPhysicsService().unregisterPhysicsEntity(t)}})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeoutComponent=void 0;const r=n(10);e.TimeoutComponent=function(t,e,n){let i,o=!1;return{getActions:a=>({onEntityCreated:()=>{i=r.ProcedureService.setGameTimeout(()=>{o=!0,t(a)},e)},onEntityDeleted:()=>{r.ProcedureService.clearTimeout(i),!1===o&&n&&n()}})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLadder=e.createLadderState=void 0;const r=n(16),i=n(49),o=n(33),a=n(19);e.createLadderState=(t,e,n,r)=>({yOffset:0,position:{x:t,y:e},height:0,radius:1,angle:0,spriteWidth:1,spriteHeight:1,sprite:n,destination:r});e.createLadder=(t,e)=>new a.Entity(t,e,(0,o.SpriteRenderComponent)(),(0,i.withInteractionHint)(t,r.InteractionType.INTERACT,["E"],"Climb Ladder"),(0,i.onInteractedWith)(r.InteractionType.INTERACT,t=>{t.getServiceLocator().getMapService().goToLocation(t.getState().destination)}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createScriptState=e.createScript=void 0;const r=n(4),i=n(61),o=n(3),a=n(31),s=n(32),u=n(19),c=n(122),l=n(20),f=n(82),h=[[i.GameItems[i.GameItem.WEAPON_WOOD_STICK],[0,1],1]],d=(0,i.createBasicFood)("food_candy","Candy","Hard and sweet",2),p=[[d,[0,.1],5],[d,[.1,.5],2],[d,1,1],[(0,i.createBasicFood)("food_carrot","Carrot","Crunchy and helps you see in the dark",5),.8,1],[(0,i.createBasicFood)("food_apple","Apple","It feels waxy",10),.5,1],[(0,i.createBasicFood)("food_meat","Meat","But what kind?",40),.2,1]];function m(t){const{stage:e,position:n}=t.getState(),r=t.getServiceLocator().getMapService().getSpawnPoints().filter(t=>t.name.includes("SPAWN"));return 20===e?n:r[(0,o.randomIntRange)(0,r.length)].position}function g(t){let e="slime";const n=t/20;return n<2+1.5*Math.random()&&(e="jailor"),n<.8+.4*Math.random()&&(e="small_jailor"),n<.6+.3*Math.random()&&(e="slime"),n<.4+.2*Math.random()&&(e="small_slime"),(0,o.randomFloatRange)(0,1)<.02&&(e="jailor"),(0,o.randomFloatRange)(0,1)<.04&&(e="small_jailor"),(0,o.randomFloatRange)(0,1)<.06&&(e="slime"),(0,o.randomFloatRange)(0,1)<.08&&(e="small_slime"),20===t&&(e="boss"),e}var v;!function(t){t.SPAWN_REWARD="SPAWN_REWARD",t.OPEN_CHEST="OPEN_CHEST",t.KILL_ENEMIES="KILL_ENEMIES"}(v||(v={})),e.createScript=function(t,e){return new u.Entity(t,e,{getActions:t=>({onEntityCreated:()=>{const{stage:e}=t.getState();t.getServiceLocator().getStore().getActions().onStageReached(e)}})},new s.SwitchComponent({[v.SPAWN_REWARD]:(0,a.JoinComponent)([{getActions:t=>({onEntityCreated:()=>{const{stage:e}=t.getState();if(20===e)return void t.getServiceLocator().getScriptingService().onBeatGame();t.setState({levelStage:v.OPEN_CHEST}),function(t){const{stage:e}=t.getState(),n=t.getServiceLocator(),{position:r}=t.getState();let o;switch(e){case 0:o=h;break;case 2:o=[...p,[(0,i.createBasicSword)("weapon_wood_axe","Wooden axe","A large wood axe. What can it cut?",3),1,1]];break;case 4:o=[...p,[(0,i.createBasicSword)("weapon_dagger","Iron dagger","A small iron dagger.",4),1,1],[i.GameItems[i.GameItem.GOLD_RING],1,1]];break;case 6:o=[...p,[(0,i.createBasicSword)("weapon_claymore","Iron claymore","An iron claymore. Hard to hold with one hand.",10),1,1]];break;case 8:o=[...p,[(0,i.createBasicSword)("weapon_heavy_axe","Heavy axe","Double sided for extra killing",14),1,1],[i.GameItems[i.GameItem.EQUIPMENT_GREAVES],1,1]];break;case 10:o=[...p,[(0,i.createBasicSword)("weapon_ceremonial_trident","Ceremonial trident","A three-pronged spear. Useful for stabbing multiple enemies.",18),1,1]];break;case 12:o=[...p,[i.GameItems[i.GameItem.EQUIPMENT_HELMET],1,1]];break;case 14:o=[...p,[(0,i.createBasicSword)("weapon_magic_sword","Magic sword","A sword weilding curious magical power",21),1,1]];break;case 16:o=[...p,[i.GameItems[i.GameItem.EQUIPMENT_SHIELD],1,1]];break;case 18:o=[...p,[i.GameItems[i.GameItem.EQUIPMENT_CHEST],1,1]];break;case 19:o=[...p,[(0,i.createAncientSword)(),1,1]];break;default:o=p}let a=l.EntityFactory.CHEST(n,(0,c.createChestState)(r,o));n.getWorld().addEntity(a)}(t);const n=t.getServiceLocator();n.getAudioService().playSong(n.getResourceManager().manifest.audio[r.Audios.CHEST_STAGE],void 0,!1)}})}]),[v.OPEN_CHEST]:(0,a.JoinComponent)([{getActions:e=>({onEntityCreated:()=>{e.getServiceLocator().getAudioService().isPlayingSong()||t.getAudioService().playSong(t.getResourceManager().manifest.audio[r.Audios.CHEST_STAGE],void 0,!1)},onChestOpened:()=>{const{stage:t}=e.getState();e.setState({stage:t+1}),e.getServiceLocator().getStore().getActions().onStageReached(t+1),function(t){const{stage:e}=t.getState(),n=t.getServiceLocator(),r=20===e?1:2*(e-1)+1;for(let i=0;i<r;i++){const r=20===e?{x:0,y:0}:{x:(0,o.randomFloatRange)(-2,2),y:(0,o.randomFloatRange)(-2,2)},i=o.vec.vec_add(m(t),r),a=l.EntityFactory.NPC_BULKY_MAN(n,(0,f.createNPCState)({position:i,npcTypeId:g(e)}));n.getWorld().addEntity(a)}t.setState({activeEnemies:r})}(e),e.setState({levelStage:v.KILL_ENEMIES})}})}]),[v.KILL_ENEMIES]:(0,a.JoinComponent)([{getActions:e=>({onEntityCreated:()=>{e.getServiceLocator().getAudioService().isPlayingSong()||t.getAudioService().playSong(t.getResourceManager().manifest.audio[r.Audios.FIGHT],void 0,!1)},onEnemyKilled:()=>{const{activeEnemies:t}=e.getState(),n=t-1;e.setState({activeEnemies:n}),n<=0&&(e.getServiceLocator().getAudioService().play(e.getServiceLocator().getResourceManager().manifest.audio[r.Audios.BEAT_ENEMIES]),e.setState({levelStage:v.SPAWN_REWARD}))}})}])},e.levelStage,t=>t.getState().levelStage))},e.createScriptState=function(t){return{position:t,stage:0,levelStage:v.SPAWN_REWARD,activeEnemies:0}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InventoryContainer=e.INVENTORY_BORDER_RADIUS=e.INVENTORY_HEIGHT=e.INVENTORY_WIDTH=void 0;const r=n(0),i=n(52),o=n(261),a=n(1),s=n(6),u=n(5),c=n(7),l=n(34),f=n(53),h=n(23),d=n(263),p=n(264),m=n(15),g=n(27),v=n(28),y=n(12),b=n(131),E=n(58),S=n(4);var w;e.INVENTORY_WIDTH=520,e.INVENTORY_HEIGHT=312,e.INVENTORY_BORDER_RADIUS=8,function(t){t.Inventory="Inventory",t.Equipment="Equipment"}(w||(w={}));const _=[w.Inventory,w.Equipment];e.InventoryContainer=t=>{const n=r.useRef(),u=(0,o.default)(n),f=(0,m.useServiceLocator)(),[d,y]=r.useState(!1),[b,I]=r.useState(void 0),[P,M]=r.useState(0),[O,C]=r.useState({x:0,y:0}),[R,D]=r.useState((0,h.getEmptyInventory)()),[k,L]=(0,c.useGlobalState)(),[N,j]=r.useState(w.Inventory);r.useEffect(()=>{D(f.getScriptingService().getPlayer().getInventory())}),r.useEffect(()=>{k.inventory.showing?(y(!0),(0,s.animation)(M).speed(200).driven(!1).start()):(0,s.animation)(t=>M(1-t)).speed(200).driven(!1).start().whenDone(()=>{y(!1),I(void 0)})},[k.inventory.showing]);const F=t=>{I(t)};return r.createElement("div",{ref:n,style:{position:"absolute",width:a.DOM_WIDTH,height:a.DOM_HEIGHT},onMouseMove:t=>C({x:t.pageX-u.left,y:t.pageY-u.top})},r.createElement(i.ViewportComponent,{x:0,y:0,width:a.DOM_WIDTH,height:a.DOM_HEIGHT,style:{display:"flex",justifyContent:"center",alignItems:"center"}},d&&r.createElement("div",{style:Object.assign({opacity:P,display:"flex",flexDirection:"column",alignItems:"flex-start"},(0,l.ShadowComponentStyle)())},r.createElement("div",{style:{display:"flex",flexDirection:"row"}},_.map(t=>r.createElement(T,{label:t,open:t===N,onPress:()=>{j(t),f.getAudioService().play(f.getResourceManager().manifest.audio[(0,E.randomSelection)([S.Audios.BUTTON_0])])}}))),r.createElement("div",{style:{width:e.INVENTORY_WIDTH,height:e.INVENTORY_HEIGHT,background:g.Colours.DESELCT_GREY,borderRadius:`0px ${e.INVENTORY_BORDER_RADIUS}px ${e.INVENTORY_BORDER_RADIUS}px ${e.INVENTORY_BORDER_RADIUS}px`}},(()=>{switch(N){case w.Inventory:return r.createElement(x,{items:R.items,onMouseEnter:t=>F(t.item),onMouseLeave:t=>F(void 0),onClick:t=>(t=>{if(0===t.count)return;const{item:e,count:n}=t,r=f.getScriptingService().getPlayer().getInventory().items.length;(0,v.PlayerUseItemFromInventory)(f)(e),D(f.getScriptingService().getPlayer().getInventory()),R.items.length!==r&&F(void 0)})(t)});case w.Equipment:return r.createElement(A,{inventory:R,onMouseEnter:t=>F(t),onMouseLeave:t=>F(void 0),onMousePress:t=>(t=>{(0,v.UnequipItemFromInventory)(f,t),D(f.getScriptingService().getPlayer().getInventory()),F(void 0)})(t)})}})())),b&&d&&r.createElement("div",{style:{opacity:P}},r.createElement(p.TooltipComponent,{serviceLocator:f,context:{type:p.TooltipType.ITEM,item:b},position:O}))))};const T=t=>{const{label:n,open:i,onPress:o}=t;return r.createElement(u.TextComponent,{text:n,size:u.TextSize.SMALL,colour:i?u.TextColour.LIGHT:u.TextColour.LESS_LIGHT,style:{paddingLeft:8,paddingRight:8,background:i?g.Colours.DESELCT_GREY:g.Colours.HIDDEN_GREY,borderRadius:`${e.INVENTORY_BORDER_RADIUS}px ${e.INVENTORY_BORDER_RADIUS}px 0px 0px`,cursor:i?"default":"pointer"},clickable:o})},x=t=>{const[n,i]=r.useState(!1),[o,a]=r.useState(0);r.useEffect(()=>{(0,s.animation)(a).speed(500).looping().driven(!1).start()},[]);let c=o;c=o>.5?2:-2;const l=(0,m.useServiceLocator)(),h=r.createElement("div",{style:{position:"absolute",top:208,left:640,display:"flex",flexDirection:"row",alignItems:"center",pointerEvents:"none"}},r.createElement(f.SpriteImageComponent,{spriteSheet:y.SpriteSheets.SPRITE,sprite:"ui_finger",style:{width:32,height:32,transform:`translate(0px, ${c}px)`}}),r.createElement(u.TextComponent,{text:"Left click to equip",style:{paddingLeft:8},font:u.TextFont.REGULAR,size:u.TextSize.SMALL,colour:u.TextColour.LIGHT}));return r.createElement("div",{style:{display:"flex",flexDirection:"column",overflowY:"scroll",height:e.INVENTORY_HEIGHT}},l.getTutorialService().shouldShowEquipHint()&&h,t.items.filter(t=>t.count>0).map(e=>r.createElement(d.InventoryItemComponent,{key:e.id,itemMetadata:e,style:{marginLeft:8,marginTop:8,marginRight:8,marginBottom:8,cursor:"pointer"},onMouseEnter:()=>t.onMouseEnter(e),onMouseLeave:()=>t.onMouseLeave(e),onClick:()=>(e=>{t.onClick(e),i(!n)})(e)})))},A=t=>{const{inventory:n,onMouseEnter:i,onMouseLeave:o,onMousePress:a}=t,s=(t,e,n)=>r.createElement(I,{x:t,y:e,item:n,onMouseEnter:i,onMouseLeave:o,onMousePress:a}),c=(t,e=u.TextColour.LIGHT)=>r.createElement(u.TextComponent,{text:t,font:u.TextFont.REGULAR,colour:e,size:u.TextSize.VSMALL,style:{marginRight:8}});return r.createElement("div",{style:{position:"relative",width:e.INVENTORY_WIDTH,height:e.INVENTORY_HEIGHT}},[s(102,58,n.equipped[h.EquipmentType.HELMET]),s(102,129,n.equipped[h.EquipmentType.BODY]),s(102,200,n.equipped[h.EquipmentType.SHOES]),s(31,129,n.equipped[h.EquipmentType.WEAPON]),s(170,129,n.equipped[h.EquipmentType.SHIELD]),s(31,200,n.equipped[h.EquipmentType.RING])],function(t){const e=t=>r.createElement("ul",{style:{padding:0,margin:0,marginLeft:16,color:u.TextColour.LIGHT}},t.map(t=>r.createElement(b.EffectComponent,{effect:t}))),n=[],i=[];return t.forEach(t=>{t&&(t.onAttack&&n.push(...t.onAttack),t.onEquip&&i.push(...t.onEquip))}),r.createElement("div",{style:{position:"absolute",width:244,height:277,left:260,top:17,border:"solid",borderWidth:1,borderColor:g.Colours.HOVER_GREY,borderRadius:8,overflowY:"scroll"}},n.length>0&&r.createElement(r.Fragment,null,c("On attack",u.TextColour.GOLD),e(n)),i.length>0&&r.createElement(r.Fragment,null,c("On equip",u.TextColour.GOLD),e(i)))}(Object.values(n.equipped)))},I=t=>{const{item:e,onMouseEnter:n,onMouseLeave:i,onMousePress:o,x:a,y:s}=t,[u,c]=r.useState(!1);return r.createElement("div",{onMouseEnter:()=>{e&&(n(e),c(!0))},onMouseLeave:()=>{e&&(i(e),c(!1))},onMouseDown:()=>{e&&(o(e),c(!1))},style:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",width:58,height:58,border:"solid",borderRadius:8,borderColor:g.Colours.HOVER_GREY,borderWidth:1,backgroundColor:u?g.Colours.HOVER_GREY:g.Colours.DESELCT_GREY,left:a,top:s}},e&&r.createElement(f.SpriteImageComponent,{spriteSheet:y.SpriteSheets.SPRITE,sprite:e.spriteIcon,style:{width:42,height:42}}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EffectComponent=void 0;const r=n(0),i=n(41),o=n(5);e.EffectComponent=t=>{const{effect:e}=t;switch(e.type){case i.EffectType.HEALS_SELF:return a([s("Heals",o.TextColour.RED),s(`self ${e.points} pts`)]);case i.EffectType.DAMAGES_TARGET:return a([s("Damages",o.TextColour.RED),s(`target ${e.points} pts`)]);case i.EffectType.DAMAGES_TARGET_IN_RANGE:return a([s("Damages",o.TextColour.RED),s(`target between ${e.a} and ${e.b} pts`)]);case i.EffectType.HEALTH_INCREASE:return a([s("Increase"),s("Health",o.TextColour.RED),s(e.points+" pts")]);case i.EffectType.ACCURACY_INCREASE:return a([s("Improves accuracy of"),s("Attack",o.TextColour.BLUE)]);case i.EffectType.ATTACK_SPEED_INCREASE:return a([s("Improves"),s("Speed",o.TextColour.BLUE)]);case i.EffectType.PROTECTION_INCREASE:return a([s("Improves"),s("Protection",o.TextColour.BLUE)]);case i.EffectType.SPEED_INCREASE:return a([s("Improves"),s("Speed",o.TextColour.BLUE)]);case i.EffectType.ANCIENT_POWER:return a([s("Imbues with"),s("Ancient Power",o.TextColour.STEEL)])}return r.createElement(r.Fragment,null)};const a=t=>r.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center"}},t),s=(t,e=o.TextColour.LIGHT)=>r.createElement(r.Fragment,null,t.split(" ").map(t=>r.createElement(o.TextComponent,{text:t,font:o.TextFont.REGULAR,colour:e,size:o.TextSize.VSMALL,style:{marginRight:8,wordWrap:"break-word"}})))},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,i="/"===a.charAt(0))}return(i?"/":"")+(e=n(r(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),a="/"===i(t,-1);return(t=n(r(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&a&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=a+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var i="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(24))},function(t,e,n){"use strict";t.exports=function(t){var e="string"==typeof t?t.charCodeAt(0):t;return e>=97&&e<=122||e>=65&&e<=90}},function(t,e,n){"use strict";t.exports={position:!0,gfm:!0,commonmark:!1,footnotes:!1,pedantic:!1,blocks:n(306)}},function(t,e,n){"use strict";t.exports=function(t){var e,n=0,i=0,o=t.charAt(n),a={};for(;o in r;)i+=e=r[o],e>1&&(i=Math.floor(i/e)*e),a[i]=n,o=t.charAt(++n);return{indent:i,stops:a}};var r={" ":1,"\t":4}},function(t,e,n){"use strict";var r="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\u0000-\\u0020]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",i="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>";e.openCloseTag=new RegExp("^(?:"+r+"|"+i+")"),e.tag=new RegExp("^(?:"+r+"|"+i+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Za-z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)")},function(t,e,n){"use strict";t.exports=function(t,e){return t.indexOf("<",e)}},function(t,e,n){"use strict";t.exports=function(t,e){var n=t.indexOf("[",e),r=t.indexOf("![",e);if(-1===r)return n;return n<r?n:r}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const r=n(0),i=n(141),o=n(1),a=n(145),s=n(96),u=n(57);console.log(o.VERSION),t.game=s.game;i.render(r.createElement(s.gameContext.Provider,{value:s.game},r.createElement(a.SiteContainer,{store:u.store})),document.getElementById("root"))}).call(this,n(11))},function(t,e,n){"use strict";
/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(90),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function v(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function E(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||y}function S(){}function w(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||y}E.prototype.isReactComponent={},E.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(v(85));this.updater.enqueueSetState(this,t,e,"setState")},E.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},S.prototype=E.prototype;var _=w.prototype=new S;_.constructor=w,r(_,E.prototype),_.isPureReactComponent=!0;var T={current:null},x=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function I(t,e,n){var r,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)x.call(e,r)&&!A.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:T.current}}function P(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}var M=/\/+/g,O=[];function C(t,e,n,r){if(O.length){var i=O.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function R(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>O.length&&O.push(t)}function D(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case a:u=!0}}if(u)return r(i,e,""===n?"."+k(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=n+k(s=e[c],c);u+=t(s,l,r,i)}else if(null===e||"object"!=typeof e?l=null:l="function"==typeof(l=g&&e[g]||e["@@iterator"])?l:null,"function"==typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=t(s=s.value,l=n+k(s,c++),r,i);else if("object"===s)throw r=""+e,Error(v(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return u}(t,"",e,n)}function k(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function L(t,e){t.func.call(t.context,e,t.count++)}function N(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?j(t,r,n,(function(t){return t})):null!=t&&(P(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(M,"$&/")+"/")+n)),r.push(t))}function j(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(M,"$&/")+"/"),D(t,N,e=C(e,o,r,i)),R(e)}var F={current:null};function U(){var t=F.current;if(null===t)throw Error(v(321));return t}var B={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:T,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return j(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;D(t,L,e=C(null,null,e,n)),R(e)},count:function(t){return D(t,(function(){return null}),null)},toArray:function(t){var e=[];return j(t,e,null,(function(t){return t})),e},only:function(t){if(!P(t))throw Error(v(143));return t}},e.Component=E,e.Fragment=s,e.Profiler=c,e.PureComponent=w,e.StrictMode=u,e.Suspense=d,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,e.cloneElement=function(t,e,n){if(null==t)throw Error(v(267,t));var i=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=T.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)x.call(e,l)&&!A.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:o,type:t.type,key:a,ref:s,props:i,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:f,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:t},t.Consumer=t},e.createElement=I,e.createFactory=function(t){var e=I.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:h,render:t}},e.isValidElement=P,e.lazy=function(t){return{$$typeof:m,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:p,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return U().useCallback(t,e)},e.useContext=function(t,e){return U().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return U().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return U().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return U().useLayoutEffect(t,e)},e.useMemo=function(t,e){return U().useMemo(t,e)},e.useReducer=function(t,e,n){return U().useReducer(t,e,n)},e.useRef=function(t){return U().useRef(t)},e.useState=function(t){return U().useState(t)},e.version="16.14.0"},function(t,e,n){"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}}(),t.exports=n(142)},function(t,e,n){"use strict";
/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(0),i=n(90),o=n(143);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(t,e,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(t){this.onError(t)}}var u=!1,c=null,l=!1,f=null,h={onError:function(t){u=!0,c=t}};function d(t,e,n,r,i,o,a,l,f){u=!1,c=null,s.apply(h,arguments)}var p=null,m=null,g=null;function v(t,e,n){var r=t.type||"unknown-event";t.currentTarget=g(n),function(t,e,n,r,i,o,s,h,p){if(d.apply(this,arguments),u){if(!u)throw Error(a(198));var m=c;u=!1,c=null,l||(l=!0,f=m)}}(r,e,void 0,t),t.currentTarget=null}var y=null,b={};function E(){if(y)for(var t in b){var e=b[t],n=y.indexOf(t);if(!(-1<n))throw Error(a(96,t));if(!w[n]){if(!e.extractEvents)throw Error(a(97,t));for(var r in w[n]=e,n=e.eventTypes){var i=void 0,o=n[r],s=e,u=r;if(_.hasOwnProperty(u))throw Error(a(99,u));_[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&S(c[i],s,u);i=!0}else o.registrationName?(S(o.registrationName,s,u),i=!0):i=!1;if(!i)throw Error(a(98,r,t))}}}}function S(t,e,n){if(T[t])throw Error(a(100,t));T[t]=e,x[t]=e.eventTypes[n].dependencies}var w=[],_={},T={},x={};function A(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!b.hasOwnProperty(e)||b[e]!==r){if(b[e])throw Error(a(102,e));b[e]=r,n=!0}}n&&E()}var I=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),P=null,M=null,O=null;function C(t){if(t=m(t)){if("function"!=typeof P)throw Error(a(280));var e=t.stateNode;e&&(e=p(e),P(t.stateNode,t.type,e))}}function R(t){M?O?O.push(t):O=[t]:M=t}function D(){if(M){var t=M,e=O;if(O=M=null,C(t),e)for(t=0;t<e.length;t++)C(e[t])}}function k(t,e){return t(e)}function L(t,e,n,r,i){return t(e,n,r,i)}function N(){}var j=k,F=!1,U=!1;function B(){null===M&&null===O||(N(),D())}function H(t,e,n){if(U)return t(e,n);U=!0;try{return j(t,e,n)}finally{U=!1,B()}}var G=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z=Object.prototype.hasOwnProperty,W={},V={};function Y(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){q[t]=new Y(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];q[e]=new Y(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){q[t]=new Y(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){q[t]=new Y(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){q[t]=new Y(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){q[t]=new Y(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){q[t]=new Y(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){q[t]=new Y(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){q[t]=new Y(t,5,!1,t.toLowerCase(),null,!1)}));var $=/[\-:]([a-z])/g;function K(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace($,K);q[e]=new Y(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace($,K);q[e]=new Y(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace($,K);q[e]=new Y(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){q[t]=new Y(t,1,!1,t.toLowerCase(),null,!1)})),q.xlinkHref=new Y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){q[t]=new Y(t,1,!1,t.toLowerCase(),null,!0)}));var Q=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function X(t,e,n,r){var i=q.hasOwnProperty(e)?q[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!z.call(V,t)||!z.call(W,t)&&(G.test(t)?V[t]=!0:(W[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}Q.hasOwnProperty("ReactCurrentDispatcher")||(Q.ReactCurrentDispatcher={current:null}),Q.hasOwnProperty("ReactCurrentBatchConfig")||(Q.ReactCurrentBatchConfig={suspense:null});var Z=/^(.*)[\\\/]/,J="function"==typeof Symbol&&Symbol.for,tt=J?Symbol.for("react.element"):60103,et=J?Symbol.for("react.portal"):60106,nt=J?Symbol.for("react.fragment"):60107,rt=J?Symbol.for("react.strict_mode"):60108,it=J?Symbol.for("react.profiler"):60114,ot=J?Symbol.for("react.provider"):60109,at=J?Symbol.for("react.context"):60110,st=J?Symbol.for("react.concurrent_mode"):60111,ut=J?Symbol.for("react.forward_ref"):60112,ct=J?Symbol.for("react.suspense"):60113,lt=J?Symbol.for("react.suspense_list"):60120,ft=J?Symbol.for("react.memo"):60115,ht=J?Symbol.for("react.lazy"):60116,dt=J?Symbol.for("react.block"):60121,pt="function"==typeof Symbol&&Symbol.iterator;function mt(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=pt&&t[pt]||t["@@iterator"])?t:null}function gt(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case nt:return"Fragment";case et:return"Portal";case it:return"Profiler";case rt:return"StrictMode";case ct:return"Suspense";case lt:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case at:return"Context.Consumer";case ot:return"Context.Provider";case ut:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ft:return gt(t.type);case dt:return gt(t.render);case ht:if(t=1===t._status?t._result:null)return gt(t)}return null}function vt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=gt(t.type);n=null,r&&(n=gt(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(Z,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}function yt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function bt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Et(t){t._valueTracker||(t._valueTracker=function(t){var e=bt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function St(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bt(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function wt(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function _t(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=yt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Tt(t,e){null!=(e=e.checked)&&X(t,"checked",e,!1)}function xt(t,e){Tt(t,e);var n=yt(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?It(t,e.type,n):e.hasOwnProperty("defaultValue")&&It(t,e.type,yt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function At(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function It(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Pt(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function Mt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Ot(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ct(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:yt(n)}}function Rt(t,e){var n=yt(e.value),r=yt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Dt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var kt="http://www.w3.org/1999/xhtml",Lt="http://www.w3.org/2000/svg";function Nt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Nt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Ft,Ut=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==Lt||"innerHTML"in t)t.innerHTML=e;else{for((Ft=Ft||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ft.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function Bt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function Ht(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gt={animationend:Ht("Animation","AnimationEnd"),animationiteration:Ht("Animation","AnimationIteration"),animationstart:Ht("Animation","AnimationStart"),transitionend:Ht("Transition","TransitionEnd")},zt={},Wt={};function Vt(t){if(zt[t])return zt[t];if(!Gt[t])return t;var e,n=Gt[t];for(e in n)if(n.hasOwnProperty(e)&&e in Wt)return zt[t]=n[e];return t}I&&(Wt=document.createElement("div").style,"AnimationEvent"in window||(delete Gt.animationend.animation,delete Gt.animationiteration.animation,delete Gt.animationstart.animation),"TransitionEvent"in window||delete Gt.transitionend.transition);var Yt=Vt("animationend"),qt=Vt("animationiteration"),$t=Vt("animationstart"),Kt=Vt("transitionend"),Qt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xt=new("function"==typeof WeakMap?WeakMap:Map);function Zt(t){var e=Xt.get(t);return void 0===e&&(e=new Map,Xt.set(t,e)),e}function Jt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function te(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function ee(t){if(Jt(t)!==t)throw Error(a(188))}function ne(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Jt(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ee(i),t;if(o===r)return ee(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function re(t,e){if(null==e)throw Error(a(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function ie(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var oe=null;function ae(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)v(t,e[r],n[r]);else e&&v(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function se(t){if(null!==t&&(oe=re(oe,t)),t=oe,oe=null,t){if(ie(t,ae),oe)throw Error(a(95));if(l)throw t=f,l=!1,f=null,t}}function ue(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function ce(t){if(!I)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}var le=[];function fe(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>le.length&&le.push(t)}function he(t,e,n,r){if(le.length){var i=le.pop();return i.topLevelType=t,i.eventSystemFlags=r,i.nativeEvent=e,i.targetInst=n,i}return{topLevelType:t,eventSystemFlags:r,nativeEvent:e,targetInst:n,ancestors:[]}}function de(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=In(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=ue(t.nativeEvent);r=t.topLevelType;var o=t.nativeEvent,a=t.eventSystemFlags;0===n&&(a|=64);for(var s=null,u=0;u<w.length;u++){var c=w[u];c&&(c=c.extractEvents(r,e,o,i,a))&&(s=re(s,c))}se(s)}}function pe(t,e,n){if(!n.has(t)){switch(t){case"scroll":$e(e,"scroll",!0);break;case"focus":case"blur":$e(e,"focus",!0),$e(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ce(t)&&$e(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Qt.indexOf(t)&&qe(t,e)}n.set(t,null)}}var me,ge,ve,ye=!1,be=[],Ee=null,Se=null,we=null,_e=new Map,Te=new Map,xe=[],Ae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ie="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Pe(t,e,n,r,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Me(t,e){switch(t){case"focus":case"blur":Ee=null;break;case"dragenter":case"dragleave":Se=null;break;case"mouseover":case"mouseout":we=null;break;case"pointerover":case"pointerout":_e.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Te.delete(e.pointerId)}}function Oe(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=Pe(e,n,r,i,o),null!==e&&(null!==(e=Pn(e))&&ge(e)),t):(t.eventSystemFlags|=r,t)}function Ce(t){var e=In(t.target);if(null!==e){var n=Jt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=te(n)))return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){ve(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Re(t){if(null!==t.blockedOn)return!1;var e=Ze(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=Pn(e);return null!==n&&ge(n),t.blockedOn=e,!1}return!0}function De(t,e,n){Re(t)&&n.delete(e)}function ke(){for(ye=!1;0<be.length;){var t=be[0];if(null!==t.blockedOn){null!==(t=Pn(t.blockedOn))&&me(t);break}var e=Ze(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:be.shift()}null!==Ee&&Re(Ee)&&(Ee=null),null!==Se&&Re(Se)&&(Se=null),null!==we&&Re(we)&&(we=null),_e.forEach(De),Te.forEach(De)}function Le(t,e){t.blockedOn===e&&(t.blockedOn=null,ye||(ye=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,ke)))}function Ne(t){function e(e){return Le(e,t)}if(0<be.length){Le(be[0],t);for(var n=1;n<be.length;n++){var r=be[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Ee&&Le(Ee,t),null!==Se&&Le(Se,t),null!==we&&Le(we,t),_e.forEach(e),Te.forEach(e),n=0;n<xe.length;n++)(r=xe[n]).blockedOn===t&&(r.blockedOn=null);for(;0<xe.length&&null===(n=xe[0]).blockedOn;)Ce(n),null===n.blockedOn&&xe.shift()}var je={},Fe=new Map,Ue=new Map,Be=["abort","abort",Yt,"animationEnd",qt,"animationIteration",$t,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Kt,"transitionEnd","waiting","waiting"];function He(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:e},Ue.set(r,e),Fe.set(r,o),je[i]=o}}He("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),He("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),He(Be,2);for(var Ge="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ze=0;ze<Ge.length;ze++)Ue.set(Ge[ze],0);var We=o.unstable_UserBlockingPriority,Ve=o.unstable_runWithPriority,Ye=!0;function qe(t,e){$e(e,t,!1)}function $e(t,e,n){var r=Ue.get(e);switch(void 0===r?2:r){case 0:r=Ke.bind(null,e,1,t);break;case 1:r=Qe.bind(null,e,1,t);break;default:r=Xe.bind(null,e,1,t)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function Ke(t,e,n,r){F||N();var i=Xe,o=F;F=!0;try{L(i,t,e,n,r)}finally{(F=o)||B()}}function Qe(t,e,n,r){Ve(We,Xe.bind(null,t,e,n,r))}function Xe(t,e,n,r){if(Ye)if(0<be.length&&-1<Ae.indexOf(t))t=Pe(null,t,e,n,r),be.push(t);else{var i=Ze(t,e,n,r);if(null===i)Me(t,r);else if(-1<Ae.indexOf(t))t=Pe(i,t,e,n,r),be.push(t);else if(!function(t,e,n,r,i){switch(e){case"focus":return Ee=Oe(Ee,t,e,n,r,i),!0;case"dragenter":return Se=Oe(Se,t,e,n,r,i),!0;case"mouseover":return we=Oe(we,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return _e.set(o,Oe(_e.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Te.set(o,Oe(Te.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r)){Me(t,r),t=he(t,r,null,e);try{H(de,t)}finally{fe(t)}}}}function Ze(t,e,n,r){if(null!==(n=In(n=ue(r)))){var i=Jt(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=te(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}t=he(t,r,n,e);try{H(de,t)}finally{fe(t)}return null}var Je={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function en(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||Je.hasOwnProperty(t)&&Je[t]?(""+e).trim():e+"px"}function nn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=en(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(Je).forEach((function(t){tn.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Je[e]=Je[t]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(t,e){if(e){if(rn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(a(62,""))}}function an(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=kt;function un(t,e){var n=Zt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=x[e];for(var r=0;r<e.length;r++)pe(e[r],t,n)}function cn(){}function ln(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function fn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hn(t,e){var n,r=fn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=fn(r)}}function dn(){for(var t=window,e=ln();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=ln((t=e.contentWindow).document)}return e}function pn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var mn=null,gn=null;function vn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function yn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var bn="function"==typeof setTimeout?setTimeout:void 0,En="function"==typeof clearTimeout?clearTimeout:void 0;function Sn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function wn(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var _n=Math.random().toString(36).slice(2),Tn="__reactInternalInstance$"+_n,xn="__reactEventHandlers$"+_n,An="__reactContainere$"+_n;function In(t){var e=t[Tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[An]||n[Tn]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=wn(t);null!==t;){if(n=t[Tn])return n;t=wn(t)}return e}n=(t=n).parentNode}return null}function Pn(t){return!(t=t[Tn]||t[An])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Mn(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function On(t){return t[xn]||null}function Cn(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Rn(t,e){var n=t.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(a(231,e,typeof n));return n}function Dn(t,e,n){(e=Rn(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function kn(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=Cn(e);for(e=n.length;0<e--;)Dn(n[e],"captured",t);for(e=0;e<n.length;e++)Dn(n[e],"bubbled",t)}}function Ln(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=Rn(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Nn(t){t&&t.dispatchConfig.registrationName&&Ln(t._targetInst,null,t)}function jn(t){ie(t,kn)}var Fn=null,Un=null,Bn=null;function Hn(){if(Bn)return Bn;var t,e,n=Un,r=n.length,i="value"in Fn?Fn.value:Fn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return Bn=i.slice(t,1<e?1-e:void 0)}function Gn(){return!0}function zn(){return!1}function Wn(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Gn:zn,this.isPropagationStopped=zn,this}function Vn(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function Yn(t){if(!(t instanceof this))throw Error(a(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function qn(t){t.eventPool=[],t.getPooled=Vn,t.release=Yn}i(Wn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){this.isPersistent=Gn},isPersistent:zn,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=zn,this._dispatchInstances=this._dispatchListeners=null}}),Wn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Wn.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,qn(n),n},qn(Wn);var $n=Wn.extend({data:null}),Kn=Wn.extend({data:null}),Qn=[9,13,27,32],Xn=I&&"CompositionEvent"in window,Zn=null;I&&"documentMode"in document&&(Zn=document.documentMode);var Jn=I&&"TextEvent"in window&&!Zn,tr=I&&(!Xn||Zn&&8<Zn&&11>=Zn),er=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(t,e){switch(t){case"keyup":return-1!==Qn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function or(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var ar=!1;var sr={eventTypes:nr,extractEvents:function(t,e,n,r){var i;if(Xn)t:{switch(t){case"compositionstart":var o=nr.compositionStart;break t;case"compositionend":o=nr.compositionEnd;break t;case"compositionupdate":o=nr.compositionUpdate;break t}o=void 0}else ar?ir(t,n)&&(o=nr.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=nr.compositionStart);return o?(tr&&"ko"!==n.locale&&(ar||o!==nr.compositionStart?o===nr.compositionEnd&&ar&&(i=Hn()):(Un="value"in(Fn=r)?Fn.value:Fn.textContent,ar=!0)),o=$n.getPooled(o,e,n,r),i?o.data=i:null!==(i=or(n))&&(o.data=i),jn(o),i=o):i=null,(t=Jn?function(t,e){switch(t){case"compositionend":return or(e);case"keypress":return 32!==e.which?null:(rr=!0,er);case"textInput":return(t=e.data)===er&&rr?null:t;default:return null}}(t,n):function(t,e){if(ar)return"compositionend"===t||!Xn&&ir(t,e)?(t=Hn(),Bn=Un=Fn=null,ar=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tr&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=Kn.getPooled(nr.beforeInput,e,n,r)).data=t,jn(e)):e=null,null===i?e:null===e?i:[i,e]}},ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!ur[t.type]:"textarea"===e}var lr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function fr(t,e,n){return(t=Wn.getPooled(lr.change,t,e,n)).type="change",R(n),jn(t),t}var hr=null,dr=null;function pr(t){se(t)}function mr(t){if(St(Mn(t)))return t}function gr(t,e){if("change"===t)return e}var vr=!1;function yr(){hr&&(hr.detachEvent("onpropertychange",br),dr=hr=null)}function br(t){if("value"===t.propertyName&&mr(dr))if(t=fr(dr,t,ue(t)),F)se(t);else{F=!0;try{k(pr,t)}finally{F=!1,B()}}}function Er(t,e,n){"focus"===t?(yr(),dr=n,(hr=e).attachEvent("onpropertychange",br)):"blur"===t&&yr()}function Sr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return mr(dr)}function wr(t,e){if("click"===t)return mr(e)}function _r(t,e){if("input"===t||"change"===t)return mr(e)}I&&(vr=ce("input")&&(!document.documentMode||9<document.documentMode));var Tr={eventTypes:lr,_isInputEventSupported:vr,extractEvents:function(t,e,n,r){var i=e?Mn(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=gr;else if(cr(i))if(vr)a=_r;else{a=Sr;var s=Er}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=wr);if(a&&(a=a(t,e)))return fr(a,n,r);s&&s(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&It(i,"number",i.value)}},xr=Wn.extend({view:null,detail:null}),Ar={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ir(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ar[t])&&!!e[t]}function Pr(){return Ir}var Mr=0,Or=0,Cr=!1,Rr=!1,Dr=xr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Pr,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Mr;return Mr=t.screenX,Cr?"mousemove"===t.type?t.screenX-e:0:(Cr=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Or;return Or=t.screenY,Rr?"mousemove"===t.type?t.screenY-e:0:(Rr=!0,0)}}),kr=Dr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Lr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Nr={eventTypes:Lr,extractEvents:function(t,e,n,r,i){var o="mouseover"===t||"pointerover"===t,a="mouseout"===t||"pointerout"===t;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=e,null!==(e=(e=n.relatedTarget||n.toElement)?In(e):null)&&(e!==Jt(e)||5!==e.tag&&6!==e.tag)&&(e=null)):a=null;if(a===e)return null;if("mouseout"===t||"mouseover"===t)var s=Dr,u=Lr.mouseLeave,c=Lr.mouseEnter,l="mouse";else"pointerout"!==t&&"pointerover"!==t||(s=kr,u=Lr.pointerLeave,c=Lr.pointerEnter,l="pointer");if(t=null==a?o:Mn(a),o=null==e?o:Mn(e),(u=s.getPooled(u,a,n,r)).type=l+"leave",u.target=t,u.relatedTarget=o,(n=s.getPooled(c,e,n,r)).type=l+"enter",n.target=o,n.relatedTarget=t,l=e,(r=a)&&l)t:{for(c=l,a=0,t=s=r;t;t=Cn(t))a++;for(t=0,e=c;e;e=Cn(e))t++;for(;0<a-t;)s=Cn(s),a--;for(;0<t-a;)c=Cn(c),t--;for(;a--;){if(s===c||s===c.alternate)break t;s=Cn(s),c=Cn(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(a=r.alternate)||a!==c);)s.push(r),r=Cn(r);for(r=[];l&&l!==c&&(null===(a=l.alternate)||a!==c);)r.push(l),l=Cn(l);for(l=0;l<s.length;l++)Ln(s[l],"bubbled",u);for(l=r.length;0<l--;)Ln(r[l],"captured",n);return 0==(64&i)?[u]:[u,n]}};var jr="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},Fr=Object.prototype.hasOwnProperty;function Ur(t,e){if(jr(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Fr.call(e,n[r])||!jr(t[n[r]],e[n[r]]))return!1;return!0}var Br=I&&"documentMode"in document&&11>=document.documentMode,Hr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Gr=null,zr=null,Wr=null,Vr=!1;function Yr(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Vr||null==Gr||Gr!==ln(n)?null:("selectionStart"in(n=Gr)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Wr&&Ur(Wr,n)?null:(Wr=n,(t=Wn.getPooled(Hr.select,zr,t,e)).type="select",t.target=Gr,jn(t),t))}var qr={eventTypes:Hr,extractEvents:function(t,e,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){t:{i=Zt(i),o=x.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break t}i=!0}o=!i}if(o)return null;switch(i=e?Mn(e):window,t){case"focus":(cr(i)||"true"===i.contentEditable)&&(Gr=i,zr=e,Wr=null);break;case"blur":Wr=zr=Gr=null;break;case"mousedown":Vr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Vr=!1,Yr(n,r);case"selectionchange":if(Br)break;case"keydown":case"keyup":return Yr(n,r)}return null}},$r=Wn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Kr=Wn.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qr=xr.extend({relatedTarget:null});function Xr(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var Zr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ti=xr.extend({key:function(t){if(t.key){var e=Zr[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Xr(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Jr[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Pr,charCode:function(t){return"keypress"===t.type?Xr(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Xr(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),ei=Dr.extend({dataTransfer:null}),ni=xr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Pr}),ri=Wn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Dr.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:je,extractEvents:function(t,e,n,r){var i=Fe.get(t);if(!i)return null;switch(t){case"keypress":if(0===Xr(n))return null;case"keydown":case"keyup":t=ti;break;case"blur":case"focus":t=Qr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=ei;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=ni;break;case Yt:case qt:case $t:t=$r;break;case Kt:t=ri;break;case"scroll":t=xr;break;case"wheel":t=ii;break;case"copy":case"cut":case"paste":t=Kr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=kr;break;default:t=Wn}return jn(e=t.getPooled(i,e,n,r)),e}};if(y)throw Error(a(101));y=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),E(),p=On,m=Pn,g=Mn,A({SimpleEventPlugin:oi,EnterLeaveEventPlugin:Nr,ChangeEventPlugin:Tr,SelectEventPlugin:qr,BeforeInputEventPlugin:sr});var ai=[],si=-1;function ui(t){0>si||(t.current=ai[si],ai[si]=null,si--)}function ci(t,e){si++,ai[si]=t.current,t.current=e}var li={},fi={current:li},hi={current:!1},di=li;function pi(t,e){var n=t.type.contextTypes;if(!n)return li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function mi(t){return null!=(t=t.childContextTypes)}function gi(){ui(hi),ui(fi)}function vi(t,e,n){if(fi.current!==li)throw Error(a(168));ci(fi,e),ci(hi,n)}function yi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,gt(e)||"Unknown",o));return i({},n,{},r)}function bi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||li,di=fi.current,ci(fi,t),ci(hi,hi.current),!0}function Ei(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=yi(t,e,di),r.__reactInternalMemoizedMergedChildContext=t,ui(hi),ui(fi),ci(fi,t)):ui(hi),ci(hi,n)}var Si=o.unstable_runWithPriority,wi=o.unstable_scheduleCallback,_i=o.unstable_cancelCallback,Ti=o.unstable_requestPaint,xi=o.unstable_now,Ai=o.unstable_getCurrentPriorityLevel,Ii=o.unstable_ImmediatePriority,Pi=o.unstable_UserBlockingPriority,Mi=o.unstable_NormalPriority,Oi=o.unstable_LowPriority,Ci=o.unstable_IdlePriority,Ri={},Di=o.unstable_shouldYield,ki=void 0!==Ti?Ti:function(){},Li=null,Ni=null,ji=!1,Fi=xi(),Ui=1e4>Fi?xi:function(){return xi()-Fi};function Bi(){switch(Ai()){case Ii:return 99;case Pi:return 98;case Mi:return 97;case Oi:return 96;case Ci:return 95;default:throw Error(a(332))}}function Hi(t){switch(t){case 99:return Ii;case 98:return Pi;case 97:return Mi;case 96:return Oi;case 95:return Ci;default:throw Error(a(332))}}function Gi(t,e){return t=Hi(t),Si(t,e)}function zi(t,e,n){return t=Hi(t),wi(t,e,n)}function Wi(t){return null===Li?(Li=[t],Ni=wi(Ii,Yi)):Li.push(t),Ri}function Vi(){if(null!==Ni){var t=Ni;Ni=null,_i(t)}Yi()}function Yi(){if(!ji&&null!==Li){ji=!0;var t=0;try{var e=Li;Gi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Li=null}catch(e){throw null!==Li&&(Li=Li.slice(t+1)),wi(Ii,Vi),e}finally{ji=!1}}}function qi(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function $i(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Ki={current:null},Qi=null,Xi=null,Zi=null;function Ji(){Zi=Xi=Qi=null}function to(t){var e=Ki.current;ui(Ki),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function no(t,e){Qi=t,Zi=Xi=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Oa=!0),t.firstContext=null)}function ro(t,e){if(Zi!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||(Zi=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Xi){if(null===Qi)throw Error(a(308));Xi=e,Qi.dependencies={expirationTime:0,firstContext:e,responders:null}}else Xi=Xi.next=e;return t._currentValue}var io=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ao(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function so(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function uo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function co(t,e){var n=t.alternate;null!==n&&ao(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function lo(t,e,n,r){var o=t.updateQueue;io=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var u=a.next;a.next=s.next,s.next=u}a=s,o.shared.pending=null,null!==(u=t.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=s))}if(null!==a){u=a.next;var c=o.baseState,l=0,f=null,h=null,d=null;if(null!==u)for(var p=u;;){if((s=p.expirationTime)<r){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===d?(h=d=m,f=c):d=d.next=m,s>l&&(l=s)}else{null!==d&&(d=d.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),ou(s,p.suspenseConfig);t:{var g=t,v=p;switch(s=e,m=n,v.tag){case 1:if("function"==typeof(g=v.payload)){c=g.call(m,c,s);break t}c=g;break t;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null==(s="function"==typeof(g=v.payload)?g.call(m,c,s):g))break t;c=i({},c,s);break t;case 2:io=!0}}null!==p.callback&&(t.effectTag|=32,null===(s=o.effects)?o.effects=[p]:s.push(p))}if(null===(p=p.next)||p===u){if(null===(s=o.shared.pending))break;p=a.next=s.next,s.next=u,o.baseQueue=a=s,o.shared.pending=null}}null===d?f=c:d.next=h,o.baseState=f,o.baseQueue=d,au(l),t.expirationTime=l,t.memoizedState=c}}function fo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!=typeof r)throw Error(a(191,r));r.call(i)}}}var ho=Q.ReactCurrentBatchConfig,po=(new r.Component).refs;function mo(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:i({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var go={isMounted:function(t){return!!(t=t._reactInternalFiber)&&Jt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=Ys(),i=ho.suspense;(i=so(r=qs(r,t,i),i)).payload=e,null!=n&&(i.callback=n),uo(t,i),$s(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=Ys(),i=ho.suspense;(i=so(r=qs(r,t,i),i)).tag=1,i.payload=e,null!=n&&(i.callback=n),uo(t,i),$s(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Ys(),r=ho.suspense;(r=so(n=qs(n,t,r),r)).tag=2,null!=e&&(r.callback=e),uo(t,r),$s(t,n)}};function vo(t,e,n,r,i,o,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!Ur(n,r)||!Ur(i,o))}function yo(t,e,n){var r=!1,i=li,o=e.contextType;return"object"==typeof o&&null!==o?o=ro(o):(i=mi(e)?di:fi.current,o=(r=null!=(r=e.contextTypes))?pi(t,i):li),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=go,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function bo(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&go.enqueueReplaceState(e,e.state,null)}function Eo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=po,oo(t);var o=e.contextType;"object"==typeof o&&null!==o?i.context=ro(o):(o=mi(e)?di:fi.current,i.context=pi(t,o)),lo(t,n,i,r),i.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(mo(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&go.enqueueReplaceState(i,i.state,null),lo(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.effectTag|=4)}var So=Array.isArray;function wo(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===po&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!=typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function _o(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function To(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Au(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=Mu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=wo(t,e,n),r.return=t,r):((r=Iu(n.type,n.key,n.props,null,t.mode,r)).ref=wo(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Ou(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function f(t,e,n,r,o){return null===e||7!==e.tag?((e=Pu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function h(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=Mu(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case tt:return(n=Iu(e.type,e.key,e.props,null,t.mode,n)).ref=wo(t,null,e),n.return=t,n;case et:return(e=Ou(e,t.mode,n)).return=t,e}if(So(e)||mt(e))return(e=Pu(e,t.mode,n,null)).return=t,e;_o(t,e)}return null}function d(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case tt:return n.key===i?n.type===nt?f(t,e,n.props.children,r,i):c(t,e,n,r):null;case et:return n.key===i?l(t,e,n,r):null}if(So(n)||mt(n))return null!==i?null:f(t,e,n,r,null);_o(t,n)}return null}function p(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case tt:return t=t.get(null===r.key?n:r.key)||null,r.type===nt?f(e,t,r.props.children,i,r.key):c(e,t,r,i);case et:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(So(r)||mt(r))return f(e,t=t.get(n)||null,r,i,null);_o(e,r)}return null}function m(i,a,s,u){for(var c=null,l=null,f=a,m=a=0,g=null;null!==f&&m<s.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=d(i,f,s[m],u);if(null===v){null===f&&(f=g);break}t&&f&&null===v.alternate&&e(i,f),a=o(v,a,m),null===l?c=v:l.sibling=v,l=v,f=g}if(m===s.length)return n(i,f),c;if(null===f){for(;m<s.length;m++)null!==(f=h(i,s[m],u))&&(a=o(f,a,m),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);m<s.length;m++)null!==(g=p(f,i,m,s[m],u))&&(t&&null!==g.alternate&&f.delete(null===g.key?m:g.key),a=o(g,a,m),null===l?c=g:l.sibling=g,l=g);return t&&f.forEach((function(t){return e(i,t)})),c}function g(i,s,u,c){var l=mt(u);if("function"!=typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,m=s,g=s=0,v=null,y=u.next();null!==m&&!y.done;g++,y=u.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=d(i,m,y.value,c);if(null===b){null===m&&(m=v);break}t&&m&&null===b.alternate&&e(i,m),s=o(b,s,g),null===f?l=b:f.sibling=b,f=b,m=v}if(y.done)return n(i,m),l;if(null===m){for(;!y.done;g++,y=u.next())null!==(y=h(i,y.value,c))&&(s=o(y,s,g),null===f?l=y:f.sibling=y,f=y);return l}for(m=r(i,m);!y.done;g++,y=u.next())null!==(y=p(m,i,g,y.value,c))&&(t&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=o(y,s,g),null===f?l=y:f.sibling=y,f=y);return t&&m.forEach((function(t){return e(i,t)})),l}return function(t,r,o,u){var c="object"==typeof o&&null!==o&&o.type===nt&&null===o.key;c&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case tt:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===nt){n(t,c.sibling),(r=i(c,o.props.children)).return=t,t=r;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),(r=i(c,o.props)).ref=wo(t,c,o),r.return=t,t=r;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===nt?((r=Pu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=Iu(o.type,o.key,o.props,null,t.mode,u)).ref=wo(t,r,o),u.return=t,t=u)}return s(t);case et:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Ou(o,t.mode,u)).return=t,t=r}return s(t)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=Mu(o,t.mode,u)).return=t,t=r),s(t);if(So(o))return m(t,r,o,u);if(mt(o))return g(t,r,o,u);if(l&&_o(t,o),void 0===o&&!c)switch(t.tag){case 1:case 0:throw t=t.type,Error(a(152,t.displayName||t.name||"Component"))}return n(t,r)}}var xo=To(!0),Ao=To(!1),Io={},Po={current:Io},Mo={current:Io},Oo={current:Io};function Co(t){if(t===Io)throw Error(a(174));return t}function Ro(t,e){switch(ci(Oo,e),ci(Mo,t),ci(Po,Io),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jt(null,"");break;default:e=jt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ui(Po),ci(Po,e)}function Do(){ui(Po),ui(Mo),ui(Oo)}function ko(t){Co(Oo.current);var e=Co(Po.current),n=jt(e,t.type);e!==n&&(ci(Mo,t),ci(Po,n))}function Lo(t){Mo.current===t&&(ui(Po),ui(Mo))}var No={current:0};function jo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Fo(t,e){return{responder:t,props:e}}var Uo=Q.ReactCurrentDispatcher,Bo=Q.ReactCurrentBatchConfig,Ho=0,Go=null,zo=null,Wo=null,Vo=!1;function Yo(){throw Error(a(321))}function qo(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jr(t[n],e[n]))return!1;return!0}function $o(t,e,n,r,i,o){if(Ho=o,Go=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,Uo.current=null===t||null===t.memoizedState?va:ya,t=n(r,i),e.expirationTime===Ho){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Wo=zo=null,e.updateQueue=null,Uo.current=ba,t=n(r,i)}while(e.expirationTime===Ho)}if(Uo.current=ga,e=null!==zo&&null!==zo.next,Ho=0,Wo=zo=Go=null,Vo=!1,e)throw Error(a(300));return t}function Ko(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wo?Go.memoizedState=Wo=t:Wo=Wo.next=t,Wo}function Qo(){if(null===zo){var t=Go.alternate;t=null!==t?t.memoizedState:null}else t=zo.next;var e=null===Wo?Go.memoizedState:Wo.next;if(null!==e)Wo=e,zo=t;else{if(null===t)throw Error(a(310));t={memoizedState:(zo=t).memoizedState,baseState:zo.baseState,baseQueue:zo.baseQueue,queue:zo.queue,next:null},null===Wo?Go.memoizedState=Wo=t:Wo=Wo.next=t}return Wo}function Xo(t,e){return"function"==typeof e?e(t):e}function Zo(t){var e=Qo(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=zo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.expirationTime;if(l<Ho){var f={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,o=r):u=u.next=f,l>Go.expirationTime&&(Go.expirationTime=l,au(l))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),ou(l,c.suspenseConfig),r=c.eagerReducer===t?c.eagerState:t(r,c.action);c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,jr(r,e.memoizedState)||(Oa=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function Jo(t){var e=Qo(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);jr(o,e.memoizedState)||(Oa=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ta(t){var e=Ko();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:t}).dispatch=ma.bind(null,Go,t),[e.memoizedState,t]}function ea(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Go.updateQueue)?(e={lastEffect:null},Go.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function na(){return Qo().memoizedState}function ra(t,e,n,r){var i=Ko();Go.effectTag|=t,i.memoizedState=ea(1|e,n,void 0,void 0===r?null:r)}function ia(t,e,n,r){var i=Qo();r=void 0===r?null:r;var o=void 0;if(null!==zo){var a=zo.memoizedState;if(o=a.destroy,null!==r&&qo(r,a.deps))return void ea(e,n,o,r)}Go.effectTag|=t,i.memoizedState=ea(1|e,n,o,r)}function oa(t,e){return ra(516,4,t,e)}function aa(t,e){return ia(516,4,t,e)}function sa(t,e){return ia(4,2,t,e)}function ua(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ca(t,e,n){return n=null!=n?n.concat([t]):null,ia(4,2,ua.bind(null,e,t),n)}function la(){}function fa(t,e){return Ko().memoizedState=[t,void 0===e?null:e],t}function ha(t,e){var n=Qo();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&qo(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function da(t,e){var n=Qo();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&qo(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pa(t,e,n){var r=Bi();Gi(98>r?98:r,(function(){t(!0)})),Gi(97<r?97:r,(function(){var r=Bo.suspense;Bo.suspense=void 0===e?null:e;try{t(!1),n()}finally{Bo.suspense=r}}))}function ma(t,e,n){var r=Ys(),i=ho.suspense;i={expirationTime:r=qs(r,t,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),e.pending=i,o=t.alternate,t===Go||null!==o&&o===Go)Vo=!0,i.expirationTime=Ho,Go.expirationTime=Ho;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,jr(s,a))return}catch(t){}$s(t,r)}}var ga={readContext:ro,useCallback:Yo,useContext:Yo,useEffect:Yo,useImperativeHandle:Yo,useLayoutEffect:Yo,useMemo:Yo,useReducer:Yo,useRef:Yo,useState:Yo,useDebugValue:Yo,useResponder:Yo,useDeferredValue:Yo,useTransition:Yo},va={readContext:ro,useCallback:fa,useContext:ro,useEffect:oa,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,ra(4,2,ua.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ra(4,2,t,e)},useMemo:function(t,e){var n=Ko();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ko();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=ma.bind(null,Go,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Ko().memoizedState=t},useState:ta,useDebugValue:la,useResponder:Fo,useDeferredValue:function(t,e){var n=ta(t),r=n[0],i=n[1];return oa((function(){var n=Bo.suspense;Bo.suspense=void 0===e?null:e;try{i(t)}finally{Bo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ta(!1),n=e[0];return e=e[1],[fa(pa.bind(null,e,t),[e,t]),n]}},ya={readContext:ro,useCallback:ha,useContext:ro,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:da,useReducer:Zo,useRef:na,useState:function(){return Zo(Xo)},useDebugValue:la,useResponder:Fo,useDeferredValue:function(t,e){var n=Zo(Xo),r=n[0],i=n[1];return aa((function(){var n=Bo.suspense;Bo.suspense=void 0===e?null:e;try{i(t)}finally{Bo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Zo(Xo),n=e[0];return e=e[1],[ha(pa.bind(null,e,t),[e,t]),n]}},ba={readContext:ro,useCallback:ha,useContext:ro,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:da,useReducer:Jo,useRef:na,useState:function(){return Jo(Xo)},useDebugValue:la,useResponder:Fo,useDeferredValue:function(t,e){var n=Jo(Xo),r=n[0],i=n[1];return aa((function(){var n=Bo.suspense;Bo.suspense=void 0===e?null:e;try{i(t)}finally{Bo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Jo(Xo),n=e[0];return e=e[1],[ha(pa.bind(null,e,t),[e,t]),n]}},Ea=null,Sa=null,wa=!1;function _a(t,e){var n=Tu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Ta(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function xa(t){if(wa){var e=Sa;if(e){var n=e;if(!Ta(t,e)){if(!(e=Sn(n.nextSibling))||!Ta(t,e))return t.effectTag=-1025&t.effectTag|2,wa=!1,void(Ea=t);_a(Ea,n)}Ea=t,Sa=Sn(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,wa=!1,Ea=t}}function Aa(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Ea=t}function Ia(t){if(t!==Ea)return!1;if(!wa)return Aa(t),wa=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!yn(e,t.memoizedProps))for(e=Sa;e;)_a(t,e),e=Sn(e.nextSibling);if(Aa(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Sa=Sn(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}Sa=null}}else Sa=Ea?Sn(t.stateNode.nextSibling):null;return!0}function Pa(){Sa=Ea=null,wa=!1}var Ma=Q.ReactCurrentOwner,Oa=!1;function Ca(t,e,n,r){e.child=null===t?Ao(e,null,n,r):xo(e,t.child,n,r)}function Ra(t,e,n,r,i){n=n.render;var o=e.ref;return no(e,i),r=$o(t,e,n,r,o,i),null===t||Oa?(e.effectTag|=1,Ca(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),$a(t,e,i))}function Da(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!=typeof a||xu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Iu(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,ka(t,e,a,r,i,o))}return a=t.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:Ur)(i,r)&&t.ref===e.ref)?$a(t,e,o):(e.effectTag|=1,(t=Au(a,r)).ref=e.ref,t.return=e,e.child=t)}function ka(t,e,n,r,i,o){return null!==t&&Ur(t.memoizedProps,r)&&t.ref===e.ref&&(Oa=!1,i<o)?(e.expirationTime=t.expirationTime,$a(t,e,o)):Na(t,e,n,r,o)}function La(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Na(t,e,n,r,i){var o=mi(n)?di:fi.current;return o=pi(e,o),no(e,i),n=$o(t,e,n,r,o,i),null===t||Oa?(e.effectTag|=1,Ca(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),$a(t,e,i))}function ja(t,e,n,r,i){if(mi(n)){var o=!0;bi(e)}else o=!1;if(no(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),yo(e,n,r),Eo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"==typeof c&&null!==c?c=ro(c):c=pi(e,c=mi(n)?di:fi.current);var l=n.getDerivedStateFromProps,f="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==c)&&bo(e,a,r,c),io=!1;var h=e.memoizedState;a.state=h,lo(e,r,a,i),u=e.memoizedState,s!==r||h!==u||hi.current||io?("function"==typeof l&&(mo(e,n,l,r),u=e.memoizedState),(s=io||vo(e,n,s,r,h,u,c))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.effectTag|=4)):("function"==typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"==typeof a.componentDidMount&&(e.effectTag|=4),r=!1)}else a=e.stateNode,ao(t,e),s=e.memoizedProps,a.props=e.type===e.elementType?s:$i(e.type,s),u=a.context,"object"==typeof(c=n.contextType)&&null!==c?c=ro(c):c=pi(e,c=mi(n)?di:fi.current),(f="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==c)&&bo(e,a,r,c),io=!1,u=e.memoizedState,a.state=u,lo(e,r,a,i),h=e.memoizedState,s!==r||u!==h||hi.current||io?("function"==typeof l&&(mo(e,n,l,r),h=e.memoizedState),(l=io||vo(e,n,s,r,u,h,c))?(f||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,c)),"function"==typeof a.componentDidUpdate&&(e.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=c,r=l):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return Fa(t,e,n,r,o,i)}function Fa(t,e,n,r,i,o){La(t,e);var a=0!=(64&e.effectTag);if(!r&&!a)return i&&Ei(e,n,!1),$a(t,e,o);r=e.stateNode,Ma.current=e;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=xo(e,t.child,null,o),e.child=xo(e,null,s,o)):Ca(t,e,s,o),e.memoizedState=r.state,i&&Ei(e,n,!0),e.child}function Ua(t){var e=t.stateNode;e.pendingContext?vi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&vi(0,e.context,!1),Ro(t,e.containerInfo)}var Ba,Ha,Ga,za={dehydrated:null,retryTime:0};function Wa(t,e,n){var r,i=e.mode,o=e.pendingProps,a=No.current,s=!1;if((r=0!=(64&e.effectTag))||(r=0!=(2&a)&&(null===t||null!==t.memoizedState)),r?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),ci(No,1&a),null===t){if(void 0!==o.fallback&&xa(e),s){if(s=o.fallback,(o=Pu(null,i,0,null)).return=e,0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Pu(s,i,n,null)).return=e,o.sibling=n,e.memoizedState=za,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=Ao(e,null,i,n)}if(null!==t.memoizedState){if(i=(t=t.child).sibling,s){if(o=o.fallback,(n=Au(t,t.pendingProps)).return=e,0==(2&e.mode)&&(s=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Au(i,o)).return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=za,e.child=n,i}return n=xo(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,s){if(s=o.fallback,(o=Pu(null,i,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Pu(s,i,n,null)).return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=za,e.child=o,n}return e.memoizedState=null,e.child=xo(e,t,o.children,n)}function Va(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),eo(t.return,e)}function Ya(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function qa(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ca(t,e,r.children,n),0!=(2&(r=No.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!=(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Va(t,n);else if(19===t.tag)Va(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ci(No,r),0==(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===jo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ya(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===jo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ya(e,!0,n,null,o,e.lastEffect);break;case"together":Ya(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function $a(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&au(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Au(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Au(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ka(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qa(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return mi(e.type)&&gi(),null;case 3:return Do(),ui(hi),ui(fi),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!Ia(e)||(e.effectTag|=4),null;case 5:Lo(e),n=Co(Oo.current);var o=e.type;if(null!==t&&null!=e.stateNode)Ha(t,e,o,r,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=Co(Po.current),Ia(e)){r=e.stateNode,o=e.type;var s=e.memoizedProps;switch(r[Tn]=e,r[xn]=s,o){case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(t=0;t<Qt.length;t++)qe(Qt[t],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"form":qe("reset",r),qe("submit",r);break;case"details":qe("toggle",r);break;case"input":_t(r,s),qe("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},qe("invalid",r),un(n,"onChange");break;case"textarea":Ct(r,s),qe("invalid",r),un(n,"onChange")}for(var u in on(o,s),t=null,s)if(s.hasOwnProperty(u)){var c=s[u];"children"===u?"string"==typeof c?r.textContent!==c&&(t=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(t=["children",""+c]):T.hasOwnProperty(u)&&null!=c&&un(n,u)}switch(o){case"input":Et(r),At(r,s,!0);break;case"textarea":Et(r),Dt(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=cn)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,t===sn&&(t=Nt(o)),t===sn?"script"===o?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof r.is?t=u.createElement(o,{is:r.is}):(t=u.createElement(o),"select"===o&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,o),t[Tn]=e,t[xn]=r,Ba(t,e),e.stateNode=t,u=an(o,r),o){case"iframe":case"object":case"embed":qe("load",t),c=r;break;case"video":case"audio":for(c=0;c<Qt.length;c++)qe(Qt[c],t);c=r;break;case"source":qe("error",t),c=r;break;case"img":case"image":case"link":qe("error",t),qe("load",t),c=r;break;case"form":qe("reset",t),qe("submit",t),c=r;break;case"details":qe("toggle",t),c=r;break;case"input":_t(t,r),c=wt(t,r),qe("invalid",t),un(n,"onChange");break;case"option":c=Pt(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),qe("invalid",t),un(n,"onChange");break;case"textarea":Ct(t,r),c=Ot(t,r),qe("invalid",t),un(n,"onChange");break;default:c=r}on(o,c);var l=c;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?nn(t,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&Ut(t,f):"children"===s?"string"==typeof f?("textarea"!==o||""!==f)&&Bt(t,f):"number"==typeof f&&Bt(t,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(T.hasOwnProperty(s)?null!=f&&un(n,s):null!=f&&X(t,s,f,u))}switch(o){case"input":Et(t),At(t,r,!1);break;case"textarea":Et(t),Dt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+yt(r.value));break;case"select":t.multiple=!!r.multiple,null!=(n=r.value)?Mt(t,!!r.multiple,n,!1):null!=r.defaultValue&&Mt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof c.onClick&&(t.onclick=cn)}vn(o,r)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Ga(0,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(a(166));n=Co(Oo.current),Co(Po.current),Ia(e)?(n=e.stateNode,r=e.memoizedProps,n[Tn]=e,n.nodeValue!==r&&(e.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Tn]=e,e.stateNode=n)}return null;case 13:return ui(No),r=e.memoizedState,0!=(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==r,r=!1,null===t?void 0!==e.memoizedProps.fallback&&Ia(e):(r=null!==(o=t.memoizedState),n||null===o||null!==(o=t.child.sibling)&&(null!==(s=e.firstEffect)?(e.firstEffect=o,o.nextEffect=s):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!=(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&No.current)?Is===Es&&(Is=Ss):(Is!==Es&&Is!==Ss||(Is=ws),0!==Rs&&null!==Ts&&(Du(Ts,As),ku(Ts,Rs)))),(n||r)&&(e.effectTag|=4),null);case 4:return Do(),null;case 10:return to(e),null;case 17:return mi(e.type)&&gi(),null;case 19:if(ui(No),null===(r=e.memoizedState))return null;if(o=0!=(64&e.effectTag),null===(s=r.rendering)){if(o)Ka(r,!1);else if(Is!==Es||null!==t&&0!=(64&t.effectTag))for(s=e.child;null!==s;){if(null!==(t=jo(s))){for(e.effectTag|=64,Ka(r,!1),null!==(o=t.updateQueue)&&(e.updateQueue=o,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=e.child;null!==r;)s=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(t=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return ci(No,1&No.current|2),e.child}s=s.sibling}}else{if(!o)if(null!==(t=jo(s))){if(e.effectTag|=64,o=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),Ka(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Ui()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,o=!0,Ka(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(s.sibling=e.child,e.child=s):(null!==(n=r.last)?n.sibling=s:e.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Ui()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Ui(),n.sibling=null,e=No.current,ci(No,o?1&e|2:1&e),n):null}throw Error(a(156,e.tag))}function Xa(t){switch(t.tag){case 1:mi(t.type)&&gi();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Do(),ui(hi),ui(fi),0!=(64&(e=t.effectTag)))throw Error(a(285));return t.effectTag=-4097&e|64,t;case 5:return Lo(t),null;case 13:return ui(No),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return ui(No),null;case 4:return Do(),null;case 10:return to(t),null;default:return null}}function Za(t,e){return{value:t,source:e,stack:vt(e)}}Ba=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ha=function(t,e,n,r,o){var a=t.memoizedProps;if(a!==r){var s,u,c=e.stateNode;switch(Co(Po.current),t=null,n){case"input":a=wt(c,a),r=wt(c,r),t=[];break;case"option":a=Pt(c,a),r=Pt(c,r),t=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":a=Ot(c,a),r=Ot(c,r),t=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(c.onclick=cn)}for(s in on(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s])c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(T.hasOwnProperty(s)?t||(t=[]):(t=t||[]).push(s,null));for(s in r){var l=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(t||(t=[]),t.push(s,n)),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(t=t||[]).push(s,l)):"children"===s?c===l||"string"!=typeof l&&"number"!=typeof l||(t=t||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(T.hasOwnProperty(s)?(null!=l&&un(o,s),t||c===l||(t=[])):(t=t||[]).push(s,l))}n&&(t=t||[]).push("style",n),o=t,(e.updateQueue=o)&&(e.effectTag|=4)}},Ga=function(t,e,n,r){n!==r&&(e.effectTag|=4)};var Ja="function"==typeof WeakSet?WeakSet:Set;function ts(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=vt(n)),null!==n&&gt(n.type),e=e.value,null!==t&&1===t.tag&&gt(t.type);try{console.error(e)}catch(t){setTimeout((function(){throw t}))}}function es(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){yu(t,e)}else e.current=null}function ns(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:$i(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function rs(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function is(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function os(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void is(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:$i(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=n.updateQueue)&&fo(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}fo(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&vn(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ne(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function as(t,e,n){switch("function"==typeof wu&&wu(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;Gi(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(t){yu(i,t)}}t=t.next}while(t!==r)}))}break;case 1:es(e),"function"==typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){yu(t,e)}}(e,n);break;case 5:es(e);break;case 4:ls(t,e,n)}}function ss(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&ss(e)}function us(t){return 5===t.tag||3===t.tag||4===t.tag}function cs(t){t:{for(var e=t.return;null!==e;){if(us(e)){var n=e;break t}e=e.return}throw Error(a(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(Bt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||us(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(8===r.nodeType?(n=r.parentNode).insertBefore(e,r):(n=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=cn));else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e):function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?r.insertBefore(e,n):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e)}function ls(t,e,n){for(var r,i,o=e,s=!1;;){if(!s){s=o.return;t:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}s=s.return}s=!0}if(5===o.tag||6===o.tag){t:for(var u=t,c=o,l=n,f=c;;)if(as(u,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break t;for(;null===f.sibling;){if(null===f.return||f.return===c)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(as(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function fs(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void rs(3,e);case 1:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[xn]=r,"input"===t&&"radio"===r.type&&null!=r.name&&Tt(n,r),an(t,i),e=an(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?nn(n,u):"dangerouslySetInnerHTML"===s?Ut(n,u):"children"===s?Bt(n,u):X(n,s,u,e)}switch(t){case"input":xt(n,r);break;case"textarea":Rt(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?Mt(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?Mt(n,!!r.multiple,r.defaultValue,!0):Mt(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,Ne(e.containerInfo)));case 12:return;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,ks=Ui()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,i=null!=(i=t.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=en("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void hs(e);case 19:return void hs(e);case 17:return}throw Error(a(163))}function hs(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Ja),e.forEach((function(e){var r=Eu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var ds="function"==typeof WeakMap?WeakMap:Map;function ps(t,e,n){(n=so(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ns||(Ns=!0,js=r),ts(t,e)},n}function ms(t,e,n){(n=so(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return ts(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Fs?Fs=new Set([this]):Fs.add(this),ts(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var gs,vs=Math.ceil,ys=Q.ReactCurrentDispatcher,bs=Q.ReactCurrentOwner,Es=0,Ss=3,ws=4,_s=0,Ts=null,xs=null,As=0,Is=Es,Ps=null,Ms=1073741823,Os=1073741823,Cs=null,Rs=0,Ds=!1,ks=0,Ls=null,Ns=!1,js=null,Fs=null,Us=!1,Bs=null,Hs=90,Gs=null,zs=0,Ws=null,Vs=0;function Ys(){return 0!=(48&_s)?1073741821-(Ui()/10|0):0!==Vs?Vs:Vs=1073741821-(Ui()/10|0)}function qs(t,e,n){if(0==(2&(e=e.mode)))return 1073741823;var r=Bi();if(0==(4&e))return 99===r?1073741823:1073741822;if(0!=(16&_s))return As;if(null!==n)t=qi(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=qi(t,150,100);break;case 97:case 96:t=qi(t,5e3,250);break;case 95:t=2;break;default:throw Error(a(326))}return null!==Ts&&t===As&&--t,t}function $s(t,e){if(50<zs)throw zs=0,Ws=null,Error(a(185));if(null!==(t=Ks(t,e))){var n=Bi();1073741823===e?0!=(8&_s)&&0==(48&_s)?Js(t):(Xs(t),0===_s&&Vi()):Xs(t),0==(4&_s)||98!==n&&99!==n||(null===Gs?Gs=new Map([[t,e]]):(void 0===(n=Gs.get(t))||n>e)&&Gs.set(t,e))}}function Ks(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ts===i&&(au(e),Is===ws&&Du(i,As)),ku(i,e)),i}function Qs(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!Ru(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return 2>=(t=n>(t=t.nextKnownPendingLevel)?n:t)&&e!==t?0:t}function Xs(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Wi(Js.bind(null,t));else{var e=Qs(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=Ys();if(1073741823===e?r=99:1===e||2===e?r=95:r=0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==Ri&&_i(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?Wi(Js.bind(null,t)):zi(r,Zs.bind(null,t),{timeout:10*(1073741821-e)-Ui()}),t.callbackNode=e}}}function Zs(t,e){if(Vs=0,e)return Lu(t,e=Ys()),Xs(t),null;var n=Qs(t);if(0!==n){if(e=t.callbackNode,0!=(48&_s))throw Error(a(327));if(mu(),t===Ts&&n===As||nu(t,n),null!==xs){var r=_s;_s|=16;for(var i=iu();;)try{uu();break}catch(e){ru(t,e)}if(Ji(),_s=r,ys.current=i,1===Is)throw e=Ps,nu(t,n),Du(t,n),Xs(t),e;if(null===xs)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=Is,Ts=null,r){case Es:case 1:throw Error(a(345));case 2:Lu(t,2<n?2:n);break;case Ss:if(Du(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=fu(i)),1073741823===Ms&&10<(i=ks+500-Ui())){if(Ds){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,nu(t,n);break}}if(0!==(o=Qs(t))&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=bn(hu.bind(null,t),i);break}hu(t);break;case ws:if(Du(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=fu(i)),Ds&&(0===(i=t.lastPingedTime)||i>=n)){t.lastPingedTime=n,nu(t,n);break}if(0!==(i=Qs(t))&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==Os?r=10*(1073741821-Os)-Ui():1073741823===Ms?r=0:(r=10*(1073741821-Ms)-5e3,0>(r=(i=Ui())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vs(r/1960))-r)&&(r=n)),10<r){t.timeoutHandle=bn(hu.bind(null,t),r);break}hu(t);break;case 5:if(1073741823!==Ms&&null!==Cs){o=Ms;var s=Cs;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=Ui()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Du(t,n),t.timeoutHandle=bn(hu.bind(null,t),r);break}}hu(t);break;default:throw Error(a(329))}if(Xs(t),t.callbackNode===e)return Zs.bind(null,t)}}return null}function Js(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,0!=(48&_s))throw Error(a(327));if(mu(),t===Ts&&e===As||nu(t,e),null!==xs){var n=_s;_s|=16;for(var r=iu();;)try{su();break}catch(e){ru(t,e)}if(Ji(),_s=n,ys.current=r,1===Is)throw n=Ps,nu(t,e),Du(t,e),Xs(t),n;if(null!==xs)throw Error(a(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,Ts=null,hu(t),Xs(t)}return null}function tu(t,e){var n=_s;_s|=1;try{return t(e)}finally{0===(_s=n)&&Vi()}}function eu(t,e){var n=_s;_s&=-2,_s|=8;try{return t(e)}finally{0===(_s=n)&&Vi()}}function nu(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,En(n)),null!==xs)for(n=xs.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&gi();break;case 3:Do(),ui(hi),ui(fi);break;case 5:Lo(r);break;case 4:Do();break;case 13:case 19:ui(No);break;case 10:to(r)}n=n.return}Ts=t,xs=Au(t.current,null),As=e,Is=Es,Ps=null,Os=Ms=1073741823,Cs=null,Rs=0,Ds=!1}function ru(t,e){for(;;){try{if(Ji(),Uo.current=ga,Vo)for(var n=Go.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Ho=0,Wo=zo=Go=null,Vo=!1,null===xs||null===xs.return)return Is=1,Ps=e,xs=null;t:{var i=t,o=xs.return,a=xs,s=e;if(e=As,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var u=s;if(0==(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.expirationTime=c.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var l=0!=(1&No.current),f=o;do{var h;if(h=13===f.tag){var d=f.memoizedState;if(null!==d)h=null!==d.dehydrated;else{var p=f.memoizedProps;h=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!l)}}if(h){var m=f.updateQueue;if(null===m){var g=new Set;g.add(u),f.updateQueue=g}else m.add(u);if(0==(2&f.mode)){if(f.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=so(1073741823,null);v.tag=2,uo(a,v)}a.expirationTime=1073741823;break t}s=void 0,a=e;var y=i.pingCache;if(null===y?(y=i.pingCache=new ds,s=new Set,y.set(u,s)):void 0===(s=y.get(u))&&(s=new Set,y.set(u,s)),!s.has(a)){s.add(a);var b=bu.bind(null,i,u,a);u.then(b,b)}f.effectTag|=4096,f.expirationTime=e;break t}f=f.return}while(null!==f);s=Error((gt(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+vt(a))}5!==Is&&(Is=2),s=Za(s,a),f=o;do{switch(f.tag){case 3:u=s,f.effectTag|=4096,f.expirationTime=e,co(f,ps(f,u,e));break t;case 1:u=s;var E=f.type,S=f.stateNode;if(0==(64&f.effectTag)&&("function"==typeof E.getDerivedStateFromError||null!==S&&"function"==typeof S.componentDidCatch&&(null===Fs||!Fs.has(S)))){f.effectTag|=4096,f.expirationTime=e,co(f,ms(f,u,e));break t}}f=f.return}while(null!==f)}xs=lu(xs)}catch(t){e=t;continue}break}}function iu(){var t=ys.current;return ys.current=ga,null===t?ga:t}function ou(t,e){t<Ms&&2<t&&(Ms=t),null!==e&&t<Os&&2<t&&(Os=t,Cs=e)}function au(t){t>Rs&&(Rs=t)}function su(){for(;null!==xs;)xs=cu(xs)}function uu(){for(;null!==xs&&!Di();)xs=cu(xs)}function cu(t){var e=gs(t.alternate,t,As);return t.memoizedProps=t.pendingProps,null===e&&(e=lu(t)),bs.current=null,e}function lu(t){xs=t;do{var e=xs.alternate;if(t=xs.return,0==(2048&xs.effectTag)){if(e=Qa(e,xs,As),1===As||1!==xs.childExpirationTime){for(var n=0,r=xs.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}xs.childExpirationTime=n}if(null!==e)return e;null!==t&&0==(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=xs.firstEffect),null!==xs.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=xs.firstEffect),t.lastEffect=xs.lastEffect),1<xs.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=xs:t.firstEffect=xs,t.lastEffect=xs))}else{if(null!==(e=Xa(xs)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=xs.sibling))return e;xs=t}while(null!==xs);return Is===Es&&(Is=5),null}function fu(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function hu(t){var e=Bi();return Gi(99,du.bind(null,t,e)),null}function du(t,e){do{mu()}while(null!==Bs);if(0!=(48&_s))throw Error(a(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=fu(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===Ts&&(xs=Ts=null,As=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=_s;_s|=32,bs.current=null,mn=Ye;var s=dn();if(pn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{u.nodeType,f.nodeType}catch(t){u=null;break t}var h=0,d=-1,p=-1,m=0,g=0,v=s,y=null;e:for(;;){for(var b;v!==u||0!==l&&3!==v.nodeType||(d=h+l),v!==f||0!==c&&3!==v.nodeType||(p=h+c),3===v.nodeType&&(h+=v.nodeValue.length),null!==(b=v.firstChild);)y=v,v=b;for(;;){if(v===s)break e;if(y===u&&++m===l&&(d=h),y===f&&++g===c&&(p=h),null!==(b=v.nextSibling))break;y=(v=y).parentNode}v=b}u=-1===d||-1===p?null:{start:d,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;gn={activeElementDetached:null,focusedElem:s,selectionRange:u},Ye=!1,Ls=i;do{try{pu()}catch(t){if(null===Ls)throw Error(a(330));yu(Ls,t),Ls=Ls.nextEffect}}while(null!==Ls);Ls=i;do{try{for(s=t,u=e;null!==Ls;){var E=Ls.effectTag;if(16&E&&Bt(Ls.stateNode,""),128&E){var S=Ls.alternate;if(null!==S){var w=S.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&E){case 2:cs(Ls),Ls.effectTag&=-3;break;case 6:cs(Ls),Ls.effectTag&=-3,fs(Ls.alternate,Ls);break;case 1024:Ls.effectTag&=-1025;break;case 1028:Ls.effectTag&=-1025,fs(Ls.alternate,Ls);break;case 4:fs(Ls.alternate,Ls);break;case 8:ls(s,l=Ls,u),ss(l)}Ls=Ls.nextEffect}}catch(t){if(null===Ls)throw Error(a(330));yu(Ls,t),Ls=Ls.nextEffect}}while(null!==Ls);if(w=gn,S=dn(),E=w.focusedElem,u=w.selectionRange,S!==E&&E&&E.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(E.ownerDocument.documentElement,E)){null!==u&&pn(E)&&(S=u.start,void 0===(w=u.end)&&(w=S),"selectionStart"in E?(E.selectionStart=S,E.selectionEnd=Math.min(w,E.value.length)):(w=(S=E.ownerDocument||document)&&S.defaultView||window).getSelection&&(w=w.getSelection(),l=E.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!w.extend&&s>u&&(l=u,u=s,s=l),l=hn(E,s),f=hn(E,u),l&&f&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==f.node||w.focusOffset!==f.offset)&&((S=S.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),s>u?(w.addRange(S),w.extend(f.node,f.offset)):(S.setEnd(f.node,f.offset),w.addRange(S))))),S=[];for(w=E;w=w.parentNode;)1===w.nodeType&&S.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof E.focus&&E.focus(),E=0;E<S.length;E++)(w=S[E]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Ye=!!mn,gn=mn=null,t.current=n,Ls=i;do{try{for(E=t;null!==Ls;){var _=Ls.effectTag;if(36&_&&os(E,Ls.alternate,Ls),128&_){S=void 0;var T=Ls.ref;if(null!==T){var x=Ls.stateNode;switch(Ls.tag){case 5:S=x;break;default:S=x}"function"==typeof T?T(S):T.current=S}}Ls=Ls.nextEffect}}catch(t){if(null===Ls)throw Error(a(330));yu(Ls,t),Ls=Ls.nextEffect}}while(null!==Ls);Ls=null,ki(),_s=o}else t.current=n;if(Us)Us=!1,Bs=t,Hs=e;else for(Ls=i;null!==Ls;)e=Ls.nextEffect,Ls.nextEffect=null,Ls=e;if(0===(e=t.firstPendingTime)&&(Fs=null),1073741823===e?t===Ws?zs++:(zs=0,Ws=t):zs=0,"function"==typeof Su&&Su(n.stateNode,r),Xs(t),Ns)throw Ns=!1,t=js,js=null,t;return 0!=(8&_s)||Vi(),null}function pu(){for(;null!==Ls;){var t=Ls.effectTag;0!=(256&t)&&ns(Ls.alternate,Ls),0==(512&t)||Us||(Us=!0,zi(97,(function(){return mu(),null}))),Ls=Ls.nextEffect}}function mu(){if(90!==Hs){var t=97<Hs?97:Hs;return Hs=90,Gi(t,gu)}}function gu(){if(null===Bs)return!1;var t=Bs;if(Bs=null,0!=(48&_s))throw Error(a(331));var e=_s;for(_s|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:rs(5,n),is(5,n)}}catch(e){if(null===t)throw Error(a(330));yu(t,e)}n=t.nextEffect,t.nextEffect=null,t=n}return _s=e,Vi(),!0}function vu(t,e,n){uo(t,e=ps(t,e=Za(n,e),1073741823)),null!==(t=Ks(t,1073741823))&&Xs(t)}function yu(t,e){if(3===t.tag)vu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){vu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Fs||!Fs.has(r))){uo(n,t=ms(n,t=Za(e,t),1073741823)),null!==(n=Ks(n,1073741823))&&Xs(n);break}}n=n.return}}function bu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),Ts===t&&As===n?Is===ws||Is===Ss&&1073741823===Ms&&Ui()-ks<500?nu(t,As):Ds=!0:Ru(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,Xs(t)))}function Eu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(e=qs(e=Ys(),t,null)),null!==(t=Ks(t,e))&&Xs(t)}gs=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||hi.current)Oa=!0;else{if(r<n){switch(Oa=!1,e.tag){case 3:Ua(e),Pa();break;case 5:if(ko(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:mi(e.type)&&bi(e);break;case 4:Ro(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value,i=e.type._context,ci(Ki,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?Wa(t,e,n):(ci(No,1&No.current),null!==(e=$a(t,e,n))?e.sibling:null);ci(No,1&No.current);break;case 19:if(r=e.childExpirationTime>=n,0!=(64&t.effectTag)){if(r)return qa(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),ci(No,No.current),!r)return null}return $a(t,e,n)}Oa=!1}}else Oa=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=pi(e,fi.current),no(e,n),i=$o(null,e,r,t,i,n),e.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,mi(r)){var o=!0;bi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(e);var s=r.getDerivedStateFromProps;"function"==typeof s&&mo(e,r,s,t),i.updater=go,e.stateNode=i,i._reactInternalFiber=e,Eo(e,r,t,n),e=Fa(null,e,r,!0,o,n)}else e.tag=0,Ca(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=function(t){if("function"==typeof t)return xu(t)?1:0;if(null!=t){if((t=t.$$typeof)===ut)return 11;if(t===ft)return 14}return 2}(i),t=$i(i,t),o){case 0:e=Na(null,e,i,t,n);break t;case 1:e=ja(null,e,i,t,n);break t;case 11:e=Ra(null,e,i,t,n);break t;case 14:e=Da(null,e,i,$i(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Na(t,e,r,i=e.elementType===r?i:$i(r,i),n);case 1:return r=e.type,i=e.pendingProps,ja(t,e,r,i=e.elementType===r?i:$i(r,i),n);case 3:if(Ua(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,ao(t,e),lo(e,r,null,n),(r=e.memoizedState.element)===i)Pa(),e=$a(t,e,n);else{if((i=e.stateNode.hydrate)&&(Sa=Sn(e.stateNode.containerInfo.firstChild),Ea=e,i=wa=!0),i)for(n=Ao(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ca(t,e,r,n),Pa();e=e.child}return e;case 5:return ko(e),null===t&&xa(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,yn(r,i)?s=null:null!==o&&yn(r,o)&&(e.effectTag|=16),La(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Ca(t,e,s,n),e=e.child),e;case 6:return null===t&&xa(e),null;case 13:return Wa(t,e,n);case 4:return Ro(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=xo(e,null,r,n):Ca(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Ra(t,e,r,i=e.elementType===r?i:$i(r,i),n);case 7:return Ca(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ca(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var u=e.type._context;if(ci(Ki,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=jr(u,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!hi.current){e=$a(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===u.tag&&((l=so(n,null)).tag=2,uo(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),eo(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Ca(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,no(e,n),r=r(i=ro(i,o.unstable_observedBits)),e.effectTag|=1,Ca(t,e,r,n),e.child;case 14:return o=$i(i=e.type,e.pendingProps),Da(t,e,i,o=$i(i.type,o),r,n);case 15:return ka(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$i(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,mi(r)?(t=!0,bi(e)):t=!1,no(e,n),yo(e,r,i),Eo(e,r,i,n),Fa(null,e,r,!0,t,n);case 19:return qa(t,e,n)}throw Error(a(156,e.tag))};var Su=null,wu=null;function _u(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Tu(t,e,n,r){return new _u(t,e,n,r)}function xu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Au(t,e){var n=t.alternate;return null===n?((n=Tu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Iu(t,e,n,r,i,o){var s=2;if(r=t,"function"==typeof t)xu(t)&&(s=1);else if("string"==typeof t)s=5;else t:switch(t){case nt:return Pu(n.children,i,o,e);case st:s=8,i|=7;break;case rt:s=8,i|=1;break;case it:return(t=Tu(12,n,e,8|i)).elementType=it,t.type=it,t.expirationTime=o,t;case ct:return(t=Tu(13,n,e,i)).type=ct,t.elementType=ct,t.expirationTime=o,t;case lt:return(t=Tu(19,n,e,i)).elementType=lt,t.expirationTime=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case ot:s=10;break t;case at:s=9;break t;case ut:s=11;break t;case ft:s=14;break t;case ht:s=16,r=null;break t;case dt:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Tu(s,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function Pu(t,e,n,r){return(t=Tu(7,t,r,e)).expirationTime=n,t}function Mu(t,e,n){return(t=Tu(6,t,null,e)).expirationTime=n,t}function Ou(t,e,n){return(e=Tu(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Cu(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Ru(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function Du(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function ku(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function Lu(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function Nu(t,e,n,r){var i=e.current,o=Ys(),s=ho.suspense;o=qs(o,i,s);t:if(n){e:{if(Jt(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(mi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=yi(n,c,u);break t}}n=u}else n=li;return null===e.context?e.context=n:e.pendingContext=n,(e=so(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),uo(i,e),$s(i,o),o}function ju(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Fu(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function Uu(t,e){Fu(t,e),(t=t.alternate)&&Fu(t,e)}function Bu(t,e,n){var r=new Cu(t,e,n=null!=n&&!0===n.hydrate),i=Tu(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,oo(i),t[An]=r.current,n&&0!==e&&function(t,e){var n=Zt(e);Ae.forEach((function(t){pe(t,e,n)})),Ie.forEach((function(t){pe(t,e,n)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function Hu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Gu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var t=ju(a);s.call(t)}}Nu(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Bu(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var t=ju(a);u.call(t)}}eu((function(){Nu(e,a,t,i)}))}return ju(a)}function zu(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:et,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Wu(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Hu(e))throw Error(a(200));return zu(t,e,null,n)}Bu.prototype.render=function(t){Nu(t,this._internalRoot,null,null)},Bu.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Nu(null,t,null,(function(){e[An]=null}))},me=function(t){if(13===t.tag){var e=qi(Ys(),150,100);$s(t,e),Uu(t,e)}},ge=function(t){13===t.tag&&($s(t,3),Uu(t,3))},ve=function(t){if(13===t.tag){var e=Ys();$s(t,e=qs(e,t,null)),Uu(t,e)}},P=function(t,e,n){switch(e){case"input":if(xt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=On(r);if(!i)throw Error(a(90));St(r),xt(r,i)}}}break;case"textarea":Rt(t,n);break;case"select":null!=(e=n.value)&&Mt(t,!!n.multiple,e,!1)}},k=tu,L=function(t,e,n,r,i){var o=_s;_s|=4;try{return Gi(98,t.bind(null,e,n,r,i))}finally{0===(_s=o)&&Vi()}},N=function(){0==(49&_s)&&(function(){if(null!==Gs){var t=Gs;Gs=null,t.forEach((function(t,e){Lu(e,t),Xs(e)})),Vi()}}(),mu())},j=function(t,e){var n=_s;_s|=2;try{return t(e)}finally{0===(_s=n)&&Vi()}};var Vu,Yu,qu={Events:[Pn,Mn,On,A,_,jn,function(t){ie(t,Nn)},R,D,Xe,se,mu,{current:!1}]};Yu=(Vu={findFiberByHostInstance:In,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);Su=function(t){try{e.onCommitFiberRoot(n,t,void 0,64==(64&t.current.effectTag))}catch(t){}},wu=function(t){try{e.onCommitFiberUnmount(n,t)}catch(t){}}}catch(t){}}(i({},Vu,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ne(t))?null:t.stateNode},findFiberByHostInstance:function(t){return Yu?Yu(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qu,e.createPortal=Wu,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"==typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=null===(t=ne(e))?null:t.stateNode},e.flushSync=function(t,e){if(0!=(48&_s))throw Error(a(187));var n=_s;_s|=1;try{return Gi(99,t.bind(null,e))}finally{_s=n,Vi()}},e.hydrate=function(t,e,n){if(!Hu(e))throw Error(a(200));return Gu(null,t,e,!0,n)},e.render=function(t,e,n){if(!Hu(e))throw Error(a(200));return Gu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Hu(t))throw Error(a(40));return!!t._reactRootContainer&&(eu((function(){Gu(null,null,t,!1,(function(){t._reactRootContainer=null,t[An]=null}))})),!0)},e.unstable_batchedUpdates=tu,e.unstable_createPortal=function(t,e){return Wu(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hu(n))throw Error(a(200));if(null==t||void 0===t._reactInternalFiber)throw Error(a(38));return Gu(t,e,n,!1,r)},e.version="16.14.0"},function(t,e,n){"use strict";t.exports=n(144)},function(t,e,n){"use strict";
/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r,i,o,a,s;if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,c=null,l=function(){if(null!==u)try{var t=e.unstable_now();u(!0,t),u=null}catch(t){throw setTimeout(l,0),t}},f=Date.now();e.unstable_now=function(){return Date.now()-f},r=function(t){null!==u?setTimeout(r,0,t):(u=t,setTimeout(l,0))},i=function(t,e){c=setTimeout(t,e)},o=function(){clearTimeout(c)},a=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,p=window.setTimeout,m=window.clearTimeout;if("undefined"!=typeof console){var g=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof h&&"function"==typeof h.now)e.unstable_now=function(){return h.now()};else{var v=d.now();e.unstable_now=function(){return d.now()-v}}var y=!1,b=null,E=-1,S=5,w=0;a=function(){return e.unstable_now()>=w},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):S=0<t?Math.floor(1e3/t):5};var _=new MessageChannel,T=_.port2;_.port1.onmessage=function(){if(null!==b){var t=e.unstable_now();w=t+S;try{b(!0,t)?T.postMessage(null):(y=!1,b=null)}catch(t){throw T.postMessage(null),t}}else y=!1},r=function(t){b=t,y||(y=!0,T.postMessage(null))},i=function(t,n){E=p((function(){t(e.unstable_now())}),n)},o=function(){m(E),E=-1}}function x(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<P(i,e)))break t;t[r]=e,t[n]=i,n=r}}function A(t){return void 0===(t=t[0])?null:t}function I(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>P(a,n))void 0!==u&&0>P(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>P(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function P(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var M=[],O=[],C=1,R=null,D=3,k=!1,L=!1,N=!1;function j(t){for(var e=A(O);null!==e;){if(null===e.callback)I(O);else{if(!(e.startTime<=t))break;I(O),e.sortIndex=e.expirationTime,x(M,e)}e=A(O)}}function F(t){if(N=!1,j(t),!L)if(null!==A(M))L=!0,r(U);else{var e=A(O);null!==e&&i(F,e.startTime-t)}}function U(t,n){L=!1,N&&(N=!1,o()),k=!0;var r=D;try{for(j(n),R=A(M);null!==R&&(!(R.expirationTime>n)||t&&!a());){var s=R.callback;if(null!==s){R.callback=null,D=R.priorityLevel;var u=s(R.expirationTime<=n);n=e.unstable_now(),"function"==typeof u?R.callback=u:R===A(M)&&I(M),j(n)}else I(M);R=A(M)}if(null!==R)var c=!0;else{var l=A(O);null!==l&&i(F,l.startTime-n),c=!1}return c}finally{R=null,D=r,k=!1}}function B(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var H=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){L||k||(L=!0,r(U))},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_getFirstCallbackNode=function(){return A(M)},e.unstable_next=function(t){switch(D){case 1:case 2:case 3:var e=3;break;default:e=D}var n=D;D=e;try{return t()}finally{D=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=H,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=D;D=t;try{return e()}finally{D=n}},e.unstable_scheduleCallback=function(t,n,a){var s=e.unstable_now();if("object"==typeof a&&null!==a){var u=a.delay;u="number"==typeof u&&0<u?s+u:s,a="number"==typeof a.timeout?a.timeout:B(t)}else a=B(t),u=s;return t={id:C++,callback:n,priorityLevel:t,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(t.sortIndex=u,x(O,t),null===A(M)&&t===A(O)&&(N?o():N=!0,i(F,u-s))):(t.sortIndex=a,x(M,t),L||k||(L=!0,r(U))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();j(t);var n=A(M);return n!==R&&null!==R&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<R.expirationTime||a()},e.unstable_wrapCallback=function(t){var e=D;return function(){var n=D;D=e;try{return t.apply(this,arguments)}finally{D=n}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SiteContainer=void 0;const r=n(0),i=n(146),o=n(274);e.SiteContainer=t=>{const[e,n]=r.useState(!0);return r.createElement(r.Fragment,null,r.createElement(i.GameComponent,{store:t.store,shouldShow:e}),r.createElement(o.WebContentContainer,{setShowGame:n,isGameShowing:e}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameComponent=void 0;const r=n(0),i=n(91),o=n(168),a=n(1),s=n(15);e.GameComponent=t=>{const e=r.useRef(),n=(0,s.useGame)();return r.useEffect(()=>{n.init(e.current.getOpenGL(),t.store)},[]),r.useEffect(()=>{n.setIsHidden(!t.shouldShow)},[t.shouldShow]),r.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:68,position:"absolute",width:"100%"}},r.createElement("div",null,!t.shouldShow&&r.createElement("div",{style:{position:"absolute",width:a.DOM_WIDTH,height:a.DOM_HEIGHT,backgroundColor:"#000000",color:"#000000",zIndex:1}}),r.createElement(o.UIContainer,null),r.createElement(i.CanvasComponent,{ref:e,id:"main_canvas",dom_width:a.DOM_WIDTH,dom_height:a.DOM_HEIGHT,width:a.WIDTH,height:a.HEIGHT,resolution:a.RES_DIV})))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasComponent=void 0;const r=n(0);class i extends r.PureComponent{render(){return r.createElement("canvas",{ref:"canvas",id:this.props.id,width:this.props.dom_width/this.props.resolution,height:this.props.dom_height/this.props.resolution,style:{width:this.props.dom_width,height:this.props.dom_height,imageRendering:"pixelated"}})}componentDidMount(){this.canvas=this.refs.canvas,this.canvasContext=this.canvas.getContext("webgl")}getOpenGL(){return this.canvasContext}}e.CanvasComponent=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScreenBuffer=void 0;e.ScreenBuffer=class{constructor(t,e,n){this.gl=t,this.width=e,this.height=n}getOpenGL(){return this.gl}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RenderService=void 0;const r=n(21),i=n(12),o=n(151),a=n(152),s=n(162),u=n(163),c=n(164),l=n(165),f=n(166),h=n(167);e.RenderService=class{constructor(t){this.resourceManager=t,this.backgroundRenderService=new o.BackgroundRenderService,this.spriteRenderService=new c.SpriteRenderService(this.backgroundRenderService),this.wallRenderService=new f.WallRenderService(this.backgroundRenderService),this.floorRenderService=new a.FloorRenderService(this.backgroundRenderService),this.screenShakeService=new u.ScreenShakeService,this.particleRenderService=new s.ParticleRenderService(this.backgroundRenderService),this.triangleRenderService=new l.ObjectRenderService(this.backgroundRenderService),this.textRenderService=new h.TextRenderService(this.resourceManager,this.spriteRenderService)}init(t){this.gl=t,this.backgroundRenderService.init(t),this.spriteRenderService.init(t),this.spriteRenderService.attachSpritesheet(this.resourceManager.manifest.spritesheets[i.SpriteSheets.SPRITE].getTexture()),this.wallRenderService.init(t),this.wallRenderService.attachSpritesheet(this.resourceManager.manifest.spritesheets[i.SpriteSheets.SPRITE].getTexture()),this.floorRenderService.init(t),this.floorRenderService.attachSpritesheet(this.resourceManager.manifest.spritesheets[i.SpriteSheets.SPRITE].getTexture()),this.particleRenderService.init(t),this.triangleRenderService.init(t),this.textRenderService.init(t)}draw(){if(!this.camera)return;const{modelViewMatrix:t,projectionMatrix:e}=this.calculateCameraMatrices();this.spriteRenderService.attachViewMatrices(t,e),this.wallRenderService.attachViewMatrices(t,e),this.floorRenderService.attachViewMatrices(t,e),this.particleRenderService.attachViewMatrices(t,e),this.triangleRenderService.attachViewMatrices(t,e),this.backgroundRenderService.draw(),this.screenShakeService.update(),this.particleRenderService.draw(),this.spriteRenderService.draw(),this.wallRenderService.draw(),this.floorRenderService.draw(),this.textRenderService.draw(),this.gl.clear(this.gl.DEPTH_BUFFER_BIT),this.triangleRenderService.draw()}attachCamera(t){this.camera=t}calculateCameraMatrices(){const{position:t,angle:e,height:n,fov:i,aspectRatio:o,zNear:a,zFar:s}=this.camera(),u=i*Math.PI/180,c=r.mat4.create(),l=r.mat4.create();return r.mat4.perspective(c,u,o,a,s),r.mat4.rotateY(l,l,e),r.mat4.translate(l,l,[-t.x,-n,-t.y]),this.screenShakeService.applyToMatrices(l),{modelViewMatrix:l,projectionMatrix:c}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapPrison=void 0,e.MapPrison={url:"map/prison.tmx",metadata:{onStart:t=>{}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundRenderService=e.Backgrounds=void 0,e.Backgrounds={OutdoorBackground:{colour:{r:135/255,g:206/255,b:235/255},hazeAmount:.2,fog:{minDepth:10,maxDepth:100,pixelAccuracy:4,depthAccuracy:8}},CaveBackground:{colour:{r:.3,g:.26*.2,b:.4*.2},hazeAmount:1,fog:{minDepth:0,maxDepth:30,pixelAccuracy:8,depthAccuracy:16}}};e.BackgroundRenderService=class{constructor(){this.currentBackground=e.Backgrounds.CaveBackground}init(t){this.gl=t}setBackground(t){this.currentBackground=t}applyShaderArguments(t){const{colour:e,hazeAmount:n,fog:r}=this.currentBackground,{r:i,g:o,b:a}=e,{minDepth:s,maxDepth:u,pixelAccuracy:c,depthAccuracy:l}=r;this.gl.uniform1f(t.fadePixelAccuracy,c),this.gl.uniform1f(t.fadeAccuracy,l),this.gl.uniform1f(t.minViewDistance,s),this.gl.uniform1f(t.maxViewDistance,u),this.gl.uniform1f(t.hazeAmount,n),this.gl.uniform1f(t.hazeR,i),this.gl.uniform1f(t.hazeG,o),this.gl.uniform1f(t.hazeB,a)}draw(){const{r:t,g:e,b:n}=this.currentBackground.colour;this.gl.clearColor(t,e,n,1),this.gl.clearDepth(1),this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.LEQUAL),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FloorRenderService=void 0;const r=n(22),i=n(26);e.FloorRenderService=class{constructor(t){this.backgroundRenderService=t}init(t){this.gl=t,this.shader=(0,i.compileTextureRepeatShader)(t),this.backgroundShaderPositions=this.shader.uniform,this.floorArray=new r.SyncedArray({onReconstruct:e=>this.onArrayReconstruct(t,e),onUpdate:e=>this.onArrayUpdate(t),onInjection:(t,e)=>this.onInjection(t,e.obj)}),this.positionBuffer=t.createBuffer(),this.textureBuffer=t.createBuffer(),this.textureStartBuffer=t.createBuffer(),this.textureSizeBuffer=t.createBuffer()}draw(){if(this.floorArray.sync(),0===this.floorArray.getArray().length)return;const t=this.gl.FLOAT;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionBuffer),this.gl.vertexAttribPointer(this.shader.attribute.vertexPosition,3,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.vertexPosition),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureBuffer),this.gl.vertexAttribPointer(this.shader.attribute.texturePosition,2,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.texturePosition),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureStartBuffer),this.gl.vertexAttribPointer(this.shader.attribute.textureStart,2,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.textureStart),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureSizeBuffer),this.gl.vertexAttribPointer(this.shader.attribute.textureSize,2,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.textureSize),this.gl.useProgram(this.shader.shaderId),this.backgroundRenderService.applyShaderArguments(this.backgroundShaderPositions),this.gl.uniformMatrix4fv(this.shader.uniform.projectionMatrix,!1,this.projectionMatrix),this.gl.uniformMatrix4fv(this.shader.uniform.modelMatrix,!1,this.modelViewMatrix),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.spritesheet),this.gl.uniform1i(this.shader.attribute.textureSampler,0);const e=this.positions.length/3;this.gl.drawArrays(this.gl.TRIANGLES,0,e)}createItem(t){return{renderId:this.floorArray.createItem(t)}}updateItem(t,e){this.floorArray.updateItem(t.renderId,e)}freeItem(t){this.floorArray.freeItem(t.renderId)}attachSpritesheet(t){this.spritesheet=t}attachViewMatrices(t,e){this.modelViewMatrix=t,this.projectionMatrix=e}onArrayReconstruct(t,e){const n=e.length;this.positions=new Float32Array(new Array(2*n*3*3).fill(0)),this.texture=new Float32Array(new Array(2*n*3*2).fill(0)),this.textureStart=new Float32Array(new Array(2*n*3*2).fill(0)),this.textureSize=new Float32Array(new Array(2*n*3*2).fill(0));for(let t=0;t<e.length;t++)this.onInjection(t,e[t].obj);this.onArrayUpdate(t)}onArrayUpdate(t){t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,this.positions,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.textureBuffer),t.bufferData(t.ARRAY_BUFFER,this.texture,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.textureStartBuffer),t.bufferData(t.ARRAY_BUFFER,this.textureStart,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.textureSizeBuffer),t.bufferData(t.ARRAY_BUFFER,this.textureSize,t.STATIC_DRAW)}onInjection(t,e){const n=2*t*3*2,r=2*t*3*3,{startPos:i,endPos:o,height:a,textureX:s,textureY:u,textureWidth:c,textureHeight:l,repeatWidth:f,repeatHeight:h}=e;this.positions[r]=i[0],this.positions[r+1]=a,this.positions[r+2]=i[1],this.positions[r+3]=o[0],this.positions[r+4]=a,this.positions[r+5]=i[1],this.positions[r+6]=i[0],this.positions[r+7]=a,this.positions[r+8]=o[1],this.positions[r+9]=i[0],this.positions[r+10]=a,this.positions[r+11]=o[1],this.positions[r+12]=o[0],this.positions[r+13]=a,this.positions[r+14]=i[1],this.positions[r+15]=o[0],this.positions[r+16]=a,this.positions[r+17]=o[1],this.texture[n]=s,this.texture[n+1]=u,this.texture[n+2]=s+c,this.texture[n+3]=u,this.texture[n+4]=s,this.texture[n+5]=u+l,this.texture[n+6]=s,this.texture[n+7]=u+l,this.texture[n+8]=s+c,this.texture[n+9]=u,this.texture[n+10]=s+c,this.texture[n+11]=u+l,this.textureStart[n]=s,this.textureStart[n+1]=u,this.textureStart[n+2]=s,this.textureStart[n+3]=u,this.textureStart[n+4]=s,this.textureStart[n+5]=u,this.textureStart[n+6]=s,this.textureStart[n+7]=u,this.textureStart[n+8]=s,this.textureStart[n+9]=u,this.textureStart[n+10]=s,this.textureStart[n+11]=u,this.textureSize[n]=f,this.textureSize[n+1]=h,this.textureSize[n+2]=f,this.textureSize[n+3]=h,this.textureSize[n+4]=f,this.textureSize[n+5]=h,this.textureSize[n+6]=f,this.textureSize[n+7]=h,this.textureSize[n+8]=f,this.textureSize[n+9]=h,this.textureSize[n+10]=f,this.textureSize[n+11]=h}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.colourFragment=void 0;const r=n(35),i=n(36);e.colourFragment=`\n    varying lowp vec4 position;\n    varying lowp vec3 colour;\n\n    ${r.fadeFunction}\n    ${i.hazeFunction}\n\n    void main() {\n      lowp float distance = length(floor(position * fadeAccuracy) / fadeAccuracy);\n      lowp float multiplier = fade(distance);\n\n      gl_FragColor = vec4(haze(colour, multiplier), 1);\n    }\n  `},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fsSource=void 0;const r=n(35),i=n(36);e.fsSource=`\n    varying lowp vec2 vTextureCoord;\n    uniform sampler2D uSampler;\n\n    varying lowp vec4 position;\n    varying lowp vec4 colour;\n\n    ${r.fadeFunction}\n    ${i.hazeFunction}\n\n    void main() {\n      lowp vec4 texColor = texture2D(uSampler, vTextureCoord);\n      if(texColor.a < 1.0) {\n        discard;\n      }\n\n      lowp float distance = length(floor(position * fadeAccuracy) / fadeAccuracy);\n      lowp float multiplier = fade(distance);\n\n      lowp vec3 col = (colour.rgb * colour.a) + ((1.0 - colour.a) * texColor.rgb);\n\n      gl_FragColor = vec4(haze(col, multiplier), 1);\n    }\n  `},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rfsSource=void 0;const r=n(35),i=n(36);e.rfsSource=`\n    varying lowp vec2 vTextureCoord;\n    varying lowp vec2 textureModStart;\n    varying lowp vec2 textureModSize;\n    uniform sampler2D uSampler;\n\n    varying lowp vec4 position;\n\n    ${r.fadeFunction}\n    ${i.hazeFunction}\n\n    void main() {\n      lowp vec4 texColor = texture2D(uSampler, textureModStart + mod(vTextureCoord - textureModStart, textureModSize));\n      if(texColor.a < 1.0) {\n        discard;\n      }\n\n      lowp float distance = length(floor(position * fadeAccuracy) / fadeAccuracy);\n      lowp float multiplier = fade(distance);\n\n      gl_FragColor =  vec4(haze(texColor.rgb, multiplier), 1);\n    }\n  `},function(t,e,n){"use strict";function r(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(alert("An error occurred compiling the shaders: "+t.getShaderInfoLog(r)),t.deleteShader(r),null)}Object.defineProperty(e,"__esModule",{value:!0}),e.initShaderProgram=void 0,e.initShaderProgram=function(t,e,n){const i=r(t,t.VERTEX_SHADER,e),o=r(t,t.FRAGMENT_SHADER,n),a=t.createProgram();return t.attachShader(a,i),t.attachShader(a,o),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)?a:(alert("Unable to initialize the shader program: "+t.getProgramInfoLog(a)),null)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BilloardVertex=e.modelMatrix=e.vertexColour=e.vertexTranslation=e.vertexPosition=void 0,e.vertexPosition="aVertexPosition",e.vertexTranslation="aVertexTranslation",e.vertexColour="colour",e.modelMatrix="uModelViewMatrix";const r={vertexPosition:"aVertexPosition",vertexTranslation:"aVertexTranslation",modelMatrix:"uModelViewMatrix",textureSampler:"uSampler",projectionMatrix:"uProjectionMatrix",texturePosition:"aTextureCoord",colourOverride:"colourOverride"},i=`\n    attribute vec4 ${r.vertexPosition};\n    attribute vec4 ${r.vertexTranslation};\n    attribute vec2 ${r.texturePosition};\n    attribute vec4 ${r.colourOverride};\n\n    uniform mat4 ${r.modelMatrix};\n    uniform mat4 ${r.projectionMatrix};\n\n    varying lowp vec2 vTextureCoord;\n    varying lowp vec4 position;\n    varying lowp vec4 colour;\n\n    void main() {\n      mat4 billboardMatrix = mat4(\n        ${r.modelMatrix}[0][0], 0, ${r.modelMatrix}[0][2], 0,\n        0, 1, 0, 0,\n        ${r.modelMatrix}[2][0], 0, ${r.modelMatrix}[2][2], 0,\n        0, 0, 0, 1\n      );\n      vec4 rotatedPosition = (${r.vertexPosition} * billboardMatrix) + ${r.vertexTranslation};\n\n      gl_Position = ${r.projectionMatrix} * ${r.modelMatrix} * rotatedPosition;\n      vTextureCoord = ${r.texturePosition};\n      colour = ${r.colourOverride};\n      position = gl_Position / 2.0;\n    }\n  `;e.BilloardVertex={v:r,source:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColourVertex=e.source=e.v=e.modelMatrix=e.vertexColour=e.vertexTranslation=e.vertexPosition=void 0,e.vertexPosition="aVertexPosition",e.vertexTranslation="aVertexTranslation",e.vertexColour="colour",e.modelMatrix="uModelViewMatrix",e.v={vertexPosition:"aVertexPosition",modelMatrix:"uModelViewMatrix",projectionMatrix:"uProjectionMatrix",colourOverride:"colourOverride"},e.source=`\n    attribute vec3 ${e.v.vertexPosition};\n    attribute vec3 ${e.v.colourOverride};\n\n    uniform mat4 ${e.v.modelMatrix};\n    uniform mat4 ${e.v.projectionMatrix};\n\n    varying lowp vec3 colour;\n    varying lowp vec4 position;\n\n    void main() {\n        vec4 pos = ${e.v.projectionMatrix} * ${e.v.modelMatrix} * vec4(${e.v.vertexPosition}, 1);\n        gl_Position = vec4(pos.x, pos.y, pos.z, pos.w);\n        colour = ${e.v.colourOverride};\n        position = pos / 2.0;\n    }\n  `,e.ColourVertex={v:e.v,source:e.source}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParticleVertex=e.modelMatrix=e.vertexColour=e.vertexTranslation=e.vertexPosition=void 0,e.vertexPosition="aVertexPosition",e.vertexTranslation="aVertexTranslation",e.vertexColour="colour",e.modelMatrix="uModelViewMatrix";const r={vertexPosition:"aVertexPosition",vertexTranslation:"aVertexTranslation",modelMatrix:"uModelViewMatrix",projectionMatrix:"uProjectionMatrix",colourOverride:"colourOverride"},i=`\n    attribute vec4 ${r.vertexPosition};\n    attribute vec4 ${r.vertexTranslation};\n    attribute vec3 ${r.colourOverride};\n\n    uniform mat4 ${r.modelMatrix};\n    uniform mat4 ${r.projectionMatrix};\n\n    varying lowp vec4 position;\n    varying lowp vec3 colour;\n\n    void main() {\n      mat4 billboardMatrix = mat4(\n        ${r.modelMatrix}[0][0], 0, ${r.modelMatrix}[0][2], 0,\n        0, 1, 0, 0,\n        ${r.modelMatrix}[2][0], 0, ${r.modelMatrix}[2][2], 0,\n        0, 0, 0, 1\n      );\n      vec4 rotatedPosition = (${r.vertexPosition} * billboardMatrix) + ${r.vertexTranslation};\n\n      gl_Position = ${r.projectionMatrix} * ${r.modelMatrix} * rotatedPosition;\n      colour = ${r.colourOverride};\n      position = gl_Position / 2.0;\n    }\n  `;e.ParticleVertex={v:r,source:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RepeatedVertex=e.source=e.v=e.modelMatrix=e.vertexColour=e.vertexTranslation=e.vertexPosition=void 0,e.vertexPosition="aVertexPosition",e.vertexTranslation="aVertexTranslation",e.vertexColour="colour",e.modelMatrix="uModelViewMatrix",e.v={vertexPosition:"aVertexPosition",modelMatrix:"uModelViewMatrix",textureSampler:"uSampler",projectionMatrix:"uProjectionMatrix",texturePosition:"aTextureCoord",textureStart:"textureStart",textureSize:"textureSize"},e.source=`\n    attribute vec4 ${e.v.vertexPosition};\n    attribute vec2 ${e.v.texturePosition};\n    attribute vec2 ${e.v.textureStart};\n    attribute vec2 ${e.v.textureSize};\n\n    uniform mat4 ${e.v.modelMatrix};\n    uniform mat4 ${e.v.projectionMatrix};\n\n    varying lowp vec2 vTextureCoord;\n    varying lowp vec2 textureModStart;\n    varying lowp vec2 textureModSize;\n\n    varying lowp vec4 position;\n\n    void main() {\n      gl_Position = ${e.v.projectionMatrix} * ${e.v.modelMatrix} * ${e.v.vertexPosition};\n      vTextureCoord = ${e.v.texturePosition};\n      textureModStart = ${e.v.textureStart};\n      textureModSize = ${e.v.textureSize};\n        position = gl_Position;\n    }\n  `,e.RepeatedVertex={v:e.v,source:e.source}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vertex=e.source=e.v=e.modelMatrix=e.vertexColour=e.vertexTranslation=e.vertexPosition=void 0,e.vertexPosition="aVertexPosition",e.vertexTranslation="aVertexTranslation",e.vertexColour="colour",e.modelMatrix="uModelViewMatrix",e.v={vertexPosition:"aVertexPosition",modelMatrix:"uModelViewMatrix",textureSampler:"uSampler",projectionMatrix:"uProjectionMatrix",texturePosition:"aTextureCoord"},e.source=`\n    attribute vec4 ${e.v.vertexPosition};\n    attribute vec2 ${e.v.texturePosition};\n\n    uniform mat4 ${e.v.modelMatrix};\n    uniform mat4 ${e.v.projectionMatrix};\n\n    varying lowp vec2 vTextureCoord;\n    \n\n    void main() {\n      gl_Position = ${e.v.projectionMatrix} * ${e.v.modelMatrix} * ${e.v.vertexPosition};\n      vTextureCoord = ${e.v.texturePosition};\n\n    }\n  `,e.Vertex={v:e.v,source:e.source}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParticleRenderService=void 0;const r=n(22),i=n(26);e.ParticleRenderService=class{constructor(t){this.backgroundRenderService=t}init(t){this.gl=t,this.shader=(0,i.compileParticleShader)(t),this.backgroundShaderPositions=this.shader.uniform,this.particleArray=new r.SyncedArray({onReconstruct:e=>this.onArrayReconstruct(t,e),onUpdate:e=>this.onArrayUpdate(t),onInjection:(t,e)=>this.onInjection(t,e.obj)}),this.positionBuffer=t.createBuffer(),this.translationBuffer=t.createBuffer(),this.colourBuffer=t.createBuffer()}draw(){if(this.particleArray.sync(),0===this.particleArray.getArray().length)return;const t=this.gl.FLOAT;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionBuffer),this.gl.vertexAttribPointer(this.shader.attribute.vertexPosition,3,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.vertexPosition),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.translationBuffer),this.gl.vertexAttribPointer(this.shader.attribute.vertexTranslation,3,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.vertexTranslation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colourBuffer),this.gl.vertexAttribPointer(this.shader.attribute.colourOverride,3,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.colourOverride),this.gl.useProgram(this.shader.shaderId),this.backgroundRenderService.applyShaderArguments(this.backgroundShaderPositions),this.gl.uniformMatrix4fv(this.shader.uniform.projectionMatrix,!1,this.projectionMatrix),this.gl.uniformMatrix4fv(this.shader.uniform.modelMatrix,!1,this.modelViewMatrix);const e=this.positions.length/3;this.gl.drawArrays(this.gl.TRIANGLES,0,e)}createItem(t){return{renderId:this.particleArray.createItem(t)}}updateItem(t,e){this.particleArray.updateItem(t.renderId,e)}freeItem(t){this.particleArray.freeItem(t.renderId)}attachViewMatrices(t,e){this.modelViewMatrix=t,this.projectionMatrix=e}onArrayReconstruct(t,e){const n=e.length;this.positions=new Float32Array(new Array(2*n*3*3).fill(0)),this.translations=new Float32Array(new Array(2*n*3*3).fill(0)),this.colours=new Float32Array(new Array(2*n*3*3).fill(0));for(let t=0;t<e.length;t++)this.onInjection(t,e[t].obj);this.onArrayUpdate(t)}onArrayUpdate(t){t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,this.positions,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.translationBuffer),t.bufferData(t.ARRAY_BUFFER,this.translations,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.colourBuffer),t.bufferData(t.ARRAY_BUFFER,this.colours,t.DYNAMIC_DRAW)}onInjection(t,e){const n=2*t*3*3,r=2*t*3*3,i=e.size[0]/2,o=e.size[1]/2,a=2*e.position[0],s=2*e.position[1],u=2*e.position[2];this.positions[n]=-i,this.positions[n+1]=o,this.positions[n+2]=0,this.positions[n+3]=i,this.positions[n+4]=o,this.positions[n+5]=0,this.positions[n+6]=-i,this.positions[n+7]=-o,this.positions[n+8]=0,this.positions[n+9]=+i,this.positions[n+10]=o,this.positions[n+11]=0,this.positions[n+12]=+i,this.positions[n+13]=-o,this.positions[n+14]=0,this.positions[n+15]=-i,this.positions[n+16]=-o,this.positions[n+17]=0,this.translations[n]=a,this.translations[n+1]=s,this.translations[n+2]=u,this.translations[n+3]=a,this.translations[n+4]=s,this.translations[n+5]=u,this.translations[n+6]=a,this.translations[n+7]=s,this.translations[n+8]=u,this.translations[n+9]=a,this.translations[n+10]=s,this.translations[n+11]=u,this.translations[n+12]=a,this.translations[n+13]=s,this.translations[n+14]=u,this.translations[n+15]=a,this.translations[n+16]=s,this.translations[n+17]=u,this.colours[r]=e.r,this.colours[r+1]=e.g,this.colours[r+2]=e.b,this.colours[r+3]=e.r,this.colours[r+4]=e.g,this.colours[r+5]=e.b,this.colours[r+6]=e.r,this.colours[r+7]=e.g,this.colours[r+8]=e.b,this.colours[r+9]=e.r,this.colours[r+10]=e.g,this.colours[r+11]=e.b,this.colours[r+12]=e.r,this.colours[r+13]=e.g,this.colours[r+14]=e.b,this.colours[r+15]=e.r,this.colours[r+16]=e.g,this.colours[r+17]=e.b}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScreenShakeService=void 0;const r=n(21);e.ScreenShakeService=class{constructor(){this.currentMagnitude=0}update(){this.currentMagnitude=.75*this.currentMagnitude}shake(t){this.currentMagnitude=t}applyToMatrices(t){if(this.currentMagnitude<1e-4)return;const e=.2*this.currentMagnitude,n=Math.random()*e,i=Math.random()*e,o=Math.random()*e;r.mat4.translate(t,t,[n,i,o])}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteRenderService=void 0;const r=n(22),i=n(26);e.SpriteRenderService=class{constructor(t){this.backgroundRenderService=t}init(t){this.gl=t,this.shader=(0,i.compileSpriteShader)(t),this.backgroundShaderPositions=this.shader.uniform,this.spriteArray=new r.SyncedArray({onReconstruct:e=>this.onArrayReconstruct(t,e),onUpdate:e=>this.onArrayUpdate(t),onInjection:(t,e)=>this.onInjection(t,e.obj)}),this.positionBuffer=t.createBuffer(),this.translationBuffer=t.createBuffer(),this.textureBuffer=t.createBuffer(),this.colourBuffer=t.createBuffer()}draw(){if(this.spriteArray.sync(),0===this.spriteArray.getArray().length)return;const t=this.gl.FLOAT;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionBuffer),this.gl.vertexAttribPointer(this.shader.attribute.vertexPosition,3,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.vertexPosition),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.translationBuffer),this.gl.vertexAttribPointer(this.shader.attribute.vertexTranslation,3,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.vertexTranslation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colourBuffer),this.gl.vertexAttribPointer(this.shader.attribute.colourOverride,4,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.colourOverride),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureBuffer),this.gl.vertexAttribPointer(this.shader.attribute.texturePosition,2,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.texturePosition),this.gl.useProgram(this.shader.shaderId),this.backgroundRenderService.applyShaderArguments(this.backgroundShaderPositions),this.gl.uniformMatrix4fv(this.shader.uniform.projectionMatrix,!1,this.projectionMatrix),this.gl.uniformMatrix4fv(this.shader.uniform.modelMatrix,!1,this.modelViewMatrix),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.spritesheet),this.gl.uniform1i(this.shader.attribute.textureSampler,0);const e=this.positions.length/3;this.gl.drawArrays(this.gl.TRIANGLES,0,e)}createItem(t){return{renderId:this.spriteArray.createItem(t)}}updateItem(t,e){this.spriteArray.updateItem(t.renderId,e)}freeItem(t){this.spriteArray.freeItem(t.renderId)}attachSpritesheet(t){this.spritesheet=t}attachViewMatrices(t,e){this.modelViewMatrix=t,this.projectionMatrix=e}onArrayReconstruct(t,e){const n=e.length;this.positions=new Float32Array(new Array(2*n*3*3).fill(0)),this.texture=new Float32Array(new Array(2*n*3*2).fill(0)),this.translations=new Float32Array(new Array(2*n*3*3).fill(0)),this.colours=new Float32Array(new Array(2*n*3*4).fill(0));for(let t=0;t<e.length;t++)this.onInjection(t,e[t].obj);this.onArrayUpdate(t)}onArrayUpdate(t){t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,this.positions,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.translationBuffer),t.bufferData(t.ARRAY_BUFFER,this.translations,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.textureBuffer),t.bufferData(t.ARRAY_BUFFER,this.texture,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.colourBuffer),t.bufferData(t.ARRAY_BUFFER,this.colours,t.DYNAMIC_DRAW)}onInjection(t,e){const n=2*t*3*3,r=2*t*3*2,i=2*t*3*4,o=e.size[0],a=e.size[1],s=2*e.position[0],u=2*e.height,c=2*e.position[1];this.positions[n]=-o,this.positions[n+1]=a,this.positions[n+2]=0,this.positions[n+3]=o,this.positions[n+4]=a,this.positions[n+5]=0,this.positions[n+6]=-o,this.positions[n+7]=-a,this.positions[n+8]=0,this.positions[n+9]=+o,this.positions[n+10]=a,this.positions[n+11]=0,this.positions[n+12]=+o,this.positions[n+13]=-a,this.positions[n+14]=0,this.positions[n+15]=-o,this.positions[n+16]=-a,this.positions[n+17]=0,this.translations[n]=s,this.translations[n+1]=u,this.translations[n+2]=c,this.translations[n+3]=s,this.translations[n+4]=u,this.translations[n+5]=c,this.translations[n+6]=s,this.translations[n+7]=u,this.translations[n+8]=c,this.translations[n+9]=s,this.translations[n+10]=u,this.translations[n+11]=c,this.translations[n+12]=s,this.translations[n+13]=u,this.translations[n+14]=c,this.translations[n+15]=s,this.translations[n+16]=u,this.translations[n+17]=c;const l=e.texture.textureX,f=e.texture.textureY,h=e.texture.textureWidth,d=e.texture.textureHeight;this.texture[r]=l,this.texture[r+1]=f,this.texture[r+2]=l+h,this.texture[r+3]=f,this.texture[r+4]=l,this.texture[r+5]=f+d,this.texture[r+6]=l+h,this.texture[r+7]=f,this.texture[r+8]=l+h,this.texture[r+9]=f+d,this.texture[r+10]=l,this.texture[r+11]=f+d,this.colours[i]=e.shade.r,this.colours[i+1]=e.shade.g,this.colours[i+2]=e.shade.b,this.colours[i+3]=e.shade.intensity,this.colours[i+4]=e.shade.r,this.colours[i+5]=e.shade.g,this.colours[i+6]=e.shade.b,this.colours[i+7]=e.shade.intensity,this.colours[i+8]=e.shade.r,this.colours[i+9]=e.shade.g,this.colours[i+10]=e.shade.b,this.colours[i+11]=e.shade.intensity,this.colours[i+12]=e.shade.r,this.colours[i+13]=e.shade.g,this.colours[i+14]=e.shade.b,this.colours[i+15]=e.shade.intensity,this.colours[i+16]=e.shade.r,this.colours[i+17]=e.shade.g,this.colours[i+18]=e.shade.b,this.colours[i+19]=e.shade.intensity,this.colours[i+20]=e.shade.r,this.colours[i+21]=e.shade.g,this.colours[i+22]=e.shade.b,this.colours[i+23]=e.shade.intensity}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectRenderService=void 0;const r=n(21),i=n(22),o=n(26),a=r.mat4.identity(r.mat4.create()),s=r.mat4.create();e.ObjectRenderService=class{constructor(t){this.backgroundRenderService=t}init(t){this.gl=t,this.shader=(0,o.compileVoxelShader)(t),this.backgroundShaderPositions=this.shader.uniform,this.objectArray=new i.SyncedArray({onReconstruct:e=>this.onArrayReconstruct(t,e),onUpdate:e=>this.onArrayUpdate(t),onInjection:(t,e)=>this.onInjection(t,e.obj)}),this.positionBuffer=t.createBuffer(),this.colourBuffer=t.createBuffer()}draw(){if(this.objectArray.sync(),0===this.objectArray.getArray().length)return;const t=this.gl.FLOAT;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionBuffer),this.gl.vertexAttribPointer(this.shader.attribute.vertexPosition,3,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.vertexPosition),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colourBuffer),this.gl.vertexAttribPointer(this.shader.attribute.colourOverride,3,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.colourOverride),this.gl.useProgram(this.shader.shaderId),this.backgroundRenderService.applyShaderArguments(this.backgroundShaderPositions),this.gl.uniformMatrix4fv(this.shader.uniform.projectionMatrix,!1,this.projectionMatrix);const e=this.objectArray.getArray();let n=0;for(let t=0;t<e.length;t++){const i=r.mat4.multiply(s,this.modelViewMatrix,e[0].obj.transform||a);this.gl.uniformMatrix4fv(this.shader.uniform.modelMatrix,!1,i);const o=3*e[t].obj.colour.length;0!==o&&(this.gl.drawArrays(this.gl.TRIANGLES,n,o),n+=o)}}createItem(t){return{renderId:this.objectArray.createItem(t)}}updateItem(t,e){this.objectArray.updateItem(t.renderId,e)}freeItem(t){this.objectArray.freeItem(t.renderId)}attachViewMatrices(t,e){this.modelViewMatrix=t,this.projectionMatrix=e}onArrayReconstruct(t,e){const n=e.reduce((t,e)=>t+e.obj.colour.length,0),r=3*n,i=3*n;this.positions=new Float32Array(new Array(3*r).fill(0)),this.colours=new Float32Array(new Array(3*i).fill(0));for(let t=0;t<e.length;t++)this.onInjection(t,e[t].obj);this.onArrayUpdate(t)}onArrayUpdate(t){t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,this.positions,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.colourBuffer),t.bufferData(t.ARRAY_BUFFER,this.colours,t.DYNAMIC_DRAW)}onInjection(t,e){const{positions:n,colour:r}=e,i=3*this.objectArray.getArray().slice(0,t).reduce((t,e)=>t+e.obj.colour.length,0),o=3*i,a=3*i;for(let t=0;t<e.colour.length;t++){const e=9*t;this.positions[e+o]=n[t][0][0],this.positions[e+o+1]=n[t][0][1],this.positions[e+o+2]=n[t][0][2],this.positions[e+o+3]=n[t][1][0],this.positions[e+o+4]=n[t][1][1],this.positions[e+o+5]=n[t][1][2],this.positions[e+o+6]=n[t][2][0],this.positions[e+o+7]=n[t][2][1],this.positions[e+o+8]=n[t][2][2],this.colours[e+a]=r[t][0],this.colours[e+a+1]=r[t][1],this.colours[e+a+2]=r[t][2],this.colours[e+a+3]=r[t][0],this.colours[e+a+4]=r[t][1],this.colours[e+a+5]=r[t][2],this.colours[e+a+6]=r[t][0],this.colours[e+a+7]=r[t][1],this.colours[e+a+8]=r[t][2]}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WallRenderService=void 0;const r=n(22),i=n(26);e.WallRenderService=class{constructor(t){this.backgroundRenderService=t}init(t){this.gl=t,this.shader=(0,i.compileTextureRepeatShader)(t),this.backgroundShaderPositions=this.shader.uniform,this.wallArray=new r.SyncedArray({onReconstruct:e=>this.onArrayReconstruct(t,e),onUpdate:e=>this.onArrayUpdate(t),onInjection:(t,e)=>this.onInjection(t,e.obj)}),this.positionBuffer=t.createBuffer(),this.textureBuffer=t.createBuffer(),this.textureStartBuffer=t.createBuffer(),this.textureSizeBuffer=t.createBuffer()}draw(){if(this.wallArray.sync(),0===this.wallArray.getArray().length)return;const t=this.gl.FLOAT;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionBuffer),this.gl.vertexAttribPointer(this.shader.attribute.vertexPosition,3,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.vertexPosition),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureBuffer),this.gl.vertexAttribPointer(this.shader.attribute.texturePosition,2,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.texturePosition),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureStartBuffer),this.gl.vertexAttribPointer(this.shader.attribute.textureStart,2,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.textureStart),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureSizeBuffer),this.gl.vertexAttribPointer(this.shader.attribute.textureSize,2,t,!1,0,0),this.gl.enableVertexAttribArray(this.shader.attribute.textureSize),this.gl.useProgram(this.shader.shaderId),this.backgroundRenderService.applyShaderArguments(this.backgroundShaderPositions),this.gl.uniformMatrix4fv(this.shader.uniform.projectionMatrix,!1,this.projectionMatrix),this.gl.uniformMatrix4fv(this.shader.uniform.modelMatrix,!1,this.modelViewMatrix),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.spritesheet),this.gl.uniform1i(this.shader.attribute.textureSampler,0);const e=this.positions.length/3;this.gl.drawArrays(this.gl.TRIANGLES,0,e)}createItem(t){return{renderId:this.wallArray.createItem(t)}}updateItem(t,e){this.wallArray.updateItem(t.renderId,e)}freeItem(t){this.wallArray.freeItem(t.renderId)}attachSpritesheet(t){this.spritesheet=t}attachViewMatrices(t,e){this.modelViewMatrix=t,this.projectionMatrix=e}onArrayReconstruct(t,e){const n=e.length;this.positions=new Float32Array(new Array(2*n*3*3).fill(0)),this.texture=new Float32Array(new Array(2*n*3*2).fill(0)),this.textureStart=new Float32Array(new Array(2*n*3*2).fill(0)),this.textureSize=new Float32Array(new Array(2*n*3*2).fill(0));for(let t=0;t<e.length;t++)this.onInjection(t,e[t].obj);this.onArrayUpdate(t)}onArrayUpdate(t){t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,this.positions,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.textureBuffer),t.bufferData(t.ARRAY_BUFFER,this.texture,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.textureStartBuffer),t.bufferData(t.ARRAY_BUFFER,this.textureStart,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.textureSizeBuffer),t.bufferData(t.ARRAY_BUFFER,this.textureSize,t.STATIC_DRAW)}onInjection(t,e){const n=2*t*3*2,r=2*t*3*3,{startPos:i,endPos:o,startHeight:a,startOffset:s,endHeight:u,endOffset:c,textureX:l,textureY:f,textureWidth:h,textureHeight:d,repeatWidth:p,repeatHeight:m}=e,g=f+2e-4,v=d-2e-4;this.positions[r]=i[0],this.positions[r+1]=a+s,this.positions[r+2]=i[1],this.positions[r+3]=o[0],this.positions[r+4]=u+c,this.positions[r+5]=o[1],this.positions[r+6]=i[0],this.positions[r+7]=s,this.positions[r+8]=i[1],this.positions[r+9]=i[0],this.positions[r+10]=c,this.positions[r+11]=i[1],this.positions[r+12]=o[0],this.positions[r+13]=u+c,this.positions[r+14]=o[1],this.positions[r+15]=o[0],this.positions[r+16]=c,this.positions[r+17]=o[1],this.texture[n]=l,this.texture[n+1]=g,this.texture[n+2]=l+h,this.texture[n+3]=g,this.texture[n+4]=l,this.texture[n+5]=g+v,this.texture[n+6]=l,this.texture[n+7]=g+v,this.texture[n+8]=l+h,this.texture[n+9]=g,this.texture[n+10]=l+h,this.texture[n+11]=g+v,this.textureStart[n]=l,this.textureStart[n+1]=g,this.textureStart[n+2]=l,this.textureStart[n+3]=g,this.textureStart[n+4]=l,this.textureStart[n+5]=g,this.textureStart[n+6]=l,this.textureStart[n+7]=g,this.textureStart[n+8]=l,this.textureStart[n+9]=g,this.textureStart[n+10]=l,this.textureStart[n+11]=g,this.textureSize[n]=p,this.textureSize[n+1]=m,this.textureSize[n+2]=p,this.textureSize[n+3]=m,this.textureSize[n+4]=p,this.textureSize[n+5]=m,this.textureSize[n+6]=p,this.textureSize[n+7]=m,this.textureSize[n+8]=p,this.textureSize[n+9]=m,this.textureSize[n+10]=p,this.textureSize[n+11]=m}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextRenderService=void 0;const r=n(22);e.TextRenderService=class{constructor(t,e){this.resourceManager=t,this.spriteRenderService=e}init(t){this.gl=t,this.textArray=new r.SyncedArray({onUpdate:t=>{},onReconstruct:t=>{},onInjection:(t,e)=>{}})}draw(){this.textArray.sync()}createItem(t){const e=this.constructTextRenderObject(t);return{renderId:this.textArray.createItem(e)}}updateItem(t,e){const n=this.textArray.findRealIndexOf(t.renderId),r=this.textArray.getArray()[n].obj,{textRender:i,sprites:o}=r,a=Object.assign(Object.assign({},i),e),{contents:s}=a;let u=o;if(s.length!==o.length){for(let t=o.length;t<s.length;t++)u.push(this.spriteRenderService.createItem(this.constructTextChar(a,n)));for(let t=o.length;t>s.length;t--)this.spriteRenderService.freeItem(o[t-1]);u=u.slice(0,s.length)}s.split("").map((t,e)=>this.constructTextChar(a,e)).forEach((t,e)=>this.spriteRenderService.updateItem(o[e],t)),this.textArray.updateItem(t.renderId,{sprites:u,textRender:a})}freeItem(t){const e=this.textArray.findRealIndexOf(t.renderId);this.textArray.getArray()[e].obj.sprites.forEach(t=>{this.spriteRenderService.freeItem(t)}),this.textArray.freeItem(t.renderId)}constructTextRenderObject(t){const{contents:e}=t,n=e.split("").map((e,n)=>this.constructTextChar(t,n)).map(t=>this.spriteRenderService.createItem(t));return{textRender:t,sprites:n}}constructTextChar(t,e){const{position:n,size:r,colour:i,height:o,contents:a,angle:s,horizontalPlacement:u,verticalPlacement:c}=t,l=null!=c?c:0,f=null!=u?u:0,h=r*(e+.5)*.8-this.getWidth(t)*f;return{position:[n[0]+Math.cos(s)*h,n[1]+Math.sin(s)*h],size:[r,r],height:o+this.getHeight(t)*l,shade:Object.assign(Object.assign({},i),{intensity:1}),texture:this.getFont(this.getFrameFromChar(a.charAt(e)))}}getWidth(t){return t.size*t.contents.length*.8}getHeight(t){return t.size}getFont(t){return this.resourceManager.getDefaultSpriteSheet().getAnimationFrame("font",t).textureCoordinate}getFrameFromChar(t){const e=t.toUpperCase().charCodeAt(0);return e-48<10&&e-48>=0?e-48:e-65<26&&e-65>=0?e-65:0}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UIContainer=void 0;const r=n(0),i=n(7),o=n(178),a=n(252),s=n(253),u=n(273);e.UIContainer=t=>{const[e,n]=(0,i.useGlobalState)();return r.createElement("div",{style:{position:"absolute"}},e.uiState.canAccessGame?r.createElement(r.Fragment,null,r.createElement(s.PlayModeContainer,null),r.createElement(a.GameFadeContainer,null),r.createElement(o.GameMenuContainer,null)):r.createElement(r.Fragment,null,r.createElement(u.LoadingScreenContainer,null)))}},function(t,e,n){"use strict";var r=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Store=void 0;var i=n(94);var o=function(){function t(t,e){var n,o,a,s,u=this;this.changeListeners=[],this.state=t.state,this.eventListeners=new i.FunctionEventSubscriber(e),this.eventListeners.subscribe((n=t.actions,o=function(){return u.state},a=function(t){return u.state=t},s={},Object.keys(n).forEach((function(t){s[t]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var s=o();a(n[t].apply(n,r([s],e)))}})),s)),this.eventListeners.subscribe(function(t,e){var n={};return Object.keys(t).forEach((function(t){n[t]=e})),n}(e,(function(){u.changeListeners.forEach((function(t){return t()}))})))}return t.prototype.getState=function(){return this.state},t.prototype.getActions=function(){return this.eventListeners.actions()},t.prototype.subscribe=function(t){this.eventListeners.subscribe(t)},t.prototype.unsubscribe=function(t){this.eventListeners.unsubscribe(t)},t.prototype.addChangeListener=function(t){this.changeListeners.push(t)},t.prototype.removeChangeListener=function(t){var e=this.changeListeners.indexOf(t);e<0||this.changeListeners.splice(e,1)},t}();e.Store=o},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.combineReducers=void 0,e.combineReducers=function(t){var e={},n={},o={};return Object.keys(t).forEach((function(n){var r=t[n];e[n]=r.state,Object.keys(r.actions).forEach((function(t){var e=r.actions[t],i=[n,e];o[t]?o[t].push(i):o[t]=[i]}))})),Object.keys(o).forEach((function(t){var e=o[t];n[t]=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var a=r({},t);return e.forEach((function(e){var r=e[0],o=e[1].apply(void 0,i([t[r]],n));a[r]=o})),a}})),{state:e,actions:n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.gameStartReducer=void 0,e.gameStartReducer={state:{showingMenu:!0,showingFade:!0,gameLoadPercentage:0,fps:0,currentStage:0,maxStage:0,menu:"MAIN"},actions:{startGame:t=>Object.assign(Object.assign({},t),{showingMenu:!1,showingFade:!1,menu:"MAIN"}),stopGame:t=>Object.assign(Object.assign({},t),{showingMenu:!0,showingFade:!0,menu:"MAIN"}),fadeBackground:t=>Object.assign(Object.assign({},t),{showingFade:!0}),fadeMenu:t=>Object.assign(Object.assign({},t),{showingMenu:!0}),setGameLoadPercentage:(t,e)=>Object.assign(Object.assign({},t),{gameLoadPercentage:e}),setGameFPS:(t,e)=>Object.assign(Object.assign({},t),{fps:e}),onStageReached:(t,e)=>Object.assign(Object.assign({},t),{currentStage:e,maxStage:Math.max(e,t.maxStage)}),onMaxStageReached:(t,e)=>Object.assign(Object.assign({},t),{maxStage:e}),onBeatGame:t=>Object.assign(Object.assign({},t),{showingMenu:!0,showingFade:!0,menu:"CREDITS"})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inventoryReducer=void 0,e.inventoryReducer={state:{showing:!1},actions:{onPlayerInventoryOpened:()=>({showing:!0}),onPlayerInventoryClosed:()=>({showing:!1})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.keyHintReducer=void 0,e.keyHintReducer={state:{keyHints:{}},actions:{addKeyHint:(t,e)=>({keyHints:Object.assign(Object.assign({},t.keyHints),{[e.id]:{keys:e.keys,hint:e.hint}})}),removeKeyHint:(t,e)=>{const n=Object.assign({},t.keyHints);return delete n[e.id],{keyHints:n}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.minigameReducer=void 0,e.minigameReducer={state:{visible:!1,onComplete:()=>{}},actions:{closeMiniGame:t=>Object.assign(Object.assign({},t),{visible:!1,onComplete:()=>{}}),openLockpickEvent:(t,e,n)=>Object.assign(Object.assign({},t),{visible:!0,onComplete:e,configuration:n})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.playerReducer=void 0,e.playerReducer={state:{},actions:{onPlayerHealth:(t,e)=>Object.assign(Object.assign({},t),{health:e})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uiReducer=void 0,e.uiReducer={state:{canAccessGame:!1},actions:{onGameInitialised:t=>Object.assign(Object.assign({},t),{canAccessGame:!0})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CreditsContainer=e.MainMenuContainer=e.GameMenuContainer=void 0;const r=n(0),i=n(5),o=n(95),a=n(51),s=n(7),u=n(1),c=n(15);e.GameMenuContainer=t=>{const[n,i]=(0,s.useGlobalState)();switch(n.gameStart.menu){case"MAIN":return r.createElement(e.MainMenuContainer,null);case"CREDITS":return r.createElement(e.CreditsContainer,null)}};e.MainMenuContainer=t=>{const[e,n]=(0,s.useGlobalState)(),l=(0,c.useServiceLocator)(),f=()=>{n.startGame(),l.getScriptingService().startGame()},{beatenGame:h}=l.getScriptingService().getPlayer().getMutableState(),{currentStage:d,maxStage:p}=e.gameStart,m=h?"You've beaten the game!":"Your best stage reached is "+p,g=p>0||h&&e.gameStart.showingMenu?r.createElement(i.TextComponent,{text:m,style:{width:"100%",textAlign:"center"},font:i.TextFont.REGULAR,size:i.TextSize.SMALL,colour:i.TextColour.LIGHT}):null;return r.createElement(a.FadeComponent,{startingShown:!1,shouldShow:e.gameStart.showingMenu,fadeInSpeed:1e3,fadeOutSpeed:150,render:t=>0===t?r.createElement(r.Fragment,null):r.createElement("div",{style:{width:u.DOM_WIDTH,height:u.DOM_HEIGHT,position:"absolute",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",opacity:t}},r.createElement(i.TextComponent,{text:"Otherworld",style:{width:"100%",textAlign:"center",marginTop:10},font:i.TextFont.REGULAR,size:i.TextSize.BIG,colour:i.TextColour.LIGHT}),g,r.createElement(o.GameButtonContainer,{width:256,height:46,style:{marginTop:30},childStyle:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onSelect:f},r.createElement(i.TextComponent,{text:"New Game",style:{},font:i.TextFont.REGULAR,size:i.TextSize.SMALL,colour:i.TextColour.LIGHT})),r.createElement(i.TextComponent,{text:"Copyright  2021 Callum Macmillan",style:{marginTop:100},font:i.TextFont.REGULAR,size:i.TextSize.SMALL,colour:i.TextColour.LIGHT}))})};e.CreditsContainer=t=>{const[e,n]=(0,s.useGlobalState)(),l=(0,c.useServiceLocator)(),f=()=>{n.startGame(),l.getScriptingService().startGame()},{beatenGame:h}=l.getScriptingService().getPlayer().getMutableState(),{currentStage:d,maxStage:p}=e.gameStart;p>0||h&&e.gameStart.showingMenu;return r.createElement(a.FadeComponent,{startingShown:!1,shouldShow:e.gameStart.showingMenu,fadeInSpeed:1e3,fadeOutSpeed:150,render:t=>0===t?r.createElement(r.Fragment,null):r.createElement("div",{style:{width:u.DOM_WIDTH,height:u.DOM_HEIGHT,position:"absolute",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",opacity:t}},r.createElement(i.TextComponent,{text:"Congratulations",style:{width:"100%",textAlign:"center",marginTop:10},font:i.TextFont.REGULAR,size:i.TextSize.BIG,colour:i.TextColour.LIGHT}),r.createElement(a.FadeComponent,{startingShown:!1,shouldShow:e.gameStart.showingMenu,delay:1e3,fadeInSpeed:1e3,fadeOutSpeed:150,render:t=>r.createElement(i.TextComponent,{text:"You've beaten the game!",style:{opacity:t,width:"100%",textAlign:"center"},font:i.TextFont.REGULAR,size:i.TextSize.SMALL,colour:i.TextColour.LIGHT})}),r.createElement(a.FadeComponent,{startingShown:!1,shouldShow:e.gameStart.showingMenu,delay:2e3,fadeInSpeed:1e3,fadeOutSpeed:150,render:t=>r.createElement(i.TextComponent,{text:"There's nothing else but you can play again if you want",style:{opacity:t,width:"100%",textAlign:"center"},font:i.TextFont.REGULAR,size:i.TextSize.SMALL,colour:i.TextColour.LIGHT})}),r.createElement(a.FadeComponent,{startingShown:!1,shouldShow:e.gameStart.showingMenu,delay:3e3,fadeInSpeed:1e3,fadeOutSpeed:150,render:t=>r.createElement(i.TextComponent,{text:"Thank you for playing",style:{opacity:t,width:"100%",textAlign:"center"},font:i.TextFont.REGULAR,size:i.TextSize.SMALL,colour:i.TextColour.LIGHT})}),r.createElement(a.FadeComponent,{startingShown:!1,shouldShow:e.gameStart.showingMenu,delay:4e3,fadeInSpeed:1e3,fadeOutSpeed:150,render:t=>r.createElement("div",{style:{width:u.DOM_WIDTH,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",opacity:t,marginTop:32}},r.createElement(o.GameButtonContainer,{width:256,height:46,style:{},childStyle:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onSelect:f},r.createElement(i.TextComponent,{text:"New Game",style:{},font:i.TextFont.REGULAR,size:i.TextSize.SMALL,colour:i.TextColour.LIGHT})))}))})}},function(t,e,n){"use strict";(function(t){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;const i=n(1),o=n(180),a=n(59),s=n(202),u=n(203),c=n(102),l=n(40),f=n(231),h=n(10),d=n(232),p=n(245),m=n(246),g=n(91),v=n(247),y=n(248),b=n(249),E=n(250),S=n(60),w=n(251);e.Game=class{constructor(){this.initialised=!1,this.updateWorld=!1,this.isHidden=!1,this.update=()=>{this.serviceLocator.getScriptingService().update(),this.serviceLocator.getWorld().performSync(),h.ProcedureService.update(),this.updateWorld&&!this.isHidden&&(this.serviceLocator.getScriptingService().getPlayer().update(),this.serviceLocator.getInputService().update(),this.serviceLocator.getWorld().update(),this.serviceLocator.getPhysicsService().update(),this.serviceLocator.getInteractionService().update(),this.serviceLocator.getParticleService().update(),h.ProcedureService.gameUpdate())},this.draw=()=>{this.serviceLocator.getRenderService().draw()},this.mainLoop=(t,e,n,r)=>{(0,S.logFPS)(t=>{const e=h.ProcedureService.getPendingTimerCounts();console.log(`FPS: ${t} BudgetUsage: ${Math.floor(100*r)}% EntityCount: ${this.serviceLocator.getWorld().getEntityArray().getArray().length} Intervals ${e.intervals} Timeouts ${e.timeouts}\n                Particles ${this.serviceLocator.getParticleService().getParticles().length}\n                `)}),(0,S.setFPSProportion)(1/n),this.update(),this.draw()}}init(e,n){return r(this,void 0,void 0,(function*(){this.store=n;const r=new AudioContext,h=new g.ScreenBuffer(e,i.WIDTH,i.HEIGHT),S=new u.ResourceManager;yield S.load(e,r,n);const _=new s.World,T=new o.ScriptingService(this),x=new l.InputService,A=new f.InteractionService,I=new y.SerialisationService,P=new a.TutorialService,M=new d.MapService;let O;this.serviceLocator=new E.ServiceLocator(this,S,_,new g.RenderService(S),new c.AudioService(r),n,T,x,new m.PhysicsService,A,I,P,new p.ParticleService,M),this.serviceLocator.getSerialisationService().init(this.serviceLocator),this.serviceLocator.getInputService().init(this.serviceLocator),this.serviceLocator.getRenderService().init(h.getOpenGL()),this.serviceLocator.getWorld().init(),this.serviceLocator.getTutorialService().init(this.serviceLocator),this.serviceLocator.getParticleService().init(this.serviceLocator),this.serviceLocator.getScriptingService().init(this.serviceLocator),this.serviceLocator.getMapService().init(this.serviceLocator),this.storage=new b.GameStorage,t.storage=this.storage;const C=()=>{this.serviceLocator.getScriptingService().bootstrapInitialContent(!1)};try{if(this.storage.isSaveAvailable()){const t=this.storage.getSaveGame();O=t,t.version!==i.VERSION&&(O=void 0,console.log("save version incompatible ",t.version,i.VERSION)),(0,i.IS_DEV_MODE)()&&(O=void 0,console.log("not loading save, in dev mode"))}if(O){console.log("Loading save game...",O);const t=this.serviceLocator.getSerialisationService().deserialise(O);this.serviceLocator.getScriptingService().bootsrapDeserialisedContent(t),this.setUpdateWorld(!0),this.serviceLocator.getInputService().setInputState(l.InputState.DEFAULT),this.serviceLocator.getStore().getActions().startGame(),console.log("Successfully loaded save game...",O)}else C()}catch(t){console.log("Error loading save game: ",t),C()}v.SerialisationListeners.attachWindowExitListener(this.serviceLocator,this.storage);const R=new w.TimeControlledLoop(i.TARGET_MILLIS,this.mainLoop);this.initialised=!0,this.serviceLocator.getStore().getActions().onGameInitialised(),this.isHidden&&this.serviceLocator.getAudioService().pauseSong(),R.start()}))}isInitialised(){return this.initialised}getServiceLocator(){return this.serviceLocator}setUpdateWorld(t){this.updateWorld=t}setIsHidden(t){this.isHidden=t,this.serviceLocator&&(t?this.serviceLocator.getAudioService().pauseSong():this.serviceLocator.getAudioService().resumeSong())}}}).call(this,n(11))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScriptingService=void 0;const r=n(4),i=n(56),o=n(40),a=n(3),s=n(193);e.ScriptingService=class{constructor(t){this.shouldReset=!1,this.game=t}init(t){this.serviceLocator=t}getPlayer(){return this.player}update(){}startGame(){this.serviceLocator.getInputService().setInputState(o.InputState.DEFAULT),this.game.setUpdateWorld(!0),this.serviceLocator.getAudioService().play(this.serviceLocator.getResourceManager().manifest.audio[(0,a.randomSelection)([r.Audios.START])],void 0,void 0)}stopGame(){const t=this.serviceLocator.getScriptingService().getPlayer().getMutableState().beatenGame;this.serviceLocator.getInputService().setInputState(o.InputState.MENU),this.game.setUpdateWorld(!1),this.serviceLocator.getStore().getActions().stopGame(),this.serviceLocator.getAudioService().stopSong(),this.serviceLocator.getAudioService().play(this.serviceLocator.getResourceManager().manifest.audio[(0,a.randomSelection)([r.Audios.END])]),setTimeout(()=>{this.offloadWorld(),this.bootstrapInitialContent(t)},1e3)}onBeatGame(){this.serviceLocator.getInputService().setInputState(o.InputState.MENU),this.game.setUpdateWorld(!1);this.serviceLocator.getScriptingService().getPlayer().getMutableState().beatenGame=!0,this.serviceLocator.getAudioService().stopSong(),this.serviceLocator.getStore().getActions().onBeatGame(),this.serviceLocator.getAudioService().play(this.serviceLocator.getResourceManager().manifest.audio[(0,a.randomSelection)([r.Audios.WON])]),setTimeout(()=>{this.offloadWorld(),this.bootstrapInitialContent(!0)},1e3)}offloadWorld(){this.offloadEntities(),this.player&&this.player.destroy(),this.serviceLocator.getTutorialService().destroy(),this.serviceLocator.getMapService().destroy()}offloadEntities(){const t=this.serviceLocator.getWorld(),e=t.getEntityArray();for(const n of e.getArray())t.removeEntity(n);t.performSync(),this.serviceLocator.getParticleService().destroy()}bootsrapDeserialisedContent(t){const{maps:e,player:n,currentMap:r}=t.world,{tutorial:i}=t.services,o=e[r].entities;this.offloadWorld();const a=this.serviceLocator.getWorld();this.player=n,this.player.init(),this.serviceLocator.getAudioService().attachCamera(()=>this.player.getCamera()),this.serviceLocator.getRenderService().attachCamera(()=>this.player.getCamera()),this.serviceLocator.getMapService().setExistingMapData(e,r),this.serviceLocator.getTutorialService().onStart(i),o.forEach(t=>a.addEntity(t)),a.performSync(),this.serviceLocator.getStore().getActions().onMaxStageReached(t.maxStage)}bootstrapInitialContent(t){this.player=(0,s.createPlayer)(this.serviceLocator,t),this.player.init(),this.serviceLocator.getAudioService().attachCamera(()=>this.player.getCamera()),this.serviceLocator.getRenderService().attachCamera(()=>this.player.getCamera()),this.serviceLocator.getMapService().goToLocation({mapId:i.Maps.PRISON}),this.serviceLocator.getTutorialService().onStart()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultControlScheme=void 0;const r=n(28),i=n(98);e.DefaultControlScheme=class{constructor(t){this.serviceLocator=t}poll(t){t.KeyW&&(0,i.Walk)(this.serviceLocator)(i.WalkDirection.FORWARD),t.KeyS&&(0,i.Walk)(this.serviceLocator)(i.WalkDirection.BACK),t.KeyA&&(0,i.Walk)(this.serviceLocator)(i.WalkDirection.LEFT),t.KeyD&&(0,i.Walk)(this.serviceLocator)(i.WalkDirection.RIGHT),t.ArrowLeft&&(0,i.Turn)(this.serviceLocator)(i.TurnDirection.ANTICLOCKWISE),t.ArrowRight&&(0,i.Turn)(this.serviceLocator)(i.TurnDirection.CLOCKWISE),t.KeyE&&(0,i.Interact)(this.serviceLocator)(),t.Space&&(0,i.Attack)(this.serviceLocator)}onKeyDown(t,e){if("KeyI"==t&&(0,r.OpenInventory)(this.serviceLocator)(),"KeyQ"==t){console.log("attempting to serialise");const t=this.serviceLocator.getSerialisationService().serialise(),e=this.serviceLocator.getSerialisationService().deserialise(t);console.log("Serialised: ",t),console.log("Deserialised: ",t),this.serviceLocator.getScriptingService().bootsrapDeserialisedContent(e)}}onKeyUp(t,e){}}},function(t,e,n){"use strict";function r(t,e,n){return(n-e)*t+e}Object.defineProperty(e,"__esModule",{value:!0}),e.create3DArray=e.forEach3D=e.map3D=e.toGameVector=e.toGameAngle=e.getTextureCoordinate=e.getGradientOffset=e.getGradientIncrementor=e.toRadians=e.clipToRange=e.convert_unit=e.interpolate=void 0,e.interpolate=r,e.convert_unit=function(t,e,n,i){return r(t/e,n,i)},e.clipToRange=function(t,e,n){let r=t;return r=r<e?e:r,r=r>n?n:r,r},e.toRadians=function(t){return t/180*Math.PI},e.getGradientIncrementor=function(t,e,n){return(e-t)/n},e.getGradientOffset=function(t,e,n){return(e-t)*n},e.getTextureCoordinate=function(t,e,n,r,i,o){return{textureX:i/t,textureY:o/e,textureWidth:n/t,textureHeight:r/e}},e.toGameAngle=function(t,e){return Math.atan2(t,-e)},e.toGameVector=function(t){return{x:Math.sin(t),y:-Math.cos(t)}},e.map3D=function(t,e){return t.map((t,n)=>t.map((t,r)=>t.map((t,i)=>e(t,n,r,i))))},e.forEach3D=function(t,e){t.forEach((t,n)=>t.forEach((t,r)=>t.forEach((t,i)=>e(t,n,r,i))))},e.create3DArray=function(t,e,n,r){const i=[];for(let o=0;o<t;o++){const t=[];for(let i=0;i<e;i++)t.push(new Array(n).fill(r));i.push(t)}return i}},function(t,e,n){"use strict";function r(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}Object.defineProperty(e,"__esModule",{value:!0}),e.swapSort=e.swap=void 0,e.swap=r,e.swapSort=function(t,e){let n=!0;for(;n;){n=!1;for(let i=0;i<t.length-1;i++){const o=e(t[i],t[i+1]),a=e(t[i+1],t[i]);!o&&a&&(n=!0,r(t,i,i+1))}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EffectAccuracyIncrease=void 0;e.EffectAccuracyIncrease=t=>({onTrigger:t=>{if("PLAYER"===t.type){t.player.getMutableState().bonuses.accuracy=!0}},onTriggerInverse:t=>{if("PLAYER"===t.type){t.player.getMutableState().bonuses.accuracy=!1}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EffectAncientPower=void 0;e.EffectAncientPower=t=>({onTrigger:t=>{if("PLAYER"===t.type){const e=t.player.getMutableState();e.bonuses.ancientPowerCount=Math.min(6,e.bonuses.ancientPowerCount+1),e.bonuses.ancientPower=6===e.bonuses.ancientPowerCount}},onTriggerInverse:t=>{if("PLAYER"===t.type){const e=t.player.getMutableState();e.bonuses.ancientPowerCount=Math.max(0,e.bonuses.ancientPowerCount-1),e.bonuses.ancientPower=!1}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EffectAttackSpeedIncrease=void 0;e.EffectAttackSpeedIncrease=t=>({onTrigger:t=>{if("PLAYER"===t.type){t.player.getMutableState().bonuses.attackSpeed=!0}},onTriggerInverse:t=>{if("PLAYER"===t.type){t.player.getMutableState().bonuses.attackSpeed=!1}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EffectDamagesTargetInRange=e.EffectDamagesTarget=void 0;const r=n(16),i=n(3);function o(t,e){if("PLAYER"===t.type){const{player:n,serviceLocator:i}=t,o=n.getPositon();i.getInteractionService().getInteractables(r.InteractionType.ATTACK,o,n.getAngle(),2).forEach(t=>{const i=t.source;i.type===r.InteractionSourceType.ENTITY&&i.entity.getActions().onDamagedByPlayer(e,n.getMutableState().bonuses.ancientPower)})}}e.EffectDamagesTarget=t=>({onTrigger:e=>{o(e,t.points)},onTriggerInverse:()=>{}});e.EffectDamagesTargetInRange=t=>({onTrigger:e=>{const n="PLAYER"===e.type&&e.player.getMutableState().bonuses.accuracy?t.b:(0,i.randomIntRange)(t.a,t.b+1);o(e,n)},onTriggerInverse:()=>{}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EffectIncreaseHealthPlayer=e.EffectHealsPlayer=void 0;e.EffectHealsPlayer=t=>({onTrigger:e=>{"PLAYER"===e.type&&(e.serviceLocator.getStore().getActions().onPlayerHealed(t.points),e.player.onHealed(t.points))},onTriggerInverse:t=>{}});e.EffectIncreaseHealthPlayer=t=>({onTrigger:e=>{"PLAYER"===e.type&&(e.serviceLocator.getStore().getActions().onPlayerHealed(1),e.player.setHealthBonus(e.player.getHealthBonus()+t.points))},onTriggerInverse:e=>{"PLAYER"===e.type&&(e.serviceLocator.getStore().getActions().onPlayerHealed(1),e.player.setHealthBonus(e.player.getHealthBonus()-t.points))}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EffectProtectionIncrease=void 0;e.EffectProtectionIncrease=t=>({onTrigger:t=>{if("PLAYER"===t.type){t.player.getMutableState().bonuses.protection=!0}},onTriggerInverse:t=>{if("PLAYER"===t.type){t.player.getMutableState().bonuses.protection=!1}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EffectSpeedIncrease=void 0;e.EffectSpeedIncrease=t=>({onTrigger:t=>{if("PLAYER"===t.type){t.player.getMutableState().bonuses.moveSpeed=!0}},onTriggerInverse:t=>{if("PLAYER"===t.type){t.player.getMutableState().bonuses.moveSpeed=!1}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InventoryControlScheme=void 0;const r=n(28);e.InventoryControlScheme=class{constructor(t){this.serviceLocator=t}poll(t){}onKeyDown(t,e){"KeyI"==t&&(0,r.CloseInventory)(this.serviceLocator)()}onKeyUp(t,e){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MenuControlScheme=void 0;e.MenuControlScheme=class{constructor(t){this.serviceLocator=t}poll(t){}onKeyDown(t,e){}onKeyUp(t,e){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPlayer=void 0;const r=n(99);e.createPlayer=function(t,e){return new r.Player(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlayerMovement=void 0;const r=n(4),i=n(6),o=n(3),a=n(43),s=n(60),u=n(196),c=n(98);e.PlayerMovement=class{constructor(t,e,n,r,s){this.serviceLocator=t,this.getSurface=e,this.setVelocity=n,this.setAngle=r,this.getBonuses=s,this.accumulatedWalk={x:0,y:0},this.accumulatedAngle=0,this.headbobOffset=0,this.walkNoiseDelay=new a.ActionDelay(400),this.headbob=(0,i.animation)(t=>{const{velocity:e}=this.getSurface(),n=o.vec.vec_distance(e);this.headbobOffset=Math.abs(Math.sin(t*Math.PI))*n*1}).speed(400).looping().start(),this.walking=new u.ActionSwitch}update(){this.walking.update(),this.headbob.tick();const{velocity:t,angle:e}=this.getSurface();this.setVelocity(o.vec.vec_add(t,this.accumulatedWalk)),this.setAngle(e+this.accumulatedAngle),this.accumulatedAngle=0,this.accumulatedWalk={x:0,y:0},this.walking.isBeingPerformed()&&this.walkNoiseDelay.canAction()&&(this.walkNoiseDelay.onAction(),this.serviceLocator.getAudioService().play(this.serviceLocator.getResourceManager().manifest.audio[(0,o.randomSelection)([r.Audios.FOOTSTEP_0,r.Audios.FOOTSTEP_1,r.Audios.FOOTSTEP_2,r.Audios.FOOTSTEP_3])],.1))}walk(t){this.walking.onPerformed();const e=this.getBonuses().moveSpeed?.04:.02,n=(0,s.fpsNorm)(e);let r={x:0,y:0};const{angle:i}=this.getSurface();switch(t){case c.WalkDirection.FORWARD:r=o.vec.vec_rotate({x:0,y:-n},i);break;case c.WalkDirection.BACK:r=o.vec.vec_rotate({x:0,y:n},i);break;case c.WalkDirection.LEFT:r=o.vec.vec_rotate({x:-n,y:0},i);break;case c.WalkDirection.RIGHT:r=o.vec.vec_rotate({x:n,y:0},i)}this.accumulatedWalk=o.vec.vec_add(this.accumulatedWalk,r)}turn(t){const e=(0,s.fpsNorm)(.15);switch(t){case c.TurnDirection.ANTICLOCKWISE:this.accumulatedAngle=this.accumulatedAngle-e/3;break;case c.TurnDirection.CLOCKWISE:this.accumulatedAngle=this.accumulatedAngle+e/3}}getHeadbobOffset(){return this.headbobOffset}destroy(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositeAnimation=e.CompositeAnimationType=void 0;const r=n(100);var i;!function(t){t.SERIAL="SERIAL",t.PARALLEL="PARALLEL"}(i=e.CompositeAnimationType||(e.CompositeAnimationType={}));e.CompositeAnimation=class{constructor(t){this.animationMap={},this.animations=t.animations,this.type=t.type}driven(t){return this.driver=new r.IntervalDriver(t),this}looping(){return this.loop=!0,this}whenDone(t){return this.onFinish=t,this}start(){return this.playing=!0,this.startAnimations(),this.driver&&this.driver.drive(()=>this.tick()),this}startAnimations(){switch(this.animations.forEach(t=>t.stop()),this.type){case i.PARALLEL:this.animations.forEach((t,e)=>{this.animationMap[e]=!1,t.start().whenDone(()=>this.onAnimationComplete(e))});break;case i.SERIAL:this.animations[0].start().whenDone(()=>this.onAnimationComplete(0))}}onAnimationComplete(t){switch(this.type){case i.PARALLEL:this.animationMap[t]=!0;Object.keys(this.animationMap).filter(t=>this.animationMap[t]).length>=this.animations.length&&(this.loop&&this.startAnimations(),this.onFinish&&this.onFinish());break;case i.SERIAL:t===this.animations.length-1?(this.loop&&this.startAnimations(),this.onFinish&&this.onFinish()):this.animations[t+1].start().whenDone(()=>this.onAnimationComplete(t+1))}}pause(){this.playing=!1,this.driver&&this.driver.undrive()}stop(){this.playing=!1,this.driver&&this.driver.undrive()}tick(){this.playing&&this.animations.forEach(t=>t.tick())}isPlaying(){return this.isPlaying}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActionSwitch=void 0;e.ActionSwitch=class{constructor(t,e){this.onStart=t,this.onStop=e,this.actionPerformed=!1,this.isActionBeingPerformed=!1}update(){!1===this.actionPerformed&&(this.isActionBeingPerformed=!1,this.onStop&&this.onStop()),this.actionPerformed=!1}onPerformed(){!1===this.isActionBeingPerformed&&this.onStart&&this.onStart(),this.actionPerformed=!0,this.isActionBeingPerformed=!0}isBeingPerformed(){return this.isActionBeingPerformed}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlayerEquipment=void 0;const r=n(21),i=n(4),o=n(198),a=n(6),s=n(3),u=n(43),c=n(41),l=n(23),f=(0,s.toRadians)(-45),h=(0,s.toRadians)(30),d=(0,s.toRadians)(90);e.PlayerEquipment=class{constructor(t,e,n,i,o){this.serviceLocator=t,this.getPlayer=e,this.getPlayerPosition=n,this.getPlayerAngle=i,this.getBonuses=o,this.targetPosition=r.vec3.create(),this.actualPosition=void 0,this.attackDelay=new u.ActionDelay(300),this.swingOffset=0,this.swingPosOffset=[0,0],this.weaponAnimation=((t,e)=>{const n=(0,s.toRadians)(90);return(0,a.animation)(r=>{const i=1-r*r;t(i*n),e([1*i,-.5*i])}).whenDone(()=>{t(0),e([0,0])}).speed(300)})(t=>this.setWeaponAnimationSwingOffset(t),t=>this.setWeaponAnimationSwingPosOffset(t)),this.breath=0,this.setWeaponAnimationSwingOffset=t=>{this.swingOffset=t},this.setWeaponAnimationSwingPosOffset=t=>{this.swingPosOffset=t}}init(){const t=this.serviceLocator.getScriptingService().getPlayer().getInventory().equipped[l.EquipmentType.WEAPON];t&&this.setWeapon(t)}update(){if(this.weapon){this.breath+=.01;const t=this.getPlayerPosition(),e=this.getPlayerAngle(),n=.03*(Math.sin(this.breath)+1),i=[1*Math.sin(h+e)+this.swingPosOffset[0]*Math.sin(e),.4+this.swingPosOffset[1]+n,-1*Math.cos(h+e)+-this.swingPosOffset[0]*Math.cos(e)];r.vec3.add(this.targetPosition,t,i),this.actualPosition||(this.actualPosition=r.vec3.create(),r.vec3.copy(this.actualPosition,this.targetPosition));const o=r.vec3.sub(r.vec3.create(),this.targetPosition,this.actualPosition),a=r.vec3.scale(o,o,.5);r.vec3.add(this.actualPosition,this.actualPosition,a);const s=-Math.cos(e)*this.swingOffset,u=Math.abs(Math.sin(e)*this.swingOffset);this.weapon[0].setPosition(this.actualPosition),this.weapon[0].setAngle([s,-d-e,f+u])}this.weaponAnimation.tick()}onEquip(t){t.equipmentType===l.EquipmentType.WEAPON&&(this.weapon&&(this.destroy(),this.weapon=void 0),this.setWeapon(t))}onUnequip(t){t.equipmentType===l.EquipmentType.WEAPON&&this.destroy()}destroy(){this.weapon&&(this.weapon[0].destroy(),this.actualPosition=void 0)}attack(){if(this.getBonuses().attackSpeed?(this.attackDelay.setDelay(150),this.weaponAnimation.speed(150)):(this.attackDelay.setDelay(300),this.weaponAnimation.speed(300)),this.weapon&&this.attackDelay.canAction()){this.serviceLocator.getAudioService().play(this.serviceLocator.getResourceManager().manifest.audio[(0,s.randomSelection)([i.Audios.ATTACK_0])]),this.attackDelay.onAction(),this.weaponAnimation.stop(),this.weaponAnimation.start();const t={type:"PLAYER",player:this.getPlayer(),serviceLocator:this.serviceLocator};Object.entries(this.getPlayer().getInventory().equipped).forEach(([e,n])=>{(n&&n.onAttack||[]).map(c.getEffect).forEach(e=>{e.onTrigger(t)})})}}setWeapon(t){const{spriteIcon:e}=t;this.weapon=[(0,o.getVoxelGroupFromSprite)(this.serviceLocator,e,.08),t];const[n,r,i]=this.weapon[0].getDimensions();this.weapon[0].setCenter([.08*n/2,.08*r/2,.08*i/2]),this.weapon[0].attach(),this.update()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getVoxelGroupFromSprite=void 0;const r=n(12),i=n(3),o=n(199),a=n(200);e.getVoxelGroupFromSprite=function(t,e,n){const s=new o.ColourMap,u=t.getResourceManager().manifest.spritesheets[r.SpriteSheets.SPRITE],c=u.getSprite(e),l=u.imageData,f=c.pixelCoordinate.textureWidth,h=c.pixelCoordinate.textureHeight,d=(0,i.map3D)((0,i.create3DArray)(f,h,1,0),(t,e,n,r)=>0);for(let t=0;t<f;t++){const e=t+c.pixelCoordinate.textureX;for(let n=0;n<h;n++){const r=4*(e+(h-n-1+c.pixelCoordinate.textureY)*l.width),i=l.data[r],o=l.data[r+1],a=l.data[r+2],u=l.data[r+3],p=f-t-1;(i>0||o>0||a>0||u>0)&&(d[p][n][0]=s.getID([i/255,o/255,a/255])+1)}}const p={colourMap:s.getMap(),data:d,sizePerVoxel:n};return new a.VoxelGroup3D(t,p)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColourMap=e.ReferenceMap=void 0;class r{constructor(t){this.isEqual=t,this.map=[]}getMap(){return this.map}getID(t){const e=this.map.findIndex((e,n)=>this.isEqual(e,t));if(e>=0)return e;return this.map.push(t)-1}}e.ReferenceMap=r;e.ColourMap=class extends r{constructor(){super((t,e)=>t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2])}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VoxelGroup3D=void 0;const r=n(21),i=n(3),o=n(201);e.VoxelGroup3D=class{constructor(t,e){this.serviceLocator=t,this.voxelGroupData=e,this.transform=r.mat4.identity(r.mat4.create()),this.position=[0,0,0],this.angle=[0,0,0],this.center=[0,0,0],this.scale=[1,1,1];const{data:n,colourMap:i,sizePerVoxel:a}=e;this.voxels=n.map((e,n)=>e.map((e,r)=>e.map((e,s)=>new o.Voxel3D(t,{position:[n*a,r*a,s*a],size:a,colour:i[e?e-1:0]}))))}attach(){this.onDataUpdate()}destroy(){(0,i.forEach3D)(this.voxels,t=>{t.destroy()}),this.renderItem&&(this.serviceLocator.getRenderService().triangleRenderService.freeItem(this.renderItem[0]),this.renderItem=void 0)}onDataUpdate(){const{colourMap:t,data:e}=this.voxelGroupData,n={positions:[],colour:[],transform:this.transform};if((0,i.forEach3D)(this.voxels,(r,i,o,a)=>{const s=e[i][o][a];s>0?(r.setColour(t[s-1]),r.attach()):r.destroy();const u=r.getData();u&&n.positions.push(...u.positions),u&&n.colour.push(...u.colour)}),this.renderItem){const[t,e]=this.renderItem;if(n.positions.length===e.positions.length)this.serviceLocator.getRenderService().triangleRenderService.updateItem(t,n);else{this.serviceLocator.getRenderService().triangleRenderService.freeItem(t);const e=this.serviceLocator.getRenderService().triangleRenderService.createItem(n);this.renderItem=[e,n]}}else{const t=this.serviceLocator.getRenderService().triangleRenderService.createItem(n);this.renderItem=[t,n]}}setPosition(t){this.position=t,this.recomputeTransform()}setAngle(t){this.angle=t,this.recomputeTransform()}setCenter(t){this.center=t,this.recomputeTransform()}setScale(t){this.scale=t,this.recomputeTransform()}recomputeTransform(){r.mat4.identity(this.transform),r.mat4.translate(this.transform,this.transform,this.position),r.mat4.rotateX(this.transform,this.transform,this.angle[0]),r.mat4.rotateY(this.transform,this.transform,this.angle[1]),r.mat4.rotateZ(this.transform,this.transform,this.angle[2]),r.mat4.translate(this.transform,this.transform,[-this.center[0],-this.center[1],-this.center[2]])}getDimensions(){return[this.voxelGroupData.data.length,this.voxelGroupData.data[0].length,this.voxelGroupData.data[0][0].length]}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Voxel3D=void 0;const r=n(21);r.mat4.identity(r.mat4.create());e.Voxel3D=class{constructor(t,e){this.serviceLocator=t,this.data=e}setColour(t){this.data.colour=t}attach(){if(this.itemData)return;const{triangleRenderService:t}=this.serviceLocator.getRenderService(),{position:e,size:n,colour:i}=this.data;this.itemData={positions:[],colour:[]};const o=(t,e)=>{this.itemData.positions.push(t),this.itemData.colour.push(e)},a=(t,e)=>{o([t[0],t[1],t[2]],e),o([t[0],t[3],t[2]],e)},[s,u,c]=e,l=r.vec3.scale(r.vec3.create(),i,.8),f=r.vec3.scale(r.vec3.create(),i,.6);a([[s,u,c],[s+n,u,c],[s+n,u+n,c],[s,u+n,c]],i),a([[s,u,c+n],[s+n,u,c+n],[s+n,u+n,c+n],[s,u+n,c+n]],i),a([[s,u,c],[s,u,c+n],[s,u+n,c+n],[s,u+n,c]],f),a([[s+n,u,c],[s+n,u,c+n],[s+n,u+n,c+n],[s+n,u+n,c]],f),a([[s,u,c],[s+n,u,c],[s+n,u,c+n],[s,u,c+n]],l),a([[s,u+n,c],[s+n,u+n,c],[s+n,u+n,c+n],[s,u+n,c+n]],l)}destroy(){this.itemData=void 0}isBeingDrawn(){return!!this.itemData}getData(){return this.itemData}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.World=void 0;const r=n(29);e.World=class{init(){this.entityArray=new r.ConsistentArray}update(){const t=this.entityArray.getArray();for(let e=0;e<t.length;e++)t[e].update()}addEntity(t,e){this.entityArray.add(t)}removeEntity(t,e){this.entityArray.remove(t)}getEntityArray(){return this.entityArray}performSync(){const t=this.entityArray.getToAdd(),e=this.entityArray.getToRemove();for(let e=0;e<t.length;e++){const n=t[e].getActions();n.onEntityCreated&&n.onEntityCreated()}for(let t=0;t<e.length;t++){const n=e[t].getActions();n.onEntityDeleted&&n.onEntityDeleted()}this.entityArray.sync()}forEachEntity(t){this.getEntityArray().getArray().forEach(t)}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.ResourceManager=void 0;const i=n(102),o=n(103),a=n(92),s=n(105);e.ResourceManager=class{load(t,e,n){return r(this,void 0,void 0,(function*(){this.manifest=yield this.loadManifest(t,e,a.defaultManifest,t=>n.getActions().setGameLoadPercentage(t))}))}loadManifest(t,e,a,u){return r(this,void 0,void 0,(function*(){u(0);const r=Object.keys(a.audio).length+Object.keys(a.spritesheets).reduce((t,e)=>t+1,0)+Object.keys(a.maps).length;let c=0;const l=()=>{c++,u(c/r)},f={spritesheets:{},audio:{},maps:{}};for(const t in a.audio)f.audio[t]=yield(0,i.loadSound)(a.audio[t].url,e,a.audio[t].metadata),l();for(const e in a.spritesheets){const n=a.spritesheets[e],[r,i]=yield(0,s.loadSpriteSheet)(t,n);f.spritesheets[e]=r;for(const t in i)i[t].frames?r.registerAnimation(t,i[t].width/i[t].frames,i[t].height,i[t].x,i[t].y,i[t].frames,!1):r.registerSprite(t,i[t].width,i[t].height,i[t].x,i[t].y);l()}for(const t in a.maps){const e=a.maps[t],r=yield(yield fetch(e.url)).text(),i=new(n(205).Parser),s=(0,o.tiledXMLtoGameTiledMap)(yield i.parseStringPromise(r));f.maps[t]={tiled:s,metadata:e.metadata},l()}return f}))}getDefaultSpriteSheet(){return this.manifest.spritesheets[a.SpriteSheets.SPRITE]}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteSheet=void 0;const r=n(105);e.SpriteSheet=class{constructor(t,e,n,i){this.width=t,this.height=e,this.texture=n,this.image=i,this.spriteHash={},this.animationHash={},this.imageData=(0,r.getImageData)(i)}registerSprite(t,e,n,r,i){this.spriteHash[t]={textureCoordinate:this.getTextureCoordinate(e,n,r,i),pixelCoordinate:{textureX:r,textureY:i,textureWidth:e,textureHeight:n},spriteSheetWidth:this.width,spriteSheetHeight:this.height,source:this.image.src}}registerAnimation(t,e,n,r,i,o,a){const s=e,u=n;let c=r,l=i;this.animationHash[t]=[];for(let e=0;e<o;e++)this.animationHash[t].push({textureCoordinate:this.getTextureCoordinate(s,u,c,l),pixelCoordinate:{textureX:c,textureY:l,textureWidth:s,textureHeight:u},spriteSheetWidth:this.width,spriteSheetHeight:this.height,source:this.image.src}),a?l+=u:c+=s}getSprite(t){return this.spriteHash[t]||console.log(`SpriteSheet ${t} missing`),this.spriteHash[t]}getAnimationFrame(t,e){const n=this.animationHash[t];if(n)return e>=n.length?n[n.length-1]:this.animationHash[t][e];console.log(`Animation ${t} missing`)}getAnimationInterp(t,e){const n=this.animationHash[t];n||console.log(`Animation ${t} missing`);const r=Math.floor(e*n.length);return this.getAnimationFrame(t,r)}getAnimationFrameCount(t){return this.animationHash[t].length}getWidth(){return this.width}getHeight(){return this.height}getTexture(){return this.texture}getImage(){return this.image}getTextureCoordinate(t,e,n,r){const i=.1/this.width,o=.1/this.height;return{textureX:n/this.width+i,textureY:r/this.height+o,textureWidth:t/this.width-2*i,textureHeight:e/this.height-2*o}}}},function(t,e,n){(function(){"use strict";var t,r,i,o,a={}.hasOwnProperty;r=n(62),t=n(206),i=n(215),o=n(118),e.defaults=r.defaults,e.processors=o,e.ValidationError=function(t){function e(t){this.message=t}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,Error),e}(),e.Builder=t.Builder,e.Parser=i.Parser,e.parseString=i.parseString,e.parseStringPromise=i.parseStringPromise}).call(this)},function(t,e,n){(function(){"use strict";var t,r,i,o,a,s={}.hasOwnProperty;t=n(207),r=n(62).defaults,o=function(t){return"string"==typeof t&&(t.indexOf("&")>=0||t.indexOf(">")>=0||t.indexOf("<")>=0)},a=function(t){return"<![CDATA["+i(t)+"]]>"},i=function(t){return t.replace("]]>","]]]]><![CDATA[>")},e.Builder=function(){function e(t){var e,n,i;for(e in this.options={},n=r[.2])s.call(n,e)&&(i=n[e],this.options[e]=i);for(e in t)s.call(t,e)&&(i=t[e],this.options[e]=i)}return e.prototype.buildObject=function(e){var n,i,u,c,l,f;return n=this.options.attrkey,i=this.options.charkey,1===Object.keys(e).length&&this.options.rootName===r[.2].rootName?e=e[l=Object.keys(e)[0]]:l=this.options.rootName,f=this,u=function(t,e){var r,c,l,h,d,p;if("object"!=typeof e)f.options.cdata&&o(e)?t.raw(a(e)):t.txt(e);else if(Array.isArray(e)){for(h in e)if(s.call(e,h))for(d in c=e[h])l=c[d],t=u(t.ele(d),l).up()}else for(d in e)if(s.call(e,d))if(c=e[d],d===n){if("object"==typeof c)for(r in c)p=c[r],t=t.att(r,p)}else if(d===i)t=f.options.cdata&&o(c)?t.raw(a(c)):t.txt(c);else if(Array.isArray(c))for(h in c)s.call(c,h)&&(t="string"==typeof(l=c[h])?f.options.cdata&&o(l)?t.ele(d).raw(a(l)).up():t.ele(d,l).up():u(t.ele(d),l).up());else"object"==typeof c?t=u(t.ele(d),c).up():"string"==typeof c&&f.options.cdata&&o(c)?t=t.ele(d).raw(a(c)).up():(null==c&&(c=""),t=t.ele(d,c.toString()).up());return t},c=t.create(l,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),u(c,e).end(this.options.renderOpts)},e}()}).call(this)},function(t,e,n){(function(){var e,r,i,o,a,s,u,c,l,f;f=n(13),c=f.assign,l=f.isFunction,i=n(106),o=n(107),a=n(213),u=n(76),s=n(214),e=n(2),r=n(45),t.exports.create=function(t,e,n,r){var i,a;if(null==t)throw new Error("Root element needs a name.");return r=c({},e,n,r),a=(i=new o(r)).element(t),r.headless||(i.declaration(r),null==r.pubID&&null==r.sysID||i.dtd(r)),a},t.exports.begin=function(t,e,n){var r;return l(t)&&(e=(r=[t,e])[0],n=r[1],t={}),e?new a(t,e,n):new o(t)},t.exports.stringWriter=function(t){return new u(t)},t.exports.streamWriter=function(t,e){return new s(t,e)},t.exports.implementation=new i,t.exports.nodeType=e,t.exports.writerState=r}).call(this)},function(t,e,n){(function(){var e,r;e=n(209),r=n(210),t.exports=function(){function t(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(t.prototype,"parameterNames",{get:function(){return new r(Object.keys(this.defaultParams))}}),t.prototype.getParameter=function(t){return this.params.hasOwnProperty(t)?this.params[t]:null},t.prototype.canSetParameter=function(t,e){return!0},t.prototype.setParameter=function(t,e){return null!=e?this.params[t]=e:delete this.params[t]},t}()}).call(this)},function(t,e){(function(){t.exports=function(){function t(){}return t.prototype.handleError=function(t){throw new Error(t)},t}()}).call(this)},function(t,e){(function(){t.exports=function(){function t(t){this.arr=t||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t.prototype.item=function(t){return this.arr[t]||null},t.prototype.contains=function(t){return-1!==this.arr.indexOf(t)},t}()}).call(this)},function(t,e){(function(){t.exports=function(){function t(t){this.nodes=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.item=function(t){return this.nodes[t]||null},t}()}).call(this)},function(t,e){(function(){t.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},function(t,e,n){(function(){var e,r,i,o,a,s,u,c,l,f,h,d,p,m,g,v,y,b,E,S,w,_,T,x={}.hasOwnProperty;T=n(13),w=T.isObject,S=T.isFunction,_=T.isPlainObject,E=T.getValue,e=n(2),d=n(107),p=n(63),o=n(65),a=n(66),g=n(73),b=n(74),m=n(75),f=n(67),h=n(68),s=n(69),c=n(70),u=n(71),l=n(72),i=n(108),y=n(110),v=n(76),r=n(45),t.exports=function(){function t(t,n,r){var i;this.name="?xml",this.type=e.Document,t||(t={}),i={},t.writer?_(t.writer)&&(i=t.writer,t.writer=new v):t.writer=new v,this.options=t,this.writer=t.writer,this.writerOptions=this.writer.filterOptions(i),this.stringify=new y(t),this.onDataCallback=n||function(){},this.onEndCallback=r||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return t.prototype.createChildNode=function(t){var n,r,i,o,a,s,u,c;switch(t.type){case e.CData:this.cdata(t.value);break;case e.Comment:this.comment(t.value);break;case e.Element:for(r in i={},u=t.attribs)x.call(u,r)&&(n=u[r],i[r]=n.value);this.node(t.name,i);break;case e.Dummy:this.dummy();break;case e.Raw:this.raw(t.value);break;case e.Text:this.text(t.value);break;case e.ProcessingInstruction:this.instruction(t.target,t.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+t.constructor.name)}for(a=0,s=(c=t.children).length;a<s;a++)o=c[a],this.createChildNode(o),o.type===e.Element&&this.up();return this},t.prototype.dummy=function(){return this},t.prototype.node=function(t,e,n){var r;if(null==t)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(t));return this.openCurrent(),t=E(t),null==e&&(e={}),e=E(e),w(e)||(n=(r=[e,n])[0],e=r[1]),this.currentNode=new p(this,t,e),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this},t.prototype.element=function(t,n,r){var i,o,a,s,u,c;if(this.currentNode&&this.currentNode.type===e.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(t)||w(t)||S(t))for(s=this.options.noValidation,this.options.noValidation=!0,(c=new d(this.options).element("TEMP_ROOT")).element(t),this.options.noValidation=s,o=0,a=(u=c.children).length;o<a;o++)i=u[o],this.createChildNode(i),i.type===e.Element&&this.up();else this.node(t,n,r);return this},t.prototype.attribute=function(t,e){var n,r;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(t));if(null!=t&&(t=E(t)),w(t))for(n in t)x.call(t,n)&&(r=t[n],this.attribute(n,r));else S(e)&&(e=e.apply()),this.options.keepNullAttributes&&null==e?this.currentNode.attribs[t]=new i(this,t,""):null!=e&&(this.currentNode.attribs[t]=new i(this,t,e));return this},t.prototype.text=function(t){var e;return this.openCurrent(),e=new b(this,t),this.onData(this.writer.text(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.cdata=function(t){var e;return this.openCurrent(),e=new o(this,t),this.onData(this.writer.cdata(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.comment=function(t){var e;return this.openCurrent(),e=new a(this,t),this.onData(this.writer.comment(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.raw=function(t){var e;return this.openCurrent(),e=new g(this,t),this.onData(this.writer.raw(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.instruction=function(t,e){var n,r,i,o,a;if(this.openCurrent(),null!=t&&(t=E(t)),null!=e&&(e=E(e)),Array.isArray(t))for(n=0,o=t.length;n<o;n++)r=t[n],this.instruction(r);else if(w(t))for(r in t)x.call(t,r)&&(i=t[r],this.instruction(r,i));else S(e)&&(e=e.apply()),a=new m(this,t,e),this.onData(this.writer.processingInstruction(a,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},t.prototype.declaration=function(t,e,n){var r;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return r=new f(this,t,e,n),this.onData(this.writer.declaration(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.doctype=function(t,e,n){if(this.openCurrent(),null==t)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new h(this,e,n),this.currentNode.rootNodeName=t,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},t.prototype.dtdElement=function(t,e){var n;return this.openCurrent(),n=new u(this,t,e),this.onData(this.writer.dtdElement(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.attList=function(t,e,n,r,i){var o;return this.openCurrent(),o=new s(this,t,e,n,r,i),this.onData(this.writer.dtdAttList(o,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.entity=function(t,e){var n;return this.openCurrent(),n=new c(this,!1,t,e),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.pEntity=function(t,e){var n;return this.openCurrent(),n=new c(this,!0,t,e),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.notation=function(t,e){var n;return this.openCurrent(),n=new l(this,t,e),this.onData(this.writer.dtdNotation(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},t.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},t.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},t.prototype.openNode=function(t){var n,i,o,a;if(!t.isOpen){if(this.root||0!==this.currentLevel||t.type!==e.Element||(this.root=t),i="",t.type===e.Element){for(o in this.writerOptions.state=r.OpenTag,i=this.writer.indent(t,this.writerOptions,this.currentLevel)+"<"+t.name,a=t.attribs)x.call(a,o)&&(n=a[o],i+=this.writer.attribute(n,this.writerOptions,this.currentLevel));i+=(t.children?">":"/>")+this.writer.endline(t,this.writerOptions,this.currentLevel),this.writerOptions.state=r.InsideTag}else this.writerOptions.state=r.OpenTag,i=this.writer.indent(t,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+t.rootNodeName,t.pubID&&t.sysID?i+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(i+=' SYSTEM "'+t.sysID+'"'),t.children?(i+=" [",this.writerOptions.state=r.InsideTag):(this.writerOptions.state=r.CloseTag,i+=">"),i+=this.writer.endline(t,this.writerOptions,this.currentLevel);return this.onData(i,this.currentLevel),t.isOpen=!0}},t.prototype.closeNode=function(t){var n;if(!t.isClosed)return n="",this.writerOptions.state=r.CloseTag,n=t.type===e.Element?this.writer.indent(t,this.writerOptions,this.currentLevel)+"</"+t.name+">"+this.writer.endline(t,this.writerOptions,this.currentLevel):this.writer.indent(t,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(t,this.writerOptions,this.currentLevel),this.writerOptions.state=r.None,this.onData(n,this.currentLevel),t.isClosed=!0},t.prototype.onData=function(t,e){return this.documentStarted=!0,this.onDataCallback(t,e+1)},t.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},t.prototype.debugInfo=function(t){return null==t?"":"node: <"+t+">"},t.prototype.ele=function(){return this.element.apply(this,arguments)},t.prototype.nod=function(t,e,n){return this.node(t,e,n)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.dec=function(t,e,n){return this.declaration(t,e,n)},t.prototype.dtd=function(t,e,n){return this.doctype(t,e,n)},t.prototype.e=function(t,e,n){return this.element(t,e,n)},t.prototype.n=function(t,e,n){return this.node(t,e,n)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.att=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.a=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.ent=function(t,e){return this.entity(t,e)},t.prototype.pent=function(t,e){return this.pEntity(t,e)},t.prototype.not=function(t,e){return this.notation(t,e)},t}()}).call(this)},function(t,e,n){(function(){var e,r,i,o={}.hasOwnProperty;e=n(2),i=n(111),r=n(45),t.exports=function(t){function n(t,e){this.stream=t,n.__super__.constructor.call(this,e)}return function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,t),n.prototype.endline=function(t,e,i){return t.isLastRootNode&&e.state===r.CloseTag?"":n.__super__.endline.call(this,t,e,i)},n.prototype.document=function(t,e){var n,r,i,o,a,s,u,c,l;for(r=i=0,a=(u=t.children).length;i<a;r=++i)(n=u[r]).isLastRootNode=r===t.children.length-1;for(e=this.filterOptions(e),l=[],o=0,s=(c=t.children).length;o<s;o++)n=c[o],l.push(this.writeChildNode(n,e,0));return l},n.prototype.attribute=function(t,e,r){return this.stream.write(n.__super__.attribute.call(this,t,e,r))},n.prototype.cdata=function(t,e,r){return this.stream.write(n.__super__.cdata.call(this,t,e,r))},n.prototype.comment=function(t,e,r){return this.stream.write(n.__super__.comment.call(this,t,e,r))},n.prototype.declaration=function(t,e,r){return this.stream.write(n.__super__.declaration.call(this,t,e,r))},n.prototype.docType=function(t,e,n){var i,o,a,s;if(n||(n=0),this.openNode(t,e,n),e.state=r.OpenTag,this.stream.write(this.indent(t,e,n)),this.stream.write("<!DOCTYPE "+t.root().name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(t,e,n)),e.state=r.InsideTag,o=0,a=(s=t.children).length;o<a;o++)i=s[o],this.writeChildNode(i,e,n+1);e.state=r.CloseTag,this.stream.write("]")}return e.state=r.CloseTag,this.stream.write(e.spaceBeforeSlash+">"),this.stream.write(this.endline(t,e,n)),e.state=r.None,this.closeNode(t,e,n)},n.prototype.element=function(t,n,i){var a,s,u,c,l,f,h,d,p;for(h in i||(i=0),this.openNode(t,n,i),n.state=r.OpenTag,this.stream.write(this.indent(t,n,i)+"<"+t.name),d=t.attribs)o.call(d,h)&&(a=d[h],this.attribute(a,n,i));if(c=0===(u=t.children.length)?null:t.children[0],0===u||t.children.every((function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value})))n.allowEmpty?(this.stream.write(">"),n.state=r.CloseTag,this.stream.write("</"+t.name+">")):(n.state=r.CloseTag,this.stream.write(n.spaceBeforeSlash+"/>"));else if(!n.pretty||1!==u||c.type!==e.Text&&c.type!==e.Raw||null==c.value){for(this.stream.write(">"+this.endline(t,n,i)),n.state=r.InsideTag,l=0,f=(p=t.children).length;l<f;l++)s=p[l],this.writeChildNode(s,n,i+1);n.state=r.CloseTag,this.stream.write(this.indent(t,n,i)+"</"+t.name+">")}else this.stream.write(">"),n.state=r.InsideTag,n.suppressPrettyCount++,!0,this.writeChildNode(c,n,i+1),n.suppressPrettyCount--,!1,n.state=r.CloseTag,this.stream.write("</"+t.name+">");return this.stream.write(this.endline(t,n,i)),n.state=r.None,this.closeNode(t,n,i)},n.prototype.processingInstruction=function(t,e,r){return this.stream.write(n.__super__.processingInstruction.call(this,t,e,r))},n.prototype.raw=function(t,e,r){return this.stream.write(n.__super__.raw.call(this,t,e,r))},n.prototype.text=function(t,e,r){return this.stream.write(n.__super__.text.call(this,t,e,r))},n.prototype.dtdAttList=function(t,e,r){return this.stream.write(n.__super__.dtdAttList.call(this,t,e,r))},n.prototype.dtdElement=function(t,e,r){return this.stream.write(n.__super__.dtdElement.call(this,t,e,r))},n.prototype.dtdEntity=function(t,e,r){return this.stream.write(n.__super__.dtdEntity.call(this,t,e,r))},n.prototype.dtdNotation=function(t,e,r){return this.stream.write(n.__super__.dtdNotation.call(this,t,e,r))},n}(i)}).call(this)},function(t,e,n){(function(){"use strict";var t,r,i,o,a,s,u,c,l=function(t,e){return function(){return t.apply(e,arguments)}},f={}.hasOwnProperty;u=n(216),i=n(46),t=n(230),s=n(118),c=n(116).setImmediate,r=n(62).defaults,o=function(t){return"object"==typeof t&&null!=t&&0===Object.keys(t).length},a=function(t,e,n){var r,i;for(r=0,i=t.length;r<i;r++)e=(0,t[r])(e,n);return e},e.Parser=function(n){function i(t){var n,i,o;if(this.parseStringPromise=l(this.parseStringPromise,this),this.parseString=l(this.parseString,this),this.reset=l(this.reset,this),this.assignOrPush=l(this.assignOrPush,this),this.processAsync=l(this.processAsync,this),!(this instanceof e.Parser))return new e.Parser(t);for(n in this.options={},i=r[.2])f.call(i,n)&&(o=i[n],this.options[n]=o);for(n in t)f.call(t,n)&&(o=t[n],this.options[n]=o);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(s.normalize)),this.reset()}return function(t,e){for(var n in e)f.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(i,n),i.prototype.processAsync=function(){var t,e;try{return this.remaining.length<=this.options.chunkSize?(t=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(t),this.saxParser.close()):(t=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(t),c(this.processAsync))}catch(t){if(e=t,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(e)}},i.prototype.assignOrPush=function(t,e,n){return e in t?(t[e]instanceof Array||(t[e]=[t[e]]),t[e].push(n)):this.options.explicitArray?t[e]=[n]:t[e]=n},i.prototype.reset=function(){var t,e,n,r,i;return this.removeAllListeners(),this.saxParser=u.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(i=this,function(t){if(i.saxParser.resume(),!i.saxParser.errThrown)return i.saxParser.errThrown=!0,i.emit("error",t)}),this.saxParser.onend=function(t){return function(){if(!t.saxParser.ended)return t.saxParser.ended=!0,t.emit("end",t.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,r=[],t=this.options.attrkey,e=this.options.charkey,this.saxParser.onopentag=function(n){return function(i){var o,s,u,c,l;if((u={})[e]="",!n.options.ignoreAttrs)for(o in l=i.attributes)f.call(l,o)&&(t in u||n.options.mergeAttrs||(u[t]={}),s=n.options.attrValueProcessors?a(n.options.attrValueProcessors,i.attributes[o],o):i.attributes[o],c=n.options.attrNameProcessors?a(n.options.attrNameProcessors,o):o,n.options.mergeAttrs?n.assignOrPush(u,c,s):u[t][c]=s);return u["#name"]=n.options.tagNameProcessors?a(n.options.tagNameProcessors,i.name):i.name,n.options.xmlns&&(u[n.options.xmlnskey]={uri:i.uri,local:i.local}),r.push(u)}}(this),this.saxParser.onclosetag=function(t){return function(){var n,i,s,u,c,l,h,d,p,m;if(l=r.pop(),c=l["#name"],t.options.explicitChildren&&t.options.preserveChildrenOrder||delete l["#name"],!0===l.cdata&&(n=l.cdata,delete l.cdata),p=r[r.length-1],l[e].match(/^\s*$/)&&!n?(i=l[e],delete l[e]):(t.options.trim&&(l[e]=l[e].trim()),t.options.normalize&&(l[e]=l[e].replace(/\s{2,}/g," ").trim()),l[e]=t.options.valueProcessors?a(t.options.valueProcessors,l[e],c):l[e],1===Object.keys(l).length&&e in l&&!t.EXPLICIT_CHARKEY&&(l=l[e])),o(l)&&(l=""!==t.options.emptyTag?t.options.emptyTag:i),null!=t.options.validator&&(m="/"+function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)u=r[t],n.push(u["#name"]);return n}().concat(c).join("/"),function(){var e;try{l=t.options.validator(m,p&&p[c],l)}catch(n){return e=n,t.emit("error",e)}}()),t.options.explicitChildren&&!t.options.mergeAttrs&&"object"==typeof l)if(t.options.preserveChildrenOrder){if(p){for(s in p[t.options.childkey]=p[t.options.childkey]||[],h={},l)f.call(l,s)&&(h[s]=l[s]);p[t.options.childkey].push(h),delete l["#name"],1===Object.keys(l).length&&e in l&&!t.EXPLICIT_CHARKEY&&(l=l[e])}}else u={},t.options.attrkey in l&&(u[t.options.attrkey]=l[t.options.attrkey],delete l[t.options.attrkey]),!t.options.charsAsChildren&&t.options.charkey in l&&(u[t.options.charkey]=l[t.options.charkey],delete l[t.options.charkey]),Object.getOwnPropertyNames(l).length>0&&(u[t.options.childkey]=l),l=u;return r.length>0?t.assignOrPush(p,c,l):(t.options.explicitRoot&&(d=l,(l={})[c]=d),t.resultObject=l,t.saxParser.ended=!0,t.emit("end",t.resultObject))}}(this),n=function(t){return function(n){var i,o;if(o=r[r.length-1])return o[e]+=n,t.options.explicitChildren&&t.options.preserveChildrenOrder&&t.options.charsAsChildren&&(t.options.includeWhiteChars||""!==n.replace(/\\n/g,"").trim())&&(o[t.options.childkey]=o[t.options.childkey]||[],(i={"#name":"__text__"})[e]=n,t.options.normalize&&(i[e]=i[e].replace(/\s{2,}/g," ").trim()),o[t.options.childkey].push(i)),o}}(this),this.saxParser.ontext=n,this.saxParser.oncdata=function(t){var e;if(e=n(t))return e.cdata=!0}},i.prototype.parseString=function(e,n){var r;null!=n&&"function"==typeof n&&(this.on("end",(function(t){return this.reset(),n(null,t)})),this.on("error",(function(t){return this.reset(),n(t)})));try{return""===(e=e.toString()).trim()?(this.emit("end",null),!0):(e=t.stripBOM(e),this.options.async?(this.remaining=e,c(this.processAsync),this.saxParser):this.saxParser.write(e).close())}catch(t){if(r=t,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",r),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw r}},i.prototype.parseStringPromise=function(t){return new Promise((e=this,function(n,r){return e.parseString(t,(function(t,e){return t?r(t):n(e)}))}));var e},i}(i),e.parseString=function(t,n,r){var i,o;return null!=r?("function"==typeof r&&(i=r),"object"==typeof n&&(o=n)):("function"==typeof n&&(i=n),o={}),new e.Parser(o).parseString(t,i)},e.parseStringPromise=function(t,n){var r;return"object"==typeof n&&(r=n),new e.Parser(r).parseStringPromise(t)}}).call(this)},function(t,e,n){(function(t){!function(e){e.parser=function(t,e){return new o(t,e)},e.SAXParser=o,e.SAXStream=s,e.createStream=function(t,e){return new s(t,e)},e.MAX_BUFFER_LENGTH=65536;var r,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(t,n){if(!(this instanceof o))return new o(t,n);!function(t){for(var e=0,n=i.length;e<n;e++)t[i[e]]=""}(this),this.q=this.c="",this.bufferCheckPosition=e.MAX_BUFFER_LENGTH,this.opt=n||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!t,this.noscript=!(!t&&!this.opt.noscript),this.state=w.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(c)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),T(this,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),o.prototype={end:function(){M(this)},write:function(t){if(this.error)throw this.error;if(this.closed)return P(this,"Cannot write after close. Assign an onready handler.");if(null===t)return M(this);"object"==typeof t&&(t=t.toString());var n=0,r="";for(;r=F(t,n++),this.c=r,r;)switch(this.trackPosition&&(this.position++,"\n"===r?(this.line++,this.column=0):this.column++),this.state){case w.BEGIN:if(this.state=w.BEGIN_WHITESPACE,"\ufeff"===r)continue;j(this,r);continue;case w.BEGIN_WHITESPACE:j(this,r);continue;case w.TEXT:if(this.sawRoot&&!this.closedRoot){for(var o=n-1;r&&"<"!==r&&"&"!==r;)(r=F(t,n++))&&this.trackPosition&&(this.position++,"\n"===r?(this.line++,this.column=0):this.column++);this.textNode+=t.substring(o,n-1)}"<"!==r||this.sawRoot&&this.closedRoot&&!this.strict?(p(r)||this.sawRoot&&!this.closedRoot||O(this,"Text data outside of root node."),"&"===r?this.state=w.TEXT_ENTITY:this.textNode+=r):(this.state=w.OPEN_WAKA,this.startTagPosition=this.position);continue;case w.SCRIPT:"<"===r?this.state=w.SCRIPT_ENDING:this.script+=r;continue;case w.SCRIPT_ENDING:"/"===r?this.state=w.CLOSE_TAG:(this.script+="<"+r,this.state=w.SCRIPT);continue;case w.OPEN_WAKA:if("!"===r)this.state=w.SGML_DECL,this.sgmlDecl="";else if(p(r));else if(v(l,r))this.state=w.OPEN_TAG,this.tagName=r;else if("/"===r)this.state=w.CLOSE_TAG,this.tagName="";else if("?"===r)this.state=w.PROC_INST,this.procInstName=this.procInstBody="";else{if(O(this,"Unencoded <"),this.startTagPosition+1<this.position){var a=this.position-this.startTagPosition;r=new Array(a).join(" ")+r}this.textNode+="<"+r,this.state=w.TEXT}continue;case w.SGML_DECL:"[CDATA["===(this.sgmlDecl+r).toUpperCase()?(x(this,"onopencdata"),this.state=w.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+r==="--"?(this.state=w.COMMENT,this.comment="",this.sgmlDecl=""):"DOCTYPE"===(this.sgmlDecl+r).toUpperCase()?(this.state=w.DOCTYPE,(this.doctype||this.sawRoot)&&O(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===r?(x(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=w.TEXT):m(r)?(this.state=w.SGML_DECL_QUOTED,this.sgmlDecl+=r):this.sgmlDecl+=r;continue;case w.SGML_DECL_QUOTED:r===this.q&&(this.state=w.SGML_DECL,this.q=""),this.sgmlDecl+=r;continue;case w.DOCTYPE:">"===r?(this.state=w.TEXT,x(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=r,"["===r?this.state=w.DOCTYPE_DTD:m(r)&&(this.state=w.DOCTYPE_QUOTED,this.q=r));continue;case w.DOCTYPE_QUOTED:this.doctype+=r,r===this.q&&(this.q="",this.state=w.DOCTYPE);continue;case w.DOCTYPE_DTD:this.doctype+=r,"]"===r?this.state=w.DOCTYPE:m(r)&&(this.state=w.DOCTYPE_DTD_QUOTED,this.q=r);continue;case w.DOCTYPE_DTD_QUOTED:this.doctype+=r,r===this.q&&(this.state=w.DOCTYPE_DTD,this.q="");continue;case w.COMMENT:"-"===r?this.state=w.COMMENT_ENDING:this.comment+=r;continue;case w.COMMENT_ENDING:"-"===r?(this.state=w.COMMENT_ENDED,this.comment=I(this.opt,this.comment),this.comment&&x(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+r,this.state=w.COMMENT);continue;case w.COMMENT_ENDED:">"!==r?(O(this,"Malformed comment"),this.comment+="--"+r,this.state=w.COMMENT):this.state=w.TEXT;continue;case w.CDATA:"]"===r?this.state=w.CDATA_ENDING:this.cdata+=r;continue;case w.CDATA_ENDING:"]"===r?this.state=w.CDATA_ENDING_2:(this.cdata+="]"+r,this.state=w.CDATA);continue;case w.CDATA_ENDING_2:">"===r?(this.cdata&&x(this,"oncdata",this.cdata),x(this,"onclosecdata"),this.cdata="",this.state=w.TEXT):"]"===r?this.cdata+="]":(this.cdata+="]]"+r,this.state=w.CDATA);continue;case w.PROC_INST:"?"===r?this.state=w.PROC_INST_ENDING:p(r)?this.state=w.PROC_INST_BODY:this.procInstName+=r;continue;case w.PROC_INST_BODY:if(!this.procInstBody&&p(r))continue;"?"===r?this.state=w.PROC_INST_ENDING:this.procInstBody+=r;continue;case w.PROC_INST_ENDING:">"===r?(x(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=w.TEXT):(this.procInstBody+="?"+r,this.state=w.PROC_INST_BODY);continue;case w.OPEN_TAG:v(f,r)?this.tagName+=r:(C(this),">"===r?k(this):"/"===r?this.state=w.OPEN_TAG_SLASH:(p(r)||O(this,"Invalid character in tag name"),this.state=w.ATTRIB));continue;case w.OPEN_TAG_SLASH:">"===r?(k(this,!0),L(this)):(O(this,"Forward-slash in opening tag not followed by >"),this.state=w.ATTRIB);continue;case w.ATTRIB:if(p(r))continue;">"===r?k(this):"/"===r?this.state=w.OPEN_TAG_SLASH:v(l,r)?(this.attribName=r,this.attribValue="",this.state=w.ATTRIB_NAME):O(this,"Invalid attribute name");continue;case w.ATTRIB_NAME:"="===r?this.state=w.ATTRIB_VALUE:">"===r?(O(this,"Attribute without value"),this.attribValue=this.attribName,D(this),k(this)):p(r)?this.state=w.ATTRIB_NAME_SAW_WHITE:v(f,r)?this.attribName+=r:O(this,"Invalid attribute name");continue;case w.ATTRIB_NAME_SAW_WHITE:if("="===r)this.state=w.ATTRIB_VALUE;else{if(p(r))continue;O(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",x(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===r?k(this):v(l,r)?(this.attribName=r,this.state=w.ATTRIB_NAME):(O(this,"Invalid attribute name"),this.state=w.ATTRIB)}continue;case w.ATTRIB_VALUE:if(p(r))continue;m(r)?(this.q=r,this.state=w.ATTRIB_VALUE_QUOTED):(O(this,"Unquoted attribute value"),this.state=w.ATTRIB_VALUE_UNQUOTED,this.attribValue=r);continue;case w.ATTRIB_VALUE_QUOTED:if(r!==this.q){"&"===r?this.state=w.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=r;continue}D(this),this.q="",this.state=w.ATTRIB_VALUE_CLOSED;continue;case w.ATTRIB_VALUE_CLOSED:p(r)?this.state=w.ATTRIB:">"===r?k(this):"/"===r?this.state=w.OPEN_TAG_SLASH:v(l,r)?(O(this,"No whitespace between attributes"),this.attribName=r,this.attribValue="",this.state=w.ATTRIB_NAME):O(this,"Invalid attribute name");continue;case w.ATTRIB_VALUE_UNQUOTED:if(!g(r)){"&"===r?this.state=w.ATTRIB_VALUE_ENTITY_U:this.attribValue+=r;continue}D(this),">"===r?k(this):this.state=w.ATTRIB;continue;case w.CLOSE_TAG:if(this.tagName)">"===r?L(this):v(f,r)?this.tagName+=r:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=w.SCRIPT):(p(r)||O(this,"Invalid tagname in closing tag"),this.state=w.CLOSE_TAG_SAW_WHITE);else{if(p(r))continue;y(l,r)?this.script?(this.script+="</"+r,this.state=w.SCRIPT):O(this,"Invalid tagname in closing tag."):this.tagName=r}continue;case w.CLOSE_TAG_SAW_WHITE:if(p(r))continue;">"===r?L(this):O(this,"Invalid characters in closing tag");continue;case w.TEXT_ENTITY:case w.ATTRIB_VALUE_ENTITY_Q:case w.ATTRIB_VALUE_ENTITY_U:var s,u;switch(this.state){case w.TEXT_ENTITY:s=w.TEXT,u="textNode";break;case w.ATTRIB_VALUE_ENTITY_Q:s=w.ATTRIB_VALUE_QUOTED,u="attribValue";break;case w.ATTRIB_VALUE_ENTITY_U:s=w.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===r?(this[u]+=N(this),this.entity="",this.state=s):v(this.entity.length?d:h,r)?this.entity+=r:(O(this,"Invalid character in entity name"),this[u]+="&"+this.entity+r,this.entity="",this.state=s);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),r=0,o=0,a=i.length;o<a;o++){var s=t[i[o]].length;if(s>n)switch(i[o]){case"textNode":A(t);break;case"cdata":x(t,"oncdata",t.cdata),t.cdata="";break;case"script":x(t,"onscript",t.script),t.script="";break;default:P(t,"Max buffer length exceeded: "+i[o])}r=Math.max(r,s)}var u=e.MAX_BUFFER_LENGTH-r;t.bufferCheckPosition=u+t.position}(this);return this}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;A(t=this),""!==t.cdata&&(x(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(x(t,"onscript",t.script),t.script="")}};try{r=n(219).Stream}catch(t){r=function(){}}var a=e.EVENTS.filter((function(t){return"error"!==t&&"end"!==t}));function s(t,e){if(!(this instanceof s))return new s(t,e);r.apply(this),this._parser=new o(t,e),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(t){n.emit("error",t),n._parser.error=null},this._decoder=null,a.forEach((function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){if(!e)return n.removeAllListeners(t),n._parser["on"+t]=e,e;n.on(t,e)},enumerable:!0,configurable:!1})}))}s.prototype=Object.create(r.prototype,{constructor:{value:s}}),s.prototype.write=function(e){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(e)){if(!this._decoder){var r=n(80).StringDecoder;this._decoder=new r("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},s.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},s.prototype.on=function(t,e){var n=this;return n._parser["on"+t]||-1===a.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e)}),r.prototype.on.call(n,t,e)};var u="http://www.w3.org/XML/1998/namespace",c={xml:u,xmlns:"http://www.w3.org/2000/xmlns/"},l=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function p(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function m(t){return'"'===t||"'"===t}function g(t){return">"===t||p(t)}function v(t,e){return t.test(e)}function y(t,e){return!v(t,e)}var b,E,S,w=0;for(var _ in e.STATE={BEGIN:w++,BEGIN_WHITESPACE:w++,TEXT:w++,TEXT_ENTITY:w++,OPEN_WAKA:w++,SGML_DECL:w++,SGML_DECL_QUOTED:w++,DOCTYPE:w++,DOCTYPE_QUOTED:w++,DOCTYPE_DTD:w++,DOCTYPE_DTD_QUOTED:w++,COMMENT_STARTING:w++,COMMENT:w++,COMMENT_ENDING:w++,COMMENT_ENDED:w++,CDATA:w++,CDATA_ENDING:w++,CDATA_ENDING_2:w++,PROC_INST:w++,PROC_INST_BODY:w++,PROC_INST_ENDING:w++,OPEN_TAG:w++,OPEN_TAG_SLASH:w++,ATTRIB:w++,ATTRIB_NAME:w++,ATTRIB_NAME_SAW_WHITE:w++,ATTRIB_VALUE:w++,ATTRIB_VALUE_QUOTED:w++,ATTRIB_VALUE_CLOSED:w++,ATTRIB_VALUE_UNQUOTED:w++,ATTRIB_VALUE_ENTITY_Q:w++,ATTRIB_VALUE_ENTITY_U:w++,CLOSE_TAG:w++,CLOSE_TAG_SAW_WHITE:w++,SCRIPT:w++,SCRIPT_ENDING:w++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var n=e.ENTITIES[t],r="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=r})),e.STATE)e.STATE[e.STATE[_]]=_;function T(t,e,n){t[e]&&t[e](n)}function x(t,e,n){t.textNode&&A(t),T(t,e,n)}function A(t){t.textNode=I(t.opt,t.textNode),t.textNode&&T(t,"ontext",t.textNode),t.textNode=""}function I(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function P(t,e){return A(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,T(t,"onerror",e),t}function M(t){return t.sawRoot&&!t.closedRoot&&O(t,"Unclosed root tag"),t.state!==w.BEGIN&&t.state!==w.BEGIN_WHITESPACE&&t.state!==w.TEXT&&P(t,"Unexpected end"),A(t),t.c="",t.closed=!0,T(t,"onend"),o.call(t,t.strict,t.opt),t}function O(t,e){if("object"!=typeof t||!(t instanceof o))throw new Error("bad call to strictFail");t.strict&&P(t,e)}function C(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,n=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(n.ns=e.ns),t.attribList.length=0,x(t,"onopentagstart",n)}function R(t,e){var n=t.indexOf(":")<0?["",t]:t.split(":"),r=n[0],i=n[1];return e&&"xmlns"===t&&(r="xmlns",i=""),{prefix:r,local:i}}function D(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=R(t.attribName,!0),n=e.prefix,r=e.local;if("xmlns"===n)if("xml"===r&&t.attribValue!==u)O(t,"xml: prefix must be bound to "+u+"\nActual: "+t.attribValue);else if("xmlns"===r&&"http://www.w3.org/2000/xmlns/"!==t.attribValue)O(t,"xmlns: prefix must be bound to http://www.w3.org/2000/xmlns/\nActual: "+t.attribValue);else{var i=t.tag,o=t.tags[t.tags.length-1]||t;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,x(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function k(t,e){if(t.opt.xmlns){var n=t.tag,r=R(t.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(O(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=r.prefix);var i=t.tags[t.tags.length-1]||t;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(e){x(t,"onopennamespace",{prefix:e,uri:n.ns[e]})}));for(var o=0,a=t.attribList.length;o<a;o++){var s=t.attribList[o],u=s[0],c=s[1],l=R(u,!0),f=l.prefix,h=l.local,d=""===f?"":n.ns[f]||"",p={name:u,value:c,prefix:f,local:h,uri:d};f&&"xmlns"!==f&&!d&&(O(t,"Unbound namespace prefix: "+JSON.stringify(f)),p.uri=f),t.tag.attributes[u]=p,x(t,"onattribute",p)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),x(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=w.TEXT:t.state=w.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function L(t){if(!t.tagName)return O(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=w.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=w.SCRIPT);x(t,"onscript",t.script),t.script=""}var e=t.tags.length,n=t.tagName;t.strict||(n=n[t.looseCase]());for(var r=n;e--;){if(t.tags[e].name===r)break;O(t,"Unexpected close tag")}if(e<0)return O(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=w.TEXT);t.tagName=n;for(var i=t.tags.length;i-- >e;){var o=t.tag=t.tags.pop();t.tagName=t.tag.name,x(t,"onclosetag",t.tagName);var a={};for(var s in o.ns)a[s]=o.ns[s];var u=t.tags[t.tags.length-1]||t;t.opt.xmlns&&o.ns!==u.ns&&Object.keys(o.ns).forEach((function(e){var n=o.ns[e];x(t,"onclosenamespace",{prefix:e,uri:n})}))}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=w.TEXT}function N(t){var e,n=t.entity,r=n.toLowerCase(),i="";return t.ENTITIES[n]?t.ENTITIES[n]:t.ENTITIES[r]?t.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(e=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(e=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(e)||i.toLowerCase()!==n?(O(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function j(t,e){"<"===e?(t.state=w.OPEN_WAKA,t.startTagPosition=t.position):p(e)||(O(t,"Non-whitespace before first tag."),t.textNode=e,t.state=w.TEXT)}function F(t,e){var n="";return e<t.length&&(n=t.charAt(e)),n}w=e.STATE,String.fromCodePoint||(b=String.fromCharCode,E=Math.floor,S=function(){var t,e,n=16384,r=[],i=-1,o=arguments.length;if(!o)return"";for(var a="";++i<o;){var s=Number(arguments[i]);if(!isFinite(s)||s<0||s>1114111||E(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?r.push(s):(t=55296+((s-=65536)>>10),e=s%1024+56320,r.push(t,e)),(i+1===o||r.length>n)&&(a+=b.apply(null,r),r.length=0)}return a},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:S,configurable:!0,writable:!0}):String.fromCodePoint=S)}(e)}).call(this,n(77).Buffer)},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],s=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(t,a,a+16383>s?s:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*m}},function(t,e,n){t.exports=i;var r=n(46).EventEmitter;function i(){r.call(this)}n(17)(i,r),i.Readable=n(78),i.Writable=n(226),i.Duplex=n(227),i.Transform=n(228),i.PassThrough=n(229),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(l(),0===r.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",c),t.on("error",c),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t}},function(t,e){},function(t,e,n){"use strict";var r=n(48).Buffer,i=n(222);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,o=r.allocUnsafe(t>>>0),a=this.head,s=0;a;)e=a.data,n=o,i=s,e.copy(n,i),s+=a.data.length,a=a.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,u=1,c={},l=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},h.clearImmediate=d}function d(t){delete c[t]}function p(t){if(l)setTimeout(p,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{d(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(11),n(24))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(11))},function(t,e,n){"use strict";t.exports=o;var r=n(117),i=Object.create(n(30));function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(17),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(79)},function(t,e,n){t.exports=n(18)},function(t,e,n){t.exports=n(78).Transform},function(t,e,n){t.exports=n(78).PassThrough},function(t,e){(function(){"use strict";e.stripBOM=function(t){return"\ufeff"===t[0]?t.substring(1):t}}).call(this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InteractionService=void 0;const r=n(29),i=n(16);e.InteractionService=class{constructor(){this.interactionMap={};for(const t in i.InteractionType)this.interactionMap[t]=new r.ConsistentArray}update(){for(const t in i.InteractionType)this.interactionMap[t].sync()}getInteractables(t,e,n,r){return this.interactionMap[t].getArray().filter(t=>this.canInteract(t,e,n,r).canInteract)}getInteractable(t,e,n,r){const i=this.interactionMap[t].getArray().map(t=>this.canInteract(t,e,n,r)).filter(t=>t.canInteract);if(0!==i.length)return i.sort((t,e)=>t.distance-e.distance)[0].ref}canInteract(t,e,n,r){const i=t.getPosition(),o=e.x,a=e.y,s=e.x+Math.sin(n)*r,u=e.y-Math.cos(n)*r,c=s-o,l=u-a,f=i.position.x,h=i.position.y,d=i.radius;if((f-o)*c+(h-a)*l<0)return{canInteract:!1,distance:-1,ref:t};const p=Math.sqrt(c*c+l*l);let m=((f-o)*(s-o)+(h-a)*(u-a))/(p*p);m=Math.min(1,Math.max(m,0));const g=f-(o+m*c),v=h-(a+m*l),y=Math.sqrt(g*g+v*v);return{canInteract:y<d,distance:y,ref:t}}registerEntity(t,e){this.interactionMap[e].add(t)}unregisterEntity(t,e){this.interactionMap[e].remove(t)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapService=void 0;const r=n(233);e.MapService=class{constructor(){this.currentMapData={},this.currentSpawnPoints=[]}init(t){this.serviceLocator=t}destroy(){this.currentMap=void 0,this.currentMapData={},this.currentSpawnPoints=[]}setExistingMapData(t,e){this.currentMapData=t,this.currentMap=e,this.currentSpawnPoints=t[e].spawnPoints}goToLocation(t){const{mapId:e,destination:n}=t;if(e!==this.getCurrentMap()){this.currentMap&&this.syncMapData(),this.currentMap=e,this.currentMapData=this.getMapData(),this.serviceLocator.getScriptingService().offloadEntities();const n=this.serviceLocator.getResourceManager().manifest.maps[e];if(this.currentMapData[t.mapId]){const{entities:e,spawnPoints:n}=this.currentMapData[t.mapId];this.currentSpawnPoints=n,e.forEach(t=>this.serviceLocator.getWorld().addEntity(t))}else{const{entities:t,spawnPoints:e}=(0,r.loadMap)(this.serviceLocator,n);this.currentSpawnPoints=e,t.forEach(t=>this.serviceLocator.getWorld().addEntity(t))}n.metadata.onStart(this.serviceLocator)}const i=this.serviceLocator.getScriptingService().getPlayer(),o=this.getSpawnPoint(n),{position:a,angle:s}=o,{x:u,y:c}=a;i.setPosition(u,c),i.setAngle(s)}getCurrentMap(){return this.currentMap}syncMapData(){this.currentMapData=Object.assign(Object.assign({},this.currentMapData),{[this.currentMap]:{entities:[...this.serviceLocator.getWorld().getEntityArray().getArray()],spawnPoints:this.currentSpawnPoints}})}getMapData(){return this.currentMapData}getSpawnPoints(){return this.currentSpawnPoints}getSpawnPoint(t){const e=t||"BIRTH",n=this.currentSpawnPoints.find(t=>t.name===e);return n||console.error("No spawn point ",this.currentSpawnPoints,this.currentMap),n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadRectangle=e.loadPoint=e.loadPolygon=e.loadMap=void 0;const r=n(119),i=n(20),o=n(50),a=n(128),s=n(82),u=n(83),c=n(129),l=n(61),f=n(103),h=n(104);function d(t){const{serviceLocator:e,entities:n,object:o}=t,{closed:a,points:s}=o,c=o.data.properties;switch(o.data.type){case h.TiledObjectType.Wall:const t=a?s.length:s.length-1;for(let r=0;r<t;r++){const t=s[r],o=s[(r+1)%s.length];n.push(i.EntityFactory.SCENERY_WALL(e,(0,u.createStaticWallState)(c.sprite,t,o,Number.parseFloat(c.height),Number.parseFloat(c.offset),"true"===c.collides)))}break;case h.TiledObjectType.Door:const o=s[0],l=s[1];c.keyId||c.locked?n.push(i.EntityFactory.DOOR_LOCKED(e,(0,r.createLockedDoorState)({start:o,end:l,spriteString:c.sprite,keyId:c.keyId,configuration:"true"===c.locked?{width:Number.parseFloat(c.width),height:Number.parseFloat(c.height),shouldReset:"true"===c.resets}:void 0}))):n.push(i.EntityFactory.DOOR(e,(0,r.createDoorState)(o,l,c.sprite)))}}function p(t){const{serviceLocator:e,entities:n,object:r,spawnPoints:u}=t,{properties:f}=r.data;switch(r.data.type){case h.TiledObjectType.SpawnPoint:const t=Number.parseFloat(f.angle),d=f.name;u.push({angle:t,name:d,position:{x:r.data.x,y:r.data.y}});break;case h.TiledObjectType.GameItem:n.push(i.EntityFactory.ITEM_DROP(e,(0,o.createItemDropState)({item:l.GameItems[f.item],position:{x:r.data.x,y:r.data.y}})));break;case h.TiledObjectType.Portal:n.push(i.EntityFactory.LADDER(e,(0,a.createLadderState)(r.data.x,r.data.y,"ladder",{mapId:f.map,destination:f.spawn})));break;case h.TiledObjectType.NPC:n.push(i.EntityFactory.NPC_BULKY_MAN(e,(0,s.createNPCState)({position:{x:r.data.x,y:r.data.y},npcTypeId:f.npcTypeId})));break;case h.TiledObjectType.Script:n.push(i.EntityFactory.SCRIPT(e,(0,c.createScriptState)({x:r.data.x,y:r.data.y})))}}function m(t){const{serviceLocator:e,entities:n,object:r}=t,{properties:o}=r.data;switch(r.data.type){case h.TiledObjectType.Floor:const{sprite:t,height:a}=o;n.push(i.EntityFactory.SCENERY_FLOOR(e,(0,u.createStaticFloorState)(t,Number.parseFloat(a),{x:r.data.x,y:r.data.y},{x:r.data.x+r.width,y:r.data.y+r.height})));break;case h.TiledObjectType.StaticSprite:n.push(i.EntityFactory.SCENERY_SPRITE(e,(0,u.createStaticSpriteState)(o.sprite,{x:r.data.x+r.width/2,y:r.data.y+r.height/2},Number.parseFloat(o.height),r.width,r.height)))}}e.loadMap=function(t,e){console.log("Loading map",e);const{tiled:n}=e,r=[],i=[];return n.objects.forEach(e=>{switch(e.type){case f.GameTiledObjectType.Polygon:d({serviceLocator:t,entities:r,object:e});break;case f.GameTiledObjectType.Point:p({serviceLocator:t,entities:r,spawnPoints:i,object:e});break;case f.GameTiledObjectType.Rectangle:m({serviceLocator:t,entities:r,object:e})}}),{entities:r,spawnPoints:i}},e.loadPolygon=d,e.loadPoint=p,e.loadRectangle=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineEmitter=void 0;const r=n(21);e.LineEmitter=t=>{const{creator:e,initialStart:n,initialEnd:i,initialRate:o}=t;let a=n,s=i,u=o;return{emitter:{rate:u,createParticle:()=>{const t=Math.random(),n=r.vec3.sub(r.vec3.create(),s,a),i=r.vec3.scale(r.vec3.create(),n,t),o=r.vec3.add(r.vec3.create(),a,i);return e(o)}},setRate:t=>u=t,setStart:t=>a=t,setEnd:t=>s=t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GravityDropParticle=void 0;e.GravityDropParticle=t=>{const{life:e,r:n,g:r,b:i,start:o}=t;return{life:e,render:t=>{const e=t*t*t;return{type:"Particle",particle:{position:[o[0],o[1]-e,o[2]],size:[.1,.1],r:n,g:r,b:i}}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenLockpickingChallenge=void 0;const r=n(40);e.OpenLockpickingChallenge=t=>(e,n)=>{t.getGame().setUpdateWorld(!1),t.getInputService().setInputState(r.InputState.INVENTORY),t.getStore().getActions().openLockpickEvent(n=>{t.getGame().setUpdateWorld(!0),t.getInputService().setInputState(r.InputState.DEFAULT),e(n)},n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.throttleCount=e.throttle=void 0;const r=n(10);e.throttle=function(t,e){let n=!0;return i=>{n&&(n=!1,r.ProcedureService.setTimeout(()=>n=!0,e),t(i))}},e.throttleCount=function(t,e){let n=0;return r=>{n>=e?(n=0,t(r)):n++}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SparkleParticle=void 0;e.SparkleParticle=t=>{const{start:e}=t;return{life:30,render:t=>{const n=.5*Math.random();return{type:"Particle",particle:{position:[e[0],e[1],e[2]],size:[n,n],r:254/255,g:231/255,b:97/255}}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpawnEmitter=void 0;e.SpawnEmitter=t=>{const{creator:e,position:n,rate:r}=t;let i=0;return{emitter:{rate:r,createParticle:()=>{i+=.5;const t=.5*Math.sin(i),r=.5*Math.cos(i);return e([n[0]+t,n[1],n[2]+r])}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DamageTextParticle=e.HealthDropParticle=void 0;e.HealthDropParticle=t=>{const{damage:e,start:n,getAngle:r}=t;let i=n[1];return{life:30,render:t=>{i+=.002;const o=r();return{type:"Text",particle:{contents:""+e,colour:{r:1,g:1,b:1},position:[n[0],n[2]],height:i+.2,size:.2,angle:o,horizontalPlacement:.5,verticalPlacement:.5}}}}};e.DamageTextParticle=t=>{const{damage:e,start:n,getAngle:r}=t;let i=.02,o=n[1];return{life:30,render:t=>{o+=i,i-=.002;const a=r();return{type:"Text",particle:{contents:""+e,colour:{r:138/255,g:3/255,b:3/255},position:[n[0],n[2]],height:o,size:.2,angle:a,horizontalPlacement:.5,verticalPlacement:.5}}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpawnParticle=void 0;e.SpawnParticle=t=>{const{start:e}=t;return{life:30,render:t=>{const n=.4*(1-t);return{type:"Particle",particle:{position:[e[0],e[1]+1*t,e[2]],size:[n,n],r:224/255,g:90/255,b:209/255}}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ITEM_DROP_MAP=e.ITEM_DROPS_NONE=void 0,e.ITEM_DROPS_NONE=[],e.ITEM_DROP_MAP={npc_bulky_man:[]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NPCTypes=void 0,e.NPCTypes={boss:{health:2e3,spriteIdle:"blob",spriteDead:"blob_dead",spriteAttack:["blob_attack"],spriteRun:"sprite_run",spriteWidth:2,spriteHeight:2,itemDropId:"npc_bulky_man",boss:!0,damage:10,speed:1},jailor:{health:50,itemDropId:"npc_bulky_man",spriteIdle:"npc_bulky_man",spriteDead:"dead_man",spriteAttack:["npc_bulky_man_hit","npc_bulky_man_hit2"],spriteRun:"npc_bulky_man_run",spriteWidth:1,spriteHeight:1,moveVibration:{amount:.3},damage:10,speed:1},small_jailor:{health:30,itemDropId:"npc_bulky_man",spriteIdle:"npc_bulky_man",spriteDead:"dead_man",spriteAttack:["npc_bulky_man_hit","npc_bulky_man_hit2"],spriteRun:"npc_bulky_man_run",spriteWidth:.6,spriteHeight:.6,moveVibration:{amount:.1},damage:8,speed:1},slime:{health:20,spriteIdle:"blob",spriteDead:"blob_dead",spriteAttack:["blob_attack"],spriteRun:"sprite_run",spriteWidth:.8,spriteHeight:.8,itemDropId:"npc_bulky_man",damage:5,speed:1},small_slime:{health:1,spriteIdle:"blob",spriteDead:"blob_dead",spriteAttack:["blob_attack"],spriteRun:"sprite_run",spriteWidth:.4,spriteHeight:.4,itemDropId:"npc_bulky_man",damage:1,speed:1}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FloorRenderComponent=void 0;const r=n(1),i=n(12);e.FloorRenderComponent=()=>{let t;return{getActions:e=>({onEntityCreated:()=>{t=e.getServiceLocator().getRenderService().floorRenderService.createItem(function(t){const{floorStart:e,floorEnd:n,floorSprite:o,floorHeight:a}=t.getState(),{textureCoordinate:s,pixelCoordinate:u}=t.getServiceLocator().getResourceManager().manifest.spritesheets[i.SpriteSheets.SPRITE].getSprite(o);return{startPos:[e.x,e.y],endPos:[n.x,n.y],height:a,textureX:s.textureX,textureY:s.textureY,textureWidth:Math.abs(n.x-e.x)*s.textureWidth*r.SCENERY_PIXEL_DENSITY/u.textureWidth,textureHeight:Math.abs(n.y-e.y)*s.textureHeight*r.SCENERY_PIXEL_DENSITY/u.textureWidth,repeatWidth:s.textureWidth,repeatHeight:s.textureHeight}}(e))},onEntityDeleted:()=>{t&&(e.getServiceLocator().getRenderService().floorRenderService.freeItem(t),t=void 0)}})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParticleService=e.EmitterInstance=void 0;const r=n(29),i=n(60);class o{constructor(t,e,n){this.serviceLocator=t,this.particle=e,this.removeSelf=n,this.x=0;const r=e.render(0);this.type=r.type,this.renderItem=this.getRenderService().createItem(r.particle)}update(){this.x+=(0,i.fpsNorm)(1),this.x>this.particle.life?(this.getRenderService().freeItem(this.renderItem),this.removeSelf()):this.getRenderService().updateItem(this.renderItem,this.particle.render(this.x/this.particle.life).particle)}destroy(){this.getRenderService().freeItem(this.renderItem),this.removeSelf()}getRenderService(){switch(this.type){case"Particle":return this.serviceLocator.getRenderService().particleRenderService;case"Text":return this.serviceLocator.getRenderService().textRenderService}}}class a{constructor(t){this.emitter=t,this.elapsedFrames=0,this.createdParticles=0}update(t){this.elapsedFrames+=(0,i.fpsNorm)(1);const e=Math.floor(this.elapsedFrames*this.emitter.rate);for(let n=this.createdParticles;n<e;n++)t(this.emitter.createParticle());this.createdParticles=e}}e.EmitterInstance=a;e.ParticleService=class{init(t){this.serviceLocator=t,this.particles=new r.ConsistentArray,this.emitters=new r.ConsistentArray}update(){this.particles.sync(),this.emitters.sync(),this.particles.getArray().forEach(t=>t.update()),this.emitters.getArray().forEach(t=>t.update(t=>this.addParticle(t)))}addEmitter(t){const e=new a(t);this.emitters.add(e)}removeEmitter(t){const e=this.emitters.getArray().find(e=>e.emitter===t);this.emitters.remove(e)}getParticles(){return this.particles.getArray()}addParticle(t){const e=new o(this.serviceLocator,t,()=>this.particles.remove(e));this.particles.add(e)}destroy(){try{this.emitters.clear(),this.particles.getArray().forEach(t=>{try{t.destroy()}catch(t){}}),this.emitters.sync(),this.particles.sync()}catch(t){}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhysicsService=void 0;const r=n(29),i=n(3);e.PhysicsService=class{constructor(){this.entities=new r.ConsistentArray,this.boundaries=new r.ConsistentArray}registerPhysicsEntity(t){this.entities.add(t)}unregisterPhysicsEntity(t){this.entities.remove(t)}registerBoundary(t){this.boundaries.add(t)}unregisterBoundary(t){this.boundaries.remove(t)}update(){this.entities.sync(),this.boundaries.sync();const t=this.entities.getArray(),e=this.boundaries.getArray();for(const e of t)this.calculateEntityGravityCollisionImpulse(e),this.calculateEntityCollisionImpulse(e,t);for(const n of t)this.calculateEntityBoundaryCollisionImpulse(n,e);this.moveEntities(t)}calculateEntityGravityCollisionImpulse(t){const{height:e,heightVelocity:n,elastic:r}=t.getPhysicsInformation();let i=n;e>.01&&(i=n-.01),e<0&&i<0&&(i=Math.abs(i),t.setHeight(0),i*=r),t.setHeightVelocity(i)}calculateEntityBoundaryCollisionImpulse(t,e){if(!t.collidesWalls)return;const n=t.getPhysicsInformation();for(const t of e){const e=t.start.x,r=t.start.y,o=t.end.x,a=t.end.y,s=o-e,u=a-r,c=n.position.x,l=n.position.y,f=n.radius,h=Math.sqrt(s*s+u*u);let d=((c-e)*(o-e)+(l-r)*(a-r))/(h*h);d=Math.min(1,Math.max(d,0));const p=c-(e+d*s),m=l-(r+d*u);if(Math.sqrt(p*p+m*m)>f)continue;const g=i.vec.vec_normalize({x:p,y:m}),v=g.x*n.velocity.x+g.y*n.velocity.y,y=v>0?0:v*(1+n.elastic);n.velocity.x=n.velocity.x-y*g.x,n.velocity.y=n.velocity.y-y*g.y}}calculateEntityCollisionImpulse(t,e){const n=t.getPhysicsInformation(),r=n.position,i=n.radius,o={x:0,y:0};for(const a of e){if(t===a||!1===(a.collidesEntities&&t.collidesEntities))continue;const e=a.getPhysicsInformation(),s=e.position,u=e.radius,c=s.x-r.x,l=s.y-r.y,f=(i+u)*(i*u),h=c*c+l*l;if(h>f)continue;const d=(1-h/f)*(e.mass/n.mass),p=c,m=l;o.x+=p*(.2*-d),o.y+=m*(.2*-d)}0===o.x&&0===o.y||t.setVelocity(n.velocity.x+o.x,n.velocity.y+o.y)}moveEntities(t){for(const e of t){const t=e.getPhysicsInformation(),n=t.position.x+t.velocity.x,r=t.position.y+t.velocity.y,i=t.height+t.heightVelocity,o=t.velocity.x*t.friction,a=t.velocity.y*t.friction;e.setPosition(n,r),e.setVelocity(o,a),e.setHeight(i)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SerialisationListeners=void 0;e.SerialisationListeners={attachWindowExitListener:(t,e)=>{window.onbeforeunload=()=>{const n=t.getSerialisationService().serialise();console.log("Saving game",n),e.setSaveGame(n)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SerialisationService=void 0;const r=n(1),i=n(99),o=n(20),a=n(57);e.SerialisationService=class{constructor(){}init(t){this.serviceLocator=t}serialise(){this.serviceLocator.getMapService().syncMapData();const t=this.serviceLocator.getMapService().getMapData(),e=Object.entries(t).reduce((t,e)=>{const[n,r]=e;return Object.assign(Object.assign({},t),{[n]:{entities:this.serialiseEntities(r.entities),spawnPoints:r.spawnPoints}})},{});return{version:r.VERSION,world:{player:this.serviceLocator.getScriptingService().getPlayer().serialise(),maps:e,currentMap:this.serviceLocator.getMapService().getCurrentMap()},maxStage:a.store.getState().gameStart.maxStage,services:{tutorial:this.serviceLocator.getTutorialService().serialise()}}}deserialise(t){const e=Object.entries(t.world.maps).reduce((t,e)=>{const[n,r]=e;return Object.assign(Object.assign({},t),{[n]:{entities:r.entities.map(t=>this.deserialiseEntity(t)),spawnPoints:r.spawnPoints}})},{}),n=this.deserialisePlayer(t.world.player);return{world:{maps:e,currentMap:t.world.currentMap,player:n},services:{tutorial:t.services.tutorial},maxStage:t.maxStage}}deserialisePlayer(t){return new i.Player(this.serviceLocator,t.beatenGame,t)}deserialiseEntity(t){return o.EntityFactory[t.serial](this.serviceLocator,t.state)}serialiseEntities(t){return t.map(t=>this.serialiseEntity(t))}serialiseEntity(t){return{state:Object.assign(Object.assign({},t.getState()),{exists:!1}),serial:t.type}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameStorage=void 0;const r="OTHERWORLD_SAVE";e.GameStorage=class{isSaveAvailable(){return!!localStorage.getItem(r)}getSaveGame(){const t=localStorage.getItem(r);return JSON.parse(t)}setSaveGame(t){localStorage.setItem(r,JSON.stringify(t))}clearSaveGame(){localStorage.removeItem(r)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceLocator=void 0;e.ServiceLocator=class{constructor(t,e,n,r,i,o,a,s,u,c,l,f,h,d){this.game=t,this.resourceManager=e,this.world=n,this.renderService=r,this.audioService=i,this.store=o,this.scriptingService=a,this.inputService=s,this.physicsService=u,this.interactionService=c,this.serialisationService=l,this.tutorialService=f,this.particleService=h,this.mapService=d}getGame(){return this.game}getResourceManager(){return this.resourceManager}getWorld(){return this.world}getRenderService(){return this.renderService}getAudioService(){return this.audioService}getStore(){return this.store}getScriptingService(){return this.scriptingService}getInputService(){return this.inputService}getPhysicsService(){return this.physicsService}getInteractionService(){return this.interactionService}getSerialisationService(){return this.serialisationService}getTutorialService(){return this.tutorialService}getParticleService(){return this.particleService}getMapService(){return this.mapService}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeControlledLoop=void 0;e.TimeControlledLoop=class{constructor(t,e){this.targetMilliseconds=t,this.callback=e,this.actualMilliseconds=t,this.actualProportion=1,this.budgetUsage=0}start(){this.looping=!0,this.loop()}stop(){this.looping=!1}loop(){this.startMilliseconds=Date.now(),this.callback(this,this.actualMilliseconds,this.actualProportion,this.budgetUsage),this.endMilliseconds=Date.now();const t=this.endMilliseconds-this.startMilliseconds;this.budgetUsage=t/this.targetMilliseconds;let e=this.targetMilliseconds-t;e=e>=0?e:0,e>0?(this.actualMilliseconds=this.targetMilliseconds,this.actualProportion=1):(this.actualMilliseconds=t,this.actualProportion=this.targetMilliseconds/t),this.looping&&setTimeout(()=>this.loop(),e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameFadeContainer=void 0;const r=n(0),i=n(7),o=n(51),a=n(1);e.GameFadeContainer=t=>{const[e,n]=(0,i.useGlobalState)();return r.createElement(o.FadeComponent,{shouldShow:e.gameStart.showingFade,fadeInSpeed:1e3,fadeOutSpeed:300,render:t=>0===t?r.createElement(r.Fragment,null):r.createElement("div",{style:{width:a.DOM_WIDTH,height:a.DOM_HEIGHT,position:"absolute",backgroundColor:"#000000",opacity:t}})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlayModeContainer=void 0;const r=n(0),i=n(254),o=n(255),a=n(256),s=n(257),u=n(7),c=n(130),l=n(265),f=n(267);e.PlayModeContainer=t=>{const[e,n]=(0,u.useGlobalState)();return e.gameStart.showingMenu?r.createElement(r.Fragment,null):r.createElement(r.Fragment,null,r.createElement(i.HealthBarComponent,null),r.createElement(o.WeaponComponent,null),r.createElement(a.ScoreContainer,null),r.createElement(l.ItemCollectionContainer,null),r.createElement(s.KeyHintsContainer,null),r.createElement(c.InventoryContainer,null),r.createElement(f.MiniGameContainer,null))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HealthBarComponent=void 0;const r=n(0),i=n(1),o=n(6),a=n(7),s=n(5),u=n(10);e.HealthBarComponent=t=>{const[e,n]=(0,a.useGlobalState)(),[c,l]=r.useState(null),[f,h]=r.useState(null),[d,p]=r.useState(null),[m,g]=r.useState(0),[v,y]=r.useState(0),[b,E]=r.useState(void 0);r.useEffect(()=>{l((0,o.animation)(t=>g(10*-Math.sin(t*Math.PI))).speed(100).driven(!1).whenDone(()=>g(0))),h((0,o.animation)(t=>y(t)).speed(100).driven(!1)),p((0,o.animation)(t=>y(1-t)).speed(200).driven(!1))},[]);const S=()=>{c.stop(),c.start(),f.start(),b&&u.ProcedureService.clearTimeout(b),E(u.ProcedureService.setTimeout(()=>{d.start()},2e3))};(0,a.useDispatchListener)({onPlayerDamaged:S,onPlayerHealed:S},[c,f,d,b]);const w=416*e.player.health.current/e.player.health.max;return r.createElement("div",{style:{position:"absolute",width:i.DOM_WIDTH,height:i.DOM_HEIGHT,marginTop:m,opacity:v}},r.createElement("div",{style:{position:"absolute",marginLeft:(i.DOM_WIDTH-416)/2,marginTop:630,width:416,height:27,backgroundColor:"#000000",borderColor:"#AC0000",borderWidth:1,borderStyle:"solid",borderRadius:8}}),e.player.health.current?r.createElement("div",{style:{position:"absolute",marginLeft:(i.DOM_WIDTH-w)/2,marginTop:630,width:w,height:27,backgroundColor:"#700000",borderColor:"#AC0000",borderWidth:1,borderStyle:"solid",borderRadius:8}}):null,r.createElement(s.TextComponent,{style:{position:"absolute",marginLeft:(i.DOM_WIDTH-416)/2,width:416,marginTop:630,height:27,textAlign:"center"},text:""+e.player.health.current,size:s.TextSize.SMALL}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WeaponComponent=void 0;const r=n(0),i=n(1),o=(n(52),n(6)),a=n(7);e.WeaponComponent=t=>{const[e,n]=(0,a.useGlobalState)(),[s,u]=r.useState(.55),[c,l]=r.useState(0);let f,h;r.useEffect(()=>{const t=(0,o.parallel)((0,o.animation)(t=>u(.55+t/4)).speed(100),(0,o.animation)(t=>l(180*t)).speed(100)),e=(0,o.parallel)((0,o.animation)(t=>u(.8-t/4)).speed(100),(0,o.animation)(t=>l(180*(1-t))).speed(100));return f=(0,o.sequence)(t,e).driven(!1),h=(0,o.animation)(t=>{}).driven(!0).speed(400).looping().start(),()=>{f.stop(),h.stop()}},[]);i.DOM_HEIGHT,i.DOM_HEIGHT,i.DOM_WIDTH,i.DOM_HEIGHT;return r.createElement(r.Fragment,null)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScoreContainer=void 0;const r=n(5),i=n(7),o=n(0),a=n(1),s=n(6),u=n(34);e.ScoreContainer=t=>{const[e,n]=(0,i.useGlobalState)(),[c,l]=o.useState(1);let f;o.useEffect(()=>{f=(0,s.animation)(t=>{l(1+t)}).tween(t=>2*t).tween(s.sin).speed(300).driven(!1)},[]);const h=`scale(${c})`;return o.createElement("div",{style:{width:a.DOM_WIDTH,height:a.DOM_HEIGHT,display:"flex",justifyContent:"center",position:"absolute",alignItems:"flex-start"}},o.createElement(r.TextComponent,{text:"Stage "+e.gameStart.currentStage,font:r.TextFont.REGULAR,size:r.TextSize.SMALL,colour:r.TextColour.LIGHT,style:Object.assign({transform:h,transformOrigin:"top center"},(0,u.ShadowComponentStyleAlpha)())}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyHintsContainer=void 0;const r=n(0),i=n(1),o=n(10),a=n(258),s=n(7),u=n(260);e.KeyHintsContainer=t=>{const[e,n]=(0,s.useGlobalState)(),[c,l]=r.useState(!1),f=e.keyHints.keyHints,h=Object.keys(f).map(t=>{const e=f[t];return{key:t,keyCode:e.keys,selected:c,text:e.hint}});r.useEffect(()=>{const t=o.ProcedureService.setTimeout(()=>l(!c),500);return()=>o.ProcedureService.clearTimeout(t)},[c]);return r.createElement("div",{style:{userSelect:"none",position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:.7*i.DOM_HEIGHT,width:i.DOM_WIDTH,height:i.DOM_HEIGHT*(1-.7)}},r.createElement(u.AnimationGroupContainer,{fadeInMs:200,fadeOutMs:200,list:h,render:(t,e,n)=>{const i=n?-1+e:1-e;return r.createElement(a.KeyHintComponent,Object.assign({},t,{style:{height:64*(1-Math.abs(i)),opacity:1-Math.abs(i)},selected:c}))}}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyHintComponent=void 0;const r=n(0),i=n(5),o=n(259);e.KeyHintComponent=t=>{const e=t.selected?o.SELECTED_TEXT_OFFSET:0,n=t.keyCode.map(e=>r.createElement(o.KeyComponent,{key:e,keyCode:e,selected:t.selected,style:{marginRight:8}}));return r.createElement("div",{style:Object.assign(Object.assign({},t.style),{display:"flex",alignItems:"center"})},n,r.createElement(i.TextComponent,{text:t.text,font:i.TextFont.REGULAR,size:i.TextSize.MED,colour:i.TextColour.LIGHT,shadow:i.TextShadow.LARGE,style:{transform:`translate(0px, ${e}px)`}}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyComponent=e.SELECTED_TEXT_OFFSET=void 0;const r=n(0),i=n(5),o=n(27),a=n(39);e.SELECTED_TEXT_OFFSET=4;e.KeyComponent=t=>{const n=t.selected?e.SELECTED_TEXT_OFFSET:0;return r.createElement("div",{style:Object.assign({display:"inline-flex",justifyContent:"center",alignItems:"center"},t.style)},r.createElement(i.TextComponent,{text:t.keyCode,font:i.TextFont.REGULAR,size:i.TextSize.MED,colour:i.TextColour.LIGHT,style:{textAlign:"center",minWidth:48,minHeight:48,transform:`translate(0px, ${n}px)`,backgroundColor:o.Colours.HOVER_GREY,borderRadius:a.Spacing.RADIUS_SMALL}}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationGroupContainer=void 0;const r=n(0),i=n(51);e.AnimationGroupContainer=function(t){const{fadeInMs:e,fadeOutMs:n,render:o,list:a}=t,[s,u]=r.useState({});r.useEffect(()=>{const e={};Object.entries(s).forEach(([t,n])=>{e[t]=Object.assign(Object.assign(Object.assign({},e[t]),n),{shouldShow:!1})}),t.list.forEach(t=>{e[t.key]={props:t,shouldShow:!0}}),u(e)},[a]);const c=t=>r.createElement(i.FadeComponent,{key:t.props.key,shouldShow:t.shouldShow,startingShown:!1,fadeInSpeed:e,fadeOutSpeed:n,onFadeOut:()=>(t=>{const e=Object.assign({},s);delete e[t.key],u(e)})(t.props),render:(e,n)=>o(t.props,e,n)}),l=Object.values(s).map(t=>c(t));return r.createElement(r.Fragment,null,l)}},function(t,e,n){"use strict";n.r(e);var r=n(0),i={attributes:!0,characterData:!0,subtree:!0,childList:!0};e.default=function(t){const[e,n]=Object(r.useState)(null),o=Object(r.useCallback)(()=>{n(t.current?t.current.getBoundingClientRect():null)},[]);var a;return a=()=>{o()},Object(r.useEffect)(()=>{"function"==typeof a&&a()},[]),function(t,e,n=i){Object(r.useEffect)(()=>{if(t.current){const r=new MutationObserver(e);return r.observe(t.current,n),()=>{r.disconnect()}}},[e,n])}(t,o),e}},function(t,e,n){"use strict";function r(t){const e=15&t;return`${i(t>>4&15)}${i(e)}`}function i(t){if(t<9)return t;switch(t){case 10:return"a";case 11:return"b";case 12:return"c";case 13:return"d";case 14:return"e";case 15:return"f"}return"?"}Object.defineProperty(e,"__esModule",{value:!0}),e.getHexFrom4Bit=e.getHexFromByte=e.getHexFromRGB=e.getImagePropsFromSprite=void 0,e.getImagePropsFromSprite=function(t,e,n){const r=t.pixelCoordinate.textureWidth,i=t.pixelCoordinate.textureHeight,o=t.pixelCoordinate.textureX,a=t.pixelCoordinate.textureY,s=t.spriteSheetWidth,u=t.spriteSheetHeight,c=e/r,l=n/i,f=Math.ceil(s*c),h=Math.ceil(u*l),d=Math.ceil(o*c),p=Math.ceil(a*l);return{backgroundImage:`url(${t.source})`,backgroundPosition:`-${d}px -${p}px`,backgroundSize:`${f}px ${h}px`,imageRendering:"pixelated"}},e.getHexFromRGB=function(t,e,n){return`${r(t)}${r(e)}${r(n)}`},e.getHexFromByte=r,e.getHexFrom4Bit=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InventoryItemComponent=void 0;const r=n(0),i=n(53),o=n(5),a=n(15),s=n(12),u=n(27),c=n(130);e.InventoryItemComponent=t=>{const{itemMetadata:e,style:n}=t,{item:l,count:f}=e,[h,d]=((0,a.useServiceLocator)(),r.useState(!1)),[p,m]=r.useState(0),[g,v]=r.useState(void 0),y=l.name+(f>1?` (${f})`:"");return r.createElement("div",{style:Object.assign({display:"flex",borderRadius:c.INVENTORY_BORDER_RADIUS,background:h?u.Colours.HOVER_GREY:u.Colours.DESELCT_GREY,paddingLeft:8},n),onMouseEnter:()=>{t.onMouseEnter(),d(!0)},onMouseLeave:()=>{t.onMouseLeave(),d(!1)},onClick:t.onClick},r.createElement(i.SpriteImageComponent,{sprite:l.spriteIcon,spriteSheet:s.SpriteSheets.SPRITE,style:{width:32,height:32}}),r.createElement(o.TextComponent,{text:y,style:{paddingLeft:8},font:o.TextFont.REGULAR,size:o.TextSize.SMALL,colour:o.TextColour.LIGHT}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemTooltipComponent=e.TooltipComponent=e.TooltipType=void 0;const r=n(23),i=n(0),o=n(5),a=n(34),s=n(6),u=n(53),c=n(12),l=n(131);var f;!function(t){t[t.NONE=0]="NONE",t[t.ITEM=1]="ITEM"}(f=e.TooltipType||(e.TooltipType={}));e.TooltipComponent=t=>i.createElement("div",{style:{position:"absolute",left:t.position.x+64,top:t.position.y+-128/3}},(()=>{switch(t.context.type){case f.NONE:return i.createElement(i.Fragment,null);case f.ITEM:return i.createElement(e.ItemTooltipComponent,{serviceLocator:t.serviceLocator,item:t.context.item})}})());function h(t){switch(t){case r.ItemType.CONSUMABLE:return o.TextColour.RED;case r.ItemType.CRAFTING:return o.TextColour.YELLOW;case r.ItemType.PRECIOUS:case r.ItemType.KEY:return o.TextColour.GOLD;case r.ItemType.EQUIPMENT:return o.TextColour.STEEL}}e.ItemTooltipComponent=t=>{const[e,n]=i.useState(0);return i.useEffect(()=>{const t=(0,s.animation)(n).driven(!1).speed(200).start();return()=>t.stop()},[]),i.createElement("div",{style:Object.assign(Object.assign({width:256},(0,a.ShadowComponentStyle)()),{opacity:e,display:"flex",flexDirection:"column"})},i.createElement(o.TextComponent,{text:t.item.name,font:o.TextFont.REGULAR,colour:o.TextColour.LIGHT,size:o.TextSize.SMALL,style:{width:256,textAlign:"center"}}),i.createElement(o.TextComponent,{text:t.item.type,font:o.TextFont.REGULAR,colour:h(t.item.type),size:o.TextSize.VSMALL,style:{}}),i.createElement(o.TextComponent,{text:t.item.description,font:o.TextFont.REGULAR,colour:o.TextColour.LIGHT,size:o.TextSize.VSMALL,style:{}}),function(t){const e=t=>i.createElement("ul",{style:{padding:0,margin:0,marginLeft:16,color:o.TextColour.LIGHT}},t.map(t=>i.createElement(l.EffectComponent,{effect:t})));switch(t.type){case r.ItemType.EQUIPMENT:return i.createElement(i.Fragment,null,t.onAttack&&i.createElement(i.Fragment,null,p("On attack",o.TextColour.GOLD),e(t.onAttack)),t.onEquip&&i.createElement(i.Fragment,null,p("On equip",o.TextColour.GOLD),e(t.onEquip)));case r.ItemType.CONSUMABLE:return i.createElement(i.Fragment,null,t.onConsume&&i.createElement(i.Fragment,null,p("On consume",o.TextColour.GOLD),e(t.onConsume)))}return}(t.item),function(t,e){const[n,o]=i.useState(0);i.useEffect(()=>{(0,s.animation)(o).speed(500).looping().driven(!1).start()},[]);let a=n;switch(a=n>.5?2:-2,e.type){case r.ItemType.EQUIPMENT:const n=t.getScriptingService().getPlayer().getInventory().equipped[e.equipmentType]===e;return d([i.createElement(u.SpriteImageComponent,{spriteSheet:c.SpriteSheets.SPRITE,sprite:"ui_finger",style:{width:32,height:32,transform:`translate(0px, ${a}px)`}}),p(n?"to unequip":"to equip")]);case r.ItemType.CONSUMABLE:return d([i.createElement(u.SpriteImageComponent,{spriteSheet:c.SpriteSheets.SPRITE,sprite:"ui_finger",style:{width:32,height:32,transform:`translate(0px, ${a}px)`}}),p("to consume")])}}(t.serviceLocator,t.item))};const d=t=>i.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},t),p=(t,e=o.TextColour.LIGHT)=>i.createElement(o.TextComponent,{text:t,font:o.TextFont.REGULAR,colour:e,size:o.TextSize.VSMALL,style:{marginRight:8}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemCollectionContainer=void 0;const r=n(52),i=n(1),o=n(0),a=n(266),s=n(7),u=n(15);let c=0;e.ItemCollectionContainer=t=>{const e=(0,u.useServiceLocator)(),[n,l]=o.useState([]);return(0,s.useDispatchListener)({onPlayerItemDropCollected:t=>{(t=>{if(t.stackable){const e=n.find(e=>e.item.stackable&&e.item.id===t.id);if(e)return e.amount++,void l([...n])}l([...n,{key:c,amount:1,item:t}]),c++,c%=1e4})(t)}},[n]),o.createElement(r.ViewportComponent,{x:0,y:0,width:i.DOM_WIDTH,height:i.DOM_HEIGHT,style:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start"}},n.map(t=>o.createElement(a.ItemCollectionComponent,{key:t.key,serviceLocator:e,sprite:t.item.spriteIcon,name:t.item.name,amount:t.amount,onRemove:()=>(t=>{const e=n.indexOf(t);var r=[...n.slice(0,e),...n.slice(e+1)];l(r)})(t)})))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemCollectionComponent=void 0;const r=n(34),i=n(0),o=n(5),a=n(53),s=n(6),u=n(10),c=n(12);e.ItemCollectionComponent=t=>{const{serviceLocator:e,amount:n,sprite:f,name:h}=t,[d,p]=i.useState(0),[m,g]=i.useState(0),[v,y]=i.useState(void 0);return i.useEffect(()=>{const e=(0,s.animation)(p).speed(300).driven(!1).start();return y((0,s.animation)(t=>p(1-t)).speed(100).driven(!1).whenDone(t.onRemove)),()=>e.stop()},[]),i.useEffect(()=>{const t=(0,s.animation)(t=>g(1-t)).speed(200).whenDone(()=>g(0)).driven(!1);n>1&&t.start();const e=u.ProcedureService.setTimeout(()=>v&&v.start(),2e3);return()=>{g(0),t.stop(),u.ProcedureService.clearTimeout(e)}},[n,v]),i.useEffect(()=>{v&&y(v.whenDone(t.onRemove))},[t.onRemove]),i.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",opacity:d,marginBottom:-32*(1-d)}},i.createElement("div",{style:Object.assign({display:"flex",alignItems:"center",marginLeft:4,marginBottom:4},(0,r.ShadowComponentStyleSmall)())},n>1?l(n,.5*m+1):i.createElement(i.Fragment,null),i.createElement(a.SpriteImageComponent,{spriteSheet:c.SpriteSheets.SPRITE,sprite:f,style:{width:32,height:32,marginRight:4,marginLeft:4}}),i.createElement(o.TextComponent,{text:h,font:o.TextFont.REGULAR,size:o.TextSize.SMALL,colour:o.TextColour.LIGHT,style:{}})))};const l=(t,e)=>i.createElement(o.TextComponent,{text:"x"+t,font:o.TextFont.REGULAR,size:o.TextSize.SMALL,colour:o.TextColour.LIGHT,style:{transformOrigin:"center",transform:`scale(${e})`}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MiniGameContainer=void 0;const r=n(0),i=n(51),o=n(7),a=n(1),s=n(5),u=n(95),c=n(34),l=n(268);e.MiniGameContainer=t=>{const[e,n]=(0,o.useGlobalState)(),f=t=>{e.minigame.onComplete(t),n.closeMiniGame()};return r.createElement(i.FadeComponent,{startingShown:!1,shouldShow:e.minigame.visible,fadeInSpeed:200,fadeOutSpeed:200,render:t=>0===t?r.createElement(r.Fragment,null):r.createElement("div",{style:Object.assign({width:a.DOM_WIDTH,height:a.DOM_HEIGHT,position:"absolute",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",opacity:t},(0,c.ShadowComponentStyle)())},r.createElement(l.LockPickContainer,{configuration:e.minigame.configuration,onComplete:()=>f(!0)}),r.createElement(u.GameButtonContainer,{width:140,height:46,style:{},childStyle:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onSelect:()=>f(!1)},r.createElement(s.TextComponent,{text:"Give Up",style:{},font:s.TextFont.REGULAR,size:s.TextSize.SMALL,colour:s.TextColour.LIGHT})))})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LockPickContainer=void 0;const r=n(269),i=n(0),o=n(27),a=n(271),s=n(15),u=n(4),c=(t,e)=>new Array(t).fill(void 0).map(()=>new Array(e).fill(!1));e.LockPickContainer=t=>{const e=(0,s.useServiceLocator)(),{width:n,height:l,shouldReset:f}=t.configuration,[h,d]=i.useState(c(n,l)),[p,m]=i.useState(((t,e)=>{const n=new Array(t).fill(void 0).map(()=>new Array(e));for(let r=0;r<t;r++)for(let i=0;i<e;i++)n[r][i]=r+i*t;for(let r=0;r<t;r++)for(let i=0;i<e;i++){const o=Math.floor(Math.random()*t),a=Math.floor(Math.random()*e),s=n[r][i];n[r][i]=n[o][a],n[o][a]=s}return n})(n,l)),[g,v]=i.useState(0);return i.createElement(r.LockMatrixComponent,{selected:h,onPress:(r,i)=>{if(p[r][i]===g){const o=(0,a.cloneDeep)(h);o[r][i]=!0,d(o),v(g+1),e.getAudioService().play(e.getResourceManager().manifest.audio[u.Audios.LOCK_CLICK],.5),g+1>=n*l&&t.onComplete()}else f&&(d(c(n,l)),g>0&&e.getAudioService().play(e.getResourceManager().manifest.audio[u.Audios.LOCK_BREAK],.5),v(0))},style:{},colourPrimary:o.Colours.LOCK_GOLD,colourSecondary:o.Colours.LOCK_GOLD_DARK,colourBackground:o.Colours.LOCK_GOLD_DARKER})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LockMatrixComponent=void 0;const r=n(0),i=n(270),o=n(39);e.LockMatrixComponent=t=>{const e=t.selected.map((e,n)=>r.createElement(a,{key:"row"+n,selected:e,onPress:e=>t.onPress(n,e),colourPrimary:t.colourPrimary,colourSecondary:t.colourSecondary}));return r.createElement("div",{style:{display:"flex",flexDirection:"row",backgroundColor:t.colourBackground,borderRadius:o.Spacing.RADIUS_SMALL,marginBottom:16}},e)};const a=t=>{const e=t.selected.map((e,n)=>r.createElement(i.LockButtonComponent,{key:"but"+n,selected:e,onPress:()=>t.onPress(n),style:{},colourPrimary:t.colourPrimary,colourSecondary:t.colourSecondary}));return r.createElement("div",{style:{display:"flex",flexDirection:"column"}},e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LockButtonComponent=e.HOVER_TEXT_OFFSET=e.SELECTED_TEXT_OFFSET=void 0;const r=n(0),i=n(39);e.SELECTED_TEXT_OFFSET=8,e.HOVER_TEXT_OFFSET=12;e.LockButtonComponent=t=>{const[n,o]=r.useState(!1),a=t.selected?0:n?e.HOVER_TEXT_OFFSET:e.SELECTED_TEXT_OFFSET;return r.createElement("div",{style:Object.assign(Object.assign({},t.style),{width:64,height:64,display:"flex",justifyContent:"center",alignItems:"center"}),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onMouseDown:t.onPress},r.createElement("div",{style:{position:"absolute",width:48,height:48,backgroundColor:t.colourSecondary,borderRadius:i.Spacing.RADIUS_SMALL}}),r.createElement("div",{style:{position:"absolute",width:48,height:48,backgroundColor:t.colourPrimary,transform:`translate(0px, ${-a}px)`,borderRadius:i.Spacing.RADIUS_SMALL}}))}},function(t,e,n){(function(t,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o="Expected a function",a="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",c="[object Array]",l="[object Boolean]",f="[object Date]",h="[object Error]",d="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",v="[object Object]",y="[object RegExp]",b="[object Set]",E="[object String]",S="[object Symbol]",w="[object WeakMap]",_="[object ArrayBuffer]",T="[object DataView]",x="[object Float32Array]",A="[object Float64Array]",I="[object Int8Array]",P="[object Int16Array]",M="[object Int32Array]",O="[object Uint8Array]",C="[object Uint16Array]",R="[object Uint32Array]",D=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,L=/(__e\(.*?\)|\b__t\)) \+\n'';/g,N=/&(?:amp|lt|gt|quot|#39);/g,j=/[&<>"']/g,F=RegExp(N.source),U=RegExp(j.source),B=/<%-([\s\S]+?)%>/g,H=/<%([\s\S]+?)%>/g,G=/<%=([\s\S]+?)%>/g,z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,V=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,q=RegExp(Y.source),$=/^\s+/,K=/\s/,Q=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,X=/\{\n\/\* \[wrapped with (.+)\] \*/,Z=/,? & /,J=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tt=/[()=,{}\[\]\/\s]/,et=/\\(\\)?/g,nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rt=/\w*$/,it=/^[-+]0x[0-9a-f]+$/i,ot=/^0b[01]+$/i,at=/^\[object .+?Constructor\]$/,st=/^0o[0-7]+$/i,ut=/^(?:0|[1-9]\d*)$/,ct=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lt=/($^)/,ft=/['\n\r\u2028\u2029\\]/g,ht="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",dt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pt="[\\ud800-\\udfff]",mt="["+dt+"]",gt="["+ht+"]",vt="\\d+",yt="[\\u2700-\\u27bf]",bt="[a-z\\xdf-\\xf6\\xf8-\\xff]",Et="[^\\ud800-\\udfff"+dt+vt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",St="\\ud83c[\\udffb-\\udfff]",wt="[^\\ud800-\\udfff]",_t="(?:\\ud83c[\\udde6-\\uddff]){2}",Tt="[\\ud800-\\udbff][\\udc00-\\udfff]",xt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",At="(?:"+bt+"|"+Et+")",It="(?:"+xt+"|"+Et+")",Pt="(?:"+gt+"|"+St+")"+"?",Mt="[\\ufe0e\\ufe0f]?"+Pt+("(?:\\u200d(?:"+[wt,_t,Tt].join("|")+")[\\ufe0e\\ufe0f]?"+Pt+")*"),Ot="(?:"+[yt,_t,Tt].join("|")+")"+Mt,Ct="(?:"+[wt+gt+"?",gt,_t,Tt,pt].join("|")+")",Rt=RegExp("[']","g"),Dt=RegExp(gt,"g"),kt=RegExp(St+"(?="+St+")|"+Ct+Mt,"g"),Lt=RegExp([xt+"?"+bt+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[mt,xt,"$"].join("|")+")",It+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[mt,xt+At,"$"].join("|")+")",xt+"?"+At+"+(?:['](?:d|ll|m|re|s|t|ve))?",xt+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vt,Ot].join("|"),"g"),Nt=RegExp("[\\u200d\\ud800-\\udfff"+ht+"\\ufe0e\\ufe0f]"),jt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ft=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ut=-1,Bt={};Bt[x]=Bt[A]=Bt[I]=Bt[P]=Bt[M]=Bt[O]=Bt["[object Uint8ClampedArray]"]=Bt[C]=Bt[R]=!0,Bt[u]=Bt[c]=Bt[_]=Bt[l]=Bt[T]=Bt[f]=Bt[h]=Bt[d]=Bt[m]=Bt[g]=Bt[v]=Bt[y]=Bt[b]=Bt[E]=Bt[w]=!1;var Ht={};Ht[u]=Ht[c]=Ht[_]=Ht[T]=Ht[l]=Ht[f]=Ht[x]=Ht[A]=Ht[I]=Ht[P]=Ht[M]=Ht[m]=Ht[g]=Ht[v]=Ht[y]=Ht[b]=Ht[E]=Ht[S]=Ht[O]=Ht["[object Uint8ClampedArray]"]=Ht[C]=Ht[R]=!0,Ht[h]=Ht[d]=Ht[w]=!1;var Gt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zt=parseFloat,Wt=parseInt,Vt="object"==typeof t&&t&&t.Object===Object&&t,Yt="object"==typeof self&&self&&self.Object===Object&&self,qt=Vt||Yt||Function("return this")(),$t=e&&!e.nodeType&&e,Kt=$t&&"object"==typeof r&&r&&!r.nodeType&&r,Qt=Kt&&Kt.exports===$t,Xt=Qt&&Vt.process,Zt=function(){try{var t=Kt&&Kt.require&&Kt.require("util").types;return t||Xt&&Xt.binding&&Xt.binding("util")}catch(t){}}(),Jt=Zt&&Zt.isArrayBuffer,te=Zt&&Zt.isDate,ee=Zt&&Zt.isMap,ne=Zt&&Zt.isRegExp,re=Zt&&Zt.isSet,ie=Zt&&Zt.isTypedArray;function oe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ae(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function se(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function ue(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function le(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function fe(t,e){return!!(null==t?0:t.length)&&Se(t,e,0)>-1}function he(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function de(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function pe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function me(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function ge(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ve(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var ye=xe("length");function be(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ee(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Se(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ee(t,_e,n)}function we(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function _e(t){return t!=t}function Te(t,e){var n=null==t?0:t.length;return n?Pe(t,e)/n:NaN}function xe(t){return function(e){return null==e?void 0:e[t]}}function Ae(t){return function(e){return null==t?void 0:t[e]}}function Ie(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Pe(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Me(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Oe(t){return t?t.slice(0,$e(t)+1).replace($,""):t}function Ce(t){return function(e){return t(e)}}function Re(t,e){return de(e,(function(e){return t[e]}))}function De(t,e){return t.has(e)}function ke(t,e){for(var n=-1,r=t.length;++n<r&&Se(e,t[n],0)>-1;);return n}function Le(t,e){for(var n=t.length;n--&&Se(e,t[n],0)>-1;);return n}function Ne(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var je=Ae({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Fe=Ae({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ue(t){return"\\"+Gt[t]}function Be(t){return Nt.test(t)}function He(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Ge(t,e){return function(n){return t(e(n))}}function ze(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function We(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function Ve(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function Ye(t){return Be(t)?function(t){var e=kt.lastIndex=0;for(;kt.test(t);)++e;return e}(t):ye(t)}function qe(t){return Be(t)?function(t){return t.match(kt)||[]}(t):function(t){return t.split("")}(t)}function $e(t){for(var e=t.length;e--&&K.test(t.charAt(e)););return e}var Ke=Ae({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Qe=function t(e){var n,r=(e=null==e?qt:Qe.defaults(qt.Object(),e,Qe.pick(qt,Ft))).Array,i=e.Date,K=e.Error,ht=e.Function,dt=e.Math,pt=e.Object,mt=e.RegExp,gt=e.String,vt=e.TypeError,yt=r.prototype,bt=ht.prototype,Et=pt.prototype,St=e["__core-js_shared__"],wt=bt.toString,_t=Et.hasOwnProperty,Tt=0,xt=(n=/[^.]+$/.exec(St&&St.keys&&St.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",At=Et.toString,It=wt.call(pt),Pt=qt._,Mt=mt("^"+wt.call(_t).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ot=Qt?e.Buffer:void 0,Ct=e.Symbol,kt=e.Uint8Array,Nt=Ot?Ot.allocUnsafe:void 0,Gt=Ge(pt.getPrototypeOf,pt),Vt=pt.create,Yt=Et.propertyIsEnumerable,$t=yt.splice,Kt=Ct?Ct.isConcatSpreadable:void 0,Xt=Ct?Ct.iterator:void 0,Zt=Ct?Ct.toStringTag:void 0,ye=function(){try{var t=to(pt,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ae=e.clearTimeout!==qt.clearTimeout&&e.clearTimeout,Xe=i&&i.now!==qt.Date.now&&i.now,Ze=e.setTimeout!==qt.setTimeout&&e.setTimeout,Je=dt.ceil,tn=dt.floor,en=pt.getOwnPropertySymbols,nn=Ot?Ot.isBuffer:void 0,rn=e.isFinite,on=yt.join,an=Ge(pt.keys,pt),sn=dt.max,un=dt.min,cn=i.now,ln=e.parseInt,fn=dt.random,hn=yt.reverse,dn=to(e,"DataView"),pn=to(e,"Map"),mn=to(e,"Promise"),gn=to(e,"Set"),vn=to(e,"WeakMap"),yn=to(pt,"create"),bn=vn&&new vn,En={},Sn=Po(dn),wn=Po(pn),_n=Po(mn),Tn=Po(gn),xn=Po(vn),An=Ct?Ct.prototype:void 0,In=An?An.valueOf:void 0,Pn=An?An.toString:void 0;function Mn(t){if(Va(t)&&!ka(t)&&!(t instanceof Dn)){if(t instanceof Rn)return t;if(_t.call(t,"__wrapped__"))return Mo(t)}return new Rn(t)}var On=function(){function t(){}return function(e){if(!Wa(e))return{};if(Vt)return Vt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Cn(){}function Rn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Dn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function kn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ln(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Nn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function jn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Nn;++e<n;)this.add(t[e])}function Fn(t){var e=this.__data__=new Ln(t);this.size=e.size}function Un(t,e){var n=ka(t),r=!n&&Da(t),i=!n&&!r&&Fa(t),o=!n&&!r&&!i&&Ja(t),a=n||r||i||o,s=a?Me(t.length,gt):[],u=s.length;for(var c in t)!e&&!_t.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||so(c,u))||s.push(c);return s}function Bn(t){var e=t.length;return e?t[jr(0,e-1)]:void 0}function Hn(t,e){return xo(yi(t),Qn(e,0,t.length))}function Gn(t){return xo(yi(t))}function zn(t,e,n){(void 0!==n&&!Oa(t[e],n)||void 0===n&&!(e in t))&&$n(t,e,n)}function Wn(t,e,n){var r=t[e];_t.call(t,e)&&Oa(r,n)&&(void 0!==n||e in t)||$n(t,e,n)}function Vn(t,e){for(var n=t.length;n--;)if(Oa(t[n][0],e))return n;return-1}function Yn(t,e,n,r){return er(t,(function(t,i,o){e(r,t,n(t),o)})),r}function qn(t,e){return t&&bi(e,Ss(e),t)}function $n(t,e,n){"__proto__"==e&&ye?ye(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Kn(t,e){for(var n=-1,i=e.length,o=r(i),a=null==t;++n<i;)o[n]=a?void 0:gs(t,e[n]);return o}function Qn(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Xn(t,e,n,r,i,o){var a,s=1&e,c=2&e,h=4&e;if(n&&(a=i?n(t,r,i,o):n(t)),void 0!==a)return a;if(!Wa(t))return t;var w=ka(t);if(w){if(a=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&_t.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!s)return yi(t,a)}else{var D=ro(t),k=D==d||D==p;if(Fa(t))return hi(t,s);if(D==v||D==u||k&&!i){if(a=c||k?{}:oo(t),!s)return c?function(t,e){return bi(t,no(t),e)}(t,function(t,e){return t&&bi(e,ws(e),t)}(a,t)):function(t,e){return bi(t,eo(t),e)}(t,qn(a,t))}else{if(!Ht[D])return i?t:{};a=function(t,e,n){var r=t.constructor;switch(e){case _:return di(t);case l:case f:return new r(+t);case T:return function(t,e){var n=e?di(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case x:case A:case I:case P:case M:case O:case"[object Uint8ClampedArray]":case C:case R:return pi(t,n);case m:return new r;case g:case E:return new r(t);case y:return function(t){var e=new t.constructor(t.source,rt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case b:return new r;case S:return i=t,In?pt(In.call(i)):{}}var i}(t,D,s)}}o||(o=new Fn);var L=o.get(t);if(L)return L;o.set(t,a),Qa(t)?t.forEach((function(r){a.add(Xn(r,e,n,r,t,o))})):Ya(t)&&t.forEach((function(r,i){a.set(i,Xn(r,e,n,i,t,o))}));var N=w?void 0:(h?c?qi:Yi:c?ws:Ss)(t);return se(N||t,(function(r,i){N&&(r=t[i=r]),Wn(a,i,Xn(r,e,n,i,t,o))})),a}function Zn(t,e,n){var r=n.length;if(null==t)return!r;for(t=pt(t);r--;){var i=n[r],o=e[i],a=t[i];if(void 0===a&&!(i in t)||!o(a))return!1}return!0}function Jn(t,e,n){if("function"!=typeof t)throw new vt(o);return So((function(){t.apply(void 0,n)}),e)}function tr(t,e,n,r){var i=-1,o=fe,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=de(e,Ce(n))),r?(o=he,a=!1):e.length>=200&&(o=De,a=!1,e=new jn(e));t:for(;++i<s;){var l=t[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f==f){for(var h=c;h--;)if(e[h]===f)continue t;u.push(l)}else o(e,f,r)||u.push(l)}return u}Mn.templateSettings={escape:B,evaluate:H,interpolate:G,variable:"",imports:{_:Mn}},Mn.prototype=Cn.prototype,Mn.prototype.constructor=Mn,Rn.prototype=On(Cn.prototype),Rn.prototype.constructor=Rn,Dn.prototype=On(Cn.prototype),Dn.prototype.constructor=Dn,kn.prototype.clear=function(){this.__data__=yn?yn(null):{},this.size=0},kn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},kn.prototype.get=function(t){var e=this.__data__;if(yn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return _t.call(e,t)?e[t]:void 0},kn.prototype.has=function(t){var e=this.__data__;return yn?void 0!==e[t]:_t.call(e,t)},kn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=yn&&void 0===e?"__lodash_hash_undefined__":e,this},Ln.prototype.clear=function(){this.__data__=[],this.size=0},Ln.prototype.delete=function(t){var e=this.__data__,n=Vn(e,t);return!(n<0)&&(n==e.length-1?e.pop():$t.call(e,n,1),--this.size,!0)},Ln.prototype.get=function(t){var e=this.__data__,n=Vn(e,t);return n<0?void 0:e[n][1]},Ln.prototype.has=function(t){return Vn(this.__data__,t)>-1},Ln.prototype.set=function(t,e){var n=this.__data__,r=Vn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Nn.prototype.clear=function(){this.size=0,this.__data__={hash:new kn,map:new(pn||Ln),string:new kn}},Nn.prototype.delete=function(t){var e=Zi(this,t).delete(t);return this.size-=e?1:0,e},Nn.prototype.get=function(t){return Zi(this,t).get(t)},Nn.prototype.has=function(t){return Zi(this,t).has(t)},Nn.prototype.set=function(t,e){var n=Zi(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},jn.prototype.add=jn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},jn.prototype.has=function(t){return this.__data__.has(t)},Fn.prototype.clear=function(){this.__data__=new Ln,this.size=0},Fn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Fn.prototype.get=function(t){return this.__data__.get(t)},Fn.prototype.has=function(t){return this.__data__.has(t)},Fn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Ln){var r=n.__data__;if(!pn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Nn(r)}return n.set(t,e),this.size=n.size,this};var er=wi(cr),nr=wi(lr,!0);function rr(t,e){var n=!0;return er(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function ir(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!Za(a):n(a,s)))var s=a,u=o}return u}function or(t,e){var n=[];return er(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function ar(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=ao),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?ar(s,e-1,n,r,i):pe(i,s):r||(i[i.length]=s)}return i}var sr=_i(),ur=_i(!0);function cr(t,e){return t&&sr(t,e,Ss)}function lr(t,e){return t&&ur(t,e,Ss)}function fr(t,e){return le(e,(function(e){return Ha(t[e])}))}function hr(t,e){for(var n=0,r=(e=ui(e,t)).length;null!=t&&n<r;)t=t[Io(e[n++])];return n&&n==r?t:void 0}function dr(t,e,n){var r=e(t);return ka(t)?r:pe(r,n(t))}function pr(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Zt&&Zt in pt(t)?function(t){var e=_t.call(t,Zt),n=t[Zt];try{t[Zt]=void 0;var r=!0}catch(t){}var i=At.call(t);r&&(e?t[Zt]=n:delete t[Zt]);return i}(t):function(t){return At.call(t)}(t)}function mr(t,e){return t>e}function gr(t,e){return null!=t&&_t.call(t,e)}function vr(t,e){return null!=t&&e in pt(t)}function yr(t,e,n){for(var i=n?he:fe,o=t[0].length,a=t.length,s=a,u=r(a),c=1/0,l=[];s--;){var f=t[s];s&&e&&(f=de(f,Ce(e))),c=un(f.length,c),u[s]=!n&&(e||o>=120&&f.length>=120)?new jn(s&&f):void 0}f=t[0];var h=-1,d=u[0];t:for(;++h<o&&l.length<c;){var p=f[h],m=e?e(p):p;if(p=n||0!==p?p:0,!(d?De(d,m):i(l,m,n))){for(s=a;--s;){var g=u[s];if(!(g?De(g,m):i(t[s],m,n)))continue t}d&&d.push(m),l.push(p)}}return l}function br(t,e,n){var r=null==(t=vo(t,e=ui(e,t)))?t:t[Io(Bo(e))];return null==r?void 0:oe(r,t,n)}function Er(t){return Va(t)&&pr(t)==u}function Sr(t,e,n,r,i){return t===e||(null==t||null==e||!Va(t)&&!Va(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var a=ka(t),s=ka(e),d=a?c:ro(t),p=s?c:ro(e),w=(d=d==u?v:d)==v,x=(p=p==u?v:p)==v,A=d==p;if(A&&Fa(t)){if(!Fa(e))return!1;a=!0,w=!1}if(A&&!w)return o||(o=new Fn),a||Ja(t)?Wi(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case T:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!o(new kt(t),new kt(e)));case l:case f:case g:return Oa(+t,+e);case h:return t.name==e.name&&t.message==e.message;case y:case E:return t==e+"";case m:var s=He;case b:var u=1&r;if(s||(s=We),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var d=Wi(s(t),s(e),r,i,o,a);return a.delete(t),d;case S:if(In)return In.call(t)==In.call(e)}return!1}(t,e,d,n,r,i,o);if(!(1&n)){var I=w&&_t.call(t,"__wrapped__"),P=x&&_t.call(e,"__wrapped__");if(I||P){var M=I?t.value():t,O=P?e.value():e;return o||(o=new Fn),i(M,O,n,r,o)}}if(!A)return!1;return o||(o=new Fn),function(t,e,n,r,i,o){var a=1&n,s=Yi(t),u=s.length,c=Yi(e).length;if(u!=c&&!a)return!1;var l=u;for(;l--;){var f=s[l];if(!(a?f in e:_t.call(e,f)))return!1}var h=o.get(t),d=o.get(e);if(h&&d)return h==e&&d==t;var p=!0;o.set(t,e),o.set(e,t);var m=a;for(;++l<u;){f=s[l];var g=t[f],v=e[f];if(r)var y=a?r(v,g,f,e,t,o):r(g,v,f,t,e,o);if(!(void 0===y?g===v||i(g,v,n,r,o):y)){p=!1;break}m||(m="constructor"==f)}if(p&&!m){var b=t.constructor,E=e.constructor;b==E||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof E&&E instanceof E||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,i,o)}(t,e,n,r,Sr,i))}function wr(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=pt(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],c=t[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var f=new Fn;if(r)var h=r(c,l,u,t,e,f);if(!(void 0===h?Sr(l,c,3,r,f):h))return!1}}return!0}function _r(t){return!(!Wa(t)||(e=t,xt&&xt in e))&&(Ha(t)?Mt:at).test(Po(t));var e}function Tr(t){return"function"==typeof t?t:null==t?qs:"object"==typeof t?ka(t)?Or(t[0],t[1]):Mr(t):nu(t)}function xr(t){if(!ho(t))return an(t);var e=[];for(var n in pt(t))_t.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ar(t){if(!Wa(t))return function(t){var e=[];if(null!=t)for(var n in pt(t))e.push(n);return e}(t);var e=ho(t),n=[];for(var r in t)("constructor"!=r||!e&&_t.call(t,r))&&n.push(r);return n}function Ir(t,e){return t<e}function Pr(t,e){var n=-1,i=Na(t)?r(t.length):[];return er(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Mr(t){var e=Ji(t);return 1==e.length&&e[0][2]?mo(e[0][0],e[0][1]):function(n){return n===t||wr(n,t,e)}}function Or(t,e){return co(t)&&po(e)?mo(Io(t),e):function(n){var r=gs(n,t);return void 0===r&&r===e?vs(n,t):Sr(e,r,3)}}function Cr(t,e,n,r,i){t!==e&&sr(e,(function(o,a){if(i||(i=new Fn),Wa(o))!function(t,e,n,r,i,o,a){var s=bo(t,n),u=bo(e,n),c=a.get(u);if(c)return void zn(t,n,c);var l=o?o(s,u,n+"",t,e,a):void 0,f=void 0===l;if(f){var h=ka(u),d=!h&&Fa(u),p=!h&&!d&&Ja(u);l=u,h||d||p?ka(s)?l=s:ja(s)?l=yi(s):d?(f=!1,l=hi(u,!0)):p?(f=!1,l=pi(u,!0)):l=[]:$a(u)||Da(u)?(l=s,Da(s)?l=ss(s):Wa(s)&&!Ha(s)||(l=oo(u))):f=!1}f&&(a.set(u,l),i(l,u,r,o,a),a.delete(u));zn(t,n,l)}(t,e,a,n,Cr,r,i);else{var s=r?r(bo(t,a),o,a+"",t,e,i):void 0;void 0===s&&(s=o),zn(t,a,s)}}),ws)}function Rr(t,e){var n=t.length;if(n)return so(e+=e<0?n:0,n)?t[e]:void 0}function Dr(t,e,n){e=e.length?de(e,(function(t){return ka(t)?function(e){return hr(e,1===t.length?t[0]:t)}:t})):[qs];var r=-1;return e=de(e,Ce(Xi())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Pr(t,(function(t,n,i){return{criteria:de(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;for(;++r<a;){var u=mi(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)}))}function kr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=hr(t,a);n(s,a)&&Gr(o,ui(a,t),s)}return o}function Lr(t,e,n,r){var i=r?we:Se,o=-1,a=e.length,s=t;for(t===e&&(e=yi(e)),n&&(s=de(t,Ce(n)));++o<a;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&$t.call(s,u,1),$t.call(t,u,1);return t}function Nr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;so(i)?$t.call(t,i,1):ti(t,i)}}return t}function jr(t,e){return t+tn(fn()*(e-t+1))}function Fr(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=tn(e/2))&&(t+=t)}while(e);return n}function Ur(t,e){return wo(go(t,e,qs),t+"")}function Br(t){return Bn(Os(t))}function Hr(t,e){var n=Os(t);return xo(n,Qn(e,0,n.length))}function Gr(t,e,n,r){if(!Wa(t))return t;for(var i=-1,o=(e=ui(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var u=Io(e[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=a){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=Wa(l)?l:so(e[i+1])?[]:{})}Wn(s,u,c),s=s[u]}return t}var zr=bn?function(t,e){return bn.set(t,e),t}:qs,Wr=ye?function(t,e){return ye(t,"toString",{configurable:!0,enumerable:!1,value:Ws(e),writable:!0})}:qs;function Vr(t){return xo(Os(t))}function Yr(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function qr(t,e){var n;return er(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function $r(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!Za(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Kr(t,e,qs,n)}function Kr(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=n(e))!=e,s=null===e,u=Za(e),c=void 0===e;i<o;){var l=tn((i+o)/2),f=n(t[l]),h=void 0!==f,d=null===f,p=f==f,m=Za(f);if(a)var g=r||p;else g=c?p&&(r||h):s?p&&h&&(r||!d):u?p&&h&&!d&&(r||!m):!d&&!m&&(r?f<=e:f<e);g?i=l+1:o=l}return un(o,4294967294)}function Qr(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Oa(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Xr(t){return"number"==typeof t?t:Za(t)?NaN:+t}function Zr(t){if("string"==typeof t)return t;if(ka(t))return de(t,Zr)+"";if(Za(t))return Pn?Pn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Jr(t,e,n){var r=-1,i=fe,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=he;else if(o>=200){var c=e?null:Fi(t);if(c)return We(c);a=!1,i=De,u=new jn}else u=e?[]:s;t:for(;++r<o;){var l=t[r],f=e?e(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue t;e&&u.push(f),s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s}function ti(t,e){return null==(t=vo(t,e=ui(e,t)))||delete t[Io(Bo(e))]}function ei(t,e,n,r){return Gr(t,e,n(hr(t,e)),r)}function ni(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Yr(t,r?0:o,r?o+1:i):Yr(t,r?o+1:0,r?i:o)}function ri(t,e){var n=t;return n instanceof Dn&&(n=n.value()),me(e,(function(t,e){return e.func.apply(e.thisArg,pe([t],e.args))}),n)}function ii(t,e,n){var i=t.length;if(i<2)return i?Jr(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=t[o],u=-1;++u<i;)u!=o&&(a[o]=tr(a[o]||s,t[u],e,n));return Jr(ar(a,1),e,n)}function oi(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a}function ai(t){return ja(t)?t:[]}function si(t){return"function"==typeof t?t:qs}function ui(t,e){return ka(t)?t:co(t,e)?[t]:Ao(us(t))}var ci=Ur;function li(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:Yr(t,e,n)}var fi=Ae||function(t){return qt.clearTimeout(t)};function hi(t,e){if(e)return t.slice();var n=t.length,r=Nt?Nt(n):new t.constructor(n);return t.copy(r),r}function di(t){var e=new t.constructor(t.byteLength);return new kt(e).set(new kt(t)),e}function pi(t,e){var n=e?di(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function mi(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Za(t),a=void 0!==e,s=null===e,u=e==e,c=Za(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function gi(t,e,n,i){for(var o=-1,a=t.length,s=n.length,u=-1,c=e.length,l=sn(a-s,0),f=r(c+l),h=!i;++u<c;)f[u]=e[u];for(;++o<s;)(h||o<a)&&(f[n[o]]=t[o]);for(;l--;)f[u++]=t[o++];return f}function vi(t,e,n,i){for(var o=-1,a=t.length,s=-1,u=n.length,c=-1,l=e.length,f=sn(a-u,0),h=r(f+l),d=!i;++o<f;)h[o]=t[o];for(var p=o;++c<l;)h[p+c]=e[c];for(;++s<u;)(d||o<a)&&(h[p+n[s]]=t[o++]);return h}function yi(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function bi(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?$n(n,s,u):Wn(n,s,u)}return n}function Ei(t,e){return function(n,r){var i=ka(n)?ae:Yn,o=e?e():{};return i(n,t,Xi(r,2),o)}}function Si(t){return Ur((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&uo(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=pt(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e}))}function wi(t,e){return function(n,r){if(null==n)return n;if(!Na(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=pt(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function _i(t){return function(e,n,r){for(var i=-1,o=pt(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Ti(t){return function(e){var n=Be(e=us(e))?qe(e):void 0,r=n?n[0]:e.charAt(0),i=n?li(n,1).join(""):e.slice(1);return r[t]()+i}}function xi(t){return function(e){return me(Hs(Ds(e).replace(Rt,"")),t,"")}}function Ai(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=On(t.prototype),r=t.apply(n,e);return Wa(r)?r:n}}function Ii(t){return function(e,n,r){var i=pt(e);if(!Na(e)){var o=Xi(n,3);e=Ss(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}function Pi(t){return Vi((function(e){var n=e.length,r=n,i=Rn.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new vt(o);if(i&&!s&&"wrapper"==Ki(a))var s=new Rn([],!0)}for(r=s?r:n;++r<n;){var u=Ki(a=e[r]),c="wrapper"==u?$i(a):void 0;s=c&&lo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[Ki(c[0])].apply(s,c[3]):1==a.length&&lo(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&ka(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Mi(t,e,n,i,o,a,s,u,c,l){var f=128&e,h=1&e,d=2&e,p=24&e,m=512&e,g=d?void 0:Ai(t);return function v(){for(var y=arguments.length,b=r(y),E=y;E--;)b[E]=arguments[E];if(p)var S=Qi(v),w=Ne(b,S);if(i&&(b=gi(b,i,o,p)),a&&(b=vi(b,a,s,p)),y-=w,p&&y<l){var _=ze(b,S);return Ni(t,e,Mi,v.placeholder,n,b,_,u,c,l-y)}var T=h?n:this,x=d?T[t]:t;return y=b.length,u?b=yo(b,u):m&&y>1&&b.reverse(),f&&c<y&&(b.length=c),this&&this!==qt&&this instanceof v&&(x=g||Ai(x)),x.apply(T,b)}}function Oi(t,e){return function(n,r){return function(t,e,n,r){return cr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Ci(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Zr(n),r=Zr(r)):(n=Xr(n),r=Xr(r)),i=t(n,r)}return i}}function Ri(t){return Vi((function(e){return e=de(e,Ce(Xi())),Ur((function(n){var r=this;return t(e,(function(t){return oe(t,r,n)}))}))}))}function Di(t,e){var n=(e=void 0===e?" ":Zr(e)).length;if(n<2)return n?Fr(e,t):e;var r=Fr(e,Je(t/Ye(e)));return Be(e)?li(qe(r),0,t).join(""):r.slice(0,t)}function ki(t){return function(e,n,i){return i&&"number"!=typeof i&&uo(e,n,i)&&(n=i=void 0),e=rs(e),void 0===n?(n=e,e=0):n=rs(n),function(t,e,n,i){for(var o=-1,a=sn(Je((e-t)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=t,t+=n;return s}(e,n,i=void 0===i?e<n?1:-1:rs(i),t)}}function Li(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=as(e),n=as(n)),t(e,n)}}function Ni(t,e,n,r,i,o,a,s,u,c){var l=8&e;e|=l?32:64,4&(e&=~(l?64:32))||(e&=-4);var f=[t,e,i,l?o:void 0,l?a:void 0,l?void 0:o,l?void 0:a,s,u,c],h=n.apply(void 0,f);return lo(t)&&Eo(h,f),h.placeholder=r,_o(h,t,e)}function ji(t){var e=dt[t];return function(t,n){if(t=as(t),(n=null==n?0:un(is(n),292))&&rn(t)){var r=(us(t)+"e").split("e");return+((r=(us(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Fi=gn&&1/We(new gn([,-0]))[1]==1/0?function(t){return new gn(t)}:Zs;function Ui(t){return function(e){var n=ro(e);return n==m?He(e):n==b?Ve(e):function(t,e){return de(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Bi(t,e,n,i,s,u,c,l){var f=2&e;if(!f&&"function"!=typeof t)throw new vt(o);var h=i?i.length:0;if(h||(e&=-97,i=s=void 0),c=void 0===c?c:sn(is(c),0),l=void 0===l?l:is(l),h-=s?s.length:0,64&e){var d=i,p=s;i=s=void 0}var m=f?void 0:$i(t),g=[t,e,n,i,s,d,p,u,c,l];if(m&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?gi(c,u,e[4]):u,t[4]=c?ze(t[3],a):e[4]}(u=e[5])&&(c=t[5],t[5]=c?vi(c,u,e[6]):u,t[6]=c?ze(t[5],a):e[6]);(u=e[7])&&(t[7]=u);128&r&&(t[8]=null==t[8]?e[8]:un(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(g,m),t=g[0],e=g[1],n=g[2],i=g[3],s=g[4],!(l=g[9]=void 0===g[9]?f?0:t.length:sn(g[9]-h,0))&&24&e&&(e&=-25),e&&1!=e)v=8==e||16==e?function(t,e,n){var i=Ai(t);return function o(){for(var a=arguments.length,s=r(a),u=a,c=Qi(o);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:ze(s,c);if((a-=l.length)<n)return Ni(t,e,Mi,o.placeholder,void 0,s,l,void 0,void 0,n-a);var f=this&&this!==qt&&this instanceof o?i:t;return oe(f,this,s)}}(t,e,l):32!=e&&33!=e||s.length?Mi.apply(void 0,g):function(t,e,n,i){var o=1&e,a=Ai(t);return function e(){for(var s=-1,u=arguments.length,c=-1,l=i.length,f=r(l+u),h=this&&this!==qt&&this instanceof e?a:t;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++s];return oe(h,o?n:this,f)}}(t,e,n,i);else var v=function(t,e,n){var r=1&e,i=Ai(t);return function e(){var o=this&&this!==qt&&this instanceof e?i:t;return o.apply(r?n:this,arguments)}}(t,e,n);return _o((m?zr:Eo)(v,g),t,e)}function Hi(t,e,n,r){return void 0===t||Oa(t,Et[n])&&!_t.call(r,n)?e:t}function Gi(t,e,n,r,i,o){return Wa(t)&&Wa(e)&&(o.set(e,t),Cr(t,e,void 0,Gi,o),o.delete(e)),t}function zi(t){return $a(t)?void 0:t}function Wi(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t),l=o.get(e);if(c&&l)return c==e&&l==t;var f=-1,h=!0,d=2&n?new jn:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var p=t[f],m=e[f];if(r)var g=a?r(m,p,f,e,t,o):r(p,m,f,t,e,o);if(void 0!==g){if(g)continue;h=!1;break}if(d){if(!ve(e,(function(t,e){if(!De(d,e)&&(p===t||i(p,t,n,r,o)))return d.push(e)}))){h=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function Vi(t){return wo(go(t,void 0,Lo),t+"")}function Yi(t){return dr(t,Ss,eo)}function qi(t){return dr(t,ws,no)}var $i=bn?function(t){return bn.get(t)}:Zs;function Ki(t){for(var e=t.name+"",n=En[e],r=_t.call(En,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Qi(t){return(_t.call(Mn,"placeholder")?Mn:t).placeholder}function Xi(){var t=Mn.iteratee||$s;return t=t===$s?Tr:t,arguments.length?t(arguments[0],arguments[1]):t}function Zi(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Ji(t){for(var e=Ss(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,po(i)]}return e}function to(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return _r(n)?n:void 0}var eo=en?function(t){return null==t?[]:(t=pt(t),le(en(t),(function(e){return Yt.call(t,e)})))}:ou,no=en?function(t){for(var e=[];t;)pe(e,eo(t)),t=Gt(t);return e}:ou,ro=pr;function io(t,e,n){for(var r=-1,i=(e=ui(e,t)).length,o=!1;++r<i;){var a=Io(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&za(i)&&so(a,i)&&(ka(t)||Da(t))}function oo(t){return"function"!=typeof t.constructor||ho(t)?{}:On(Gt(t))}function ao(t){return ka(t)||Da(t)||!!(Kt&&t&&t[Kt])}function so(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ut.test(t))&&t>-1&&t%1==0&&t<e}function uo(t,e,n){if(!Wa(n))return!1;var r=typeof e;return!!("number"==r?Na(n)&&so(e,n.length):"string"==r&&e in n)&&Oa(n[e],t)}function co(t,e){if(ka(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Za(t))||(W.test(t)||!z.test(t)||null!=e&&t in pt(e))}function lo(t){var e=Ki(t),n=Mn[e];if("function"!=typeof n||!(e in Dn.prototype))return!1;if(t===n)return!0;var r=$i(n);return!!r&&t===r[0]}(dn&&ro(new dn(new ArrayBuffer(1)))!=T||pn&&ro(new pn)!=m||mn&&"[object Promise]"!=ro(mn.resolve())||gn&&ro(new gn)!=b||vn&&ro(new vn)!=w)&&(ro=function(t){var e=pr(t),n=e==v?t.constructor:void 0,r=n?Po(n):"";if(r)switch(r){case Sn:return T;case wn:return m;case _n:return"[object Promise]";case Tn:return b;case xn:return w}return e});var fo=St?Ha:au;function ho(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Et)}function po(t){return t==t&&!Wa(t)}function mo(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in pt(n)))}}function go(t,e,n){return e=sn(void 0===e?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=sn(i.length-e,0),s=r(a);++o<a;)s[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(s),oe(t,this,u)}}function vo(t,e){return e.length<2?t:hr(t,Yr(e,0,-1))}function yo(t,e){for(var n=t.length,r=un(e.length,n),i=yi(t);r--;){var o=e[r];t[r]=so(o,n)?i[o]:void 0}return t}function bo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Eo=To(zr),So=Ze||function(t,e){return qt.setTimeout(t,e)},wo=To(Wr);function _o(t,e,n){var r=e+"";return wo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Q,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return se(s,(function(n){var r="_."+n[0];e&n[1]&&!fe(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(X);return e?e[1].split(Z):[]}(r),n)))}function To(t){var e=0,n=0;return function(){var r=cn(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function xo(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var o=jr(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}var Ao=function(t){var e=Ta(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(V,(function(t,n,r,i){e.push(r?i.replace(et,"$1"):n||t)})),e}));function Io(t){if("string"==typeof t||Za(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Po(t){if(null!=t){try{return wt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Mo(t){if(t instanceof Dn)return t.clone();var e=new Rn(t.__wrapped__,t.__chain__);return e.__actions__=yi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Oo=Ur((function(t,e){return ja(t)?tr(t,ar(e,1,ja,!0)):[]})),Co=Ur((function(t,e){var n=Bo(e);return ja(n)&&(n=void 0),ja(t)?tr(t,ar(e,1,ja,!0),Xi(n,2)):[]})),Ro=Ur((function(t,e){var n=Bo(e);return ja(n)&&(n=void 0),ja(t)?tr(t,ar(e,1,ja,!0),void 0,n):[]}));function Do(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:is(n);return i<0&&(i=sn(r+i,0)),Ee(t,Xi(e,3),i)}function ko(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=is(n),i=n<0?sn(r+i,0):un(i,r-1)),Ee(t,Xi(e,3),i,!0)}function Lo(t){return(null==t?0:t.length)?ar(t,1):[]}function No(t){return t&&t.length?t[0]:void 0}var jo=Ur((function(t){var e=de(t,ai);return e.length&&e[0]===t[0]?yr(e):[]})),Fo=Ur((function(t){var e=Bo(t),n=de(t,ai);return e===Bo(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?yr(n,Xi(e,2)):[]})),Uo=Ur((function(t){var e=Bo(t),n=de(t,ai);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?yr(n,void 0,e):[]}));function Bo(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Ho=Ur(Go);function Go(t,e){return t&&t.length&&e&&e.length?Lr(t,e):t}var zo=Vi((function(t,e){var n=null==t?0:t.length,r=Kn(t,e);return Nr(t,de(e,(function(t){return so(t,n)?+t:t})).sort(mi)),r}));function Wo(t){return null==t?t:hn.call(t)}var Vo=Ur((function(t){return Jr(ar(t,1,ja,!0))})),Yo=Ur((function(t){var e=Bo(t);return ja(e)&&(e=void 0),Jr(ar(t,1,ja,!0),Xi(e,2))})),qo=Ur((function(t){var e=Bo(t);return e="function"==typeof e?e:void 0,Jr(ar(t,1,ja,!0),void 0,e)}));function $o(t){if(!t||!t.length)return[];var e=0;return t=le(t,(function(t){if(ja(t))return e=sn(t.length,e),!0})),Me(e,(function(e){return de(t,xe(e))}))}function Ko(t,e){if(!t||!t.length)return[];var n=$o(t);return null==e?n:de(n,(function(t){return oe(e,void 0,t)}))}var Qo=Ur((function(t,e){return ja(t)?tr(t,e):[]})),Xo=Ur((function(t){return ii(le(t,ja))})),Zo=Ur((function(t){var e=Bo(t);return ja(e)&&(e=void 0),ii(le(t,ja),Xi(e,2))})),Jo=Ur((function(t){var e=Bo(t);return e="function"==typeof e?e:void 0,ii(le(t,ja),void 0,e)})),ta=Ur($o);var ea=Ur((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Ko(t,n)}));function na(t){var e=Mn(t);return e.__chain__=!0,e}function ra(t,e){return e(t)}var ia=Vi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Kn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Dn&&so(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ra,args:[i],thisArg:void 0}),new Rn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(i)}));var oa=Ei((function(t,e,n){_t.call(t,n)?++t[n]:$n(t,n,1)}));var aa=Ii(Do),sa=Ii(ko);function ua(t,e){return(ka(t)?se:er)(t,Xi(e,3))}function ca(t,e){return(ka(t)?ue:nr)(t,Xi(e,3))}var la=Ei((function(t,e,n){_t.call(t,n)?t[n].push(e):$n(t,n,[e])}));var fa=Ur((function(t,e,n){var i=-1,o="function"==typeof e,a=Na(t)?r(t.length):[];return er(t,(function(t){a[++i]=o?oe(e,t,n):br(t,e,n)})),a})),ha=Ei((function(t,e,n){$n(t,n,e)}));function da(t,e){return(ka(t)?de:Pr)(t,Xi(e,3))}var pa=Ei((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var ma=Ur((function(t,e){if(null==t)return[];var n=e.length;return n>1&&uo(t,e[0],e[1])?e=[]:n>2&&uo(e[0],e[1],e[2])&&(e=[e[0]]),Dr(t,ar(e,1),[])})),ga=Xe||function(){return qt.Date.now()};function va(t,e,n){return e=n?void 0:e,Bi(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function ya(t,e){var n;if("function"!=typeof e)throw new vt(o);return t=is(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var ba=Ur((function(t,e,n){var r=1;if(n.length){var i=ze(n,Qi(ba));r|=32}return Bi(t,r,e,n,i)})),Ea=Ur((function(t,e,n){var r=3;if(n.length){var i=ze(n,Qi(Ea));r|=32}return Bi(e,r,t,n,i)}));function Sa(t,e,n){var r,i,a,s,u,c,l=0,f=!1,h=!1,d=!0;if("function"!=typeof t)throw new vt(o);function p(e){var n=r,o=i;return r=i=void 0,l=e,s=t.apply(o,n)}function m(t){return l=t,u=So(v,e),f?p(t):s}function g(t){var n=t-c;return void 0===c||n>=e||n<0||h&&t-l>=a}function v(){var t=ga();if(g(t))return y(t);u=So(v,function(t){var n=e-(t-c);return h?un(n,a-(t-l)):n}(t))}function y(t){return u=void 0,d&&r?p(t):(r=i=void 0,s)}function b(){var t=ga(),n=g(t);if(r=arguments,i=this,c=t,n){if(void 0===u)return m(c);if(h)return fi(u),u=So(v,e),p(c)}return void 0===u&&(u=So(v,e)),s}return e=as(e)||0,Wa(n)&&(f=!!n.leading,a=(h="maxWait"in n)?sn(as(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),b.cancel=function(){void 0!==u&&fi(u),l=0,r=c=i=u=void 0},b.flush=function(){return void 0===u?s:y(ga())},b}var wa=Ur((function(t,e){return Jn(t,1,e)})),_a=Ur((function(t,e,n){return Jn(t,as(e)||0,n)}));function Ta(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new vt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ta.Cache||Nn),n}function xa(t){if("function"!=typeof t)throw new vt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ta.Cache=Nn;var Aa=ci((function(t,e){var n=(e=1==e.length&&ka(e[0])?de(e[0],Ce(Xi())):de(ar(e,1),Ce(Xi()))).length;return Ur((function(r){for(var i=-1,o=un(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return oe(t,this,r)}))})),Ia=Ur((function(t,e){return Bi(t,32,void 0,e,ze(e,Qi(Ia)))})),Pa=Ur((function(t,e){return Bi(t,64,void 0,e,ze(e,Qi(Pa)))})),Ma=Vi((function(t,e){return Bi(t,256,void 0,void 0,void 0,e)}));function Oa(t,e){return t===e||t!=t&&e!=e}var Ca=Li(mr),Ra=Li((function(t,e){return t>=e})),Da=Er(function(){return arguments}())?Er:function(t){return Va(t)&&_t.call(t,"callee")&&!Yt.call(t,"callee")},ka=r.isArray,La=Jt?Ce(Jt):function(t){return Va(t)&&pr(t)==_};function Na(t){return null!=t&&za(t.length)&&!Ha(t)}function ja(t){return Va(t)&&Na(t)}var Fa=nn||au,Ua=te?Ce(te):function(t){return Va(t)&&pr(t)==f};function Ba(t){if(!Va(t))return!1;var e=pr(t);return e==h||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!$a(t)}function Ha(t){if(!Wa(t))return!1;var e=pr(t);return e==d||e==p||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ga(t){return"number"==typeof t&&t==is(t)}function za(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Wa(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Va(t){return null!=t&&"object"==typeof t}var Ya=ee?Ce(ee):function(t){return Va(t)&&ro(t)==m};function qa(t){return"number"==typeof t||Va(t)&&pr(t)==g}function $a(t){if(!Va(t)||pr(t)!=v)return!1;var e=Gt(t);if(null===e)return!0;var n=_t.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&wt.call(n)==It}var Ka=ne?Ce(ne):function(t){return Va(t)&&pr(t)==y};var Qa=re?Ce(re):function(t){return Va(t)&&ro(t)==b};function Xa(t){return"string"==typeof t||!ka(t)&&Va(t)&&pr(t)==E}function Za(t){return"symbol"==typeof t||Va(t)&&pr(t)==S}var Ja=ie?Ce(ie):function(t){return Va(t)&&za(t.length)&&!!Bt[pr(t)]};var ts=Li(Ir),es=Li((function(t,e){return t<=e}));function ns(t){if(!t)return[];if(Na(t))return Xa(t)?qe(t):yi(t);if(Xt&&t[Xt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Xt]());var e=ro(t);return(e==m?He:e==b?We:Os)(t)}function rs(t){return t?(t=as(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function is(t){var e=rs(t),n=e%1;return e==e?n?e-n:e:0}function os(t){return t?Qn(is(t),0,4294967295):0}function as(t){if("number"==typeof t)return t;if(Za(t))return NaN;if(Wa(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Wa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Oe(t);var n=ot.test(t);return n||st.test(t)?Wt(t.slice(2),n?2:8):it.test(t)?NaN:+t}function ss(t){return bi(t,ws(t))}function us(t){return null==t?"":Zr(t)}var cs=Si((function(t,e){if(ho(e)||Na(e))bi(e,Ss(e),t);else for(var n in e)_t.call(e,n)&&Wn(t,n,e[n])})),ls=Si((function(t,e){bi(e,ws(e),t)})),fs=Si((function(t,e,n,r){bi(e,ws(e),t,r)})),hs=Si((function(t,e,n,r){bi(e,Ss(e),t,r)})),ds=Vi(Kn);var ps=Ur((function(t,e){t=pt(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&uo(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=ws(o),s=-1,u=a.length;++s<u;){var c=a[s],l=t[c];(void 0===l||Oa(l,Et[c])&&!_t.call(t,c))&&(t[c]=o[c])}return t})),ms=Ur((function(t){return t.push(void 0,Gi),oe(Ts,void 0,t)}));function gs(t,e,n){var r=null==t?void 0:hr(t,e);return void 0===r?n:r}function vs(t,e){return null!=t&&io(t,e,vr)}var ys=Oi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=At.call(e)),t[e]=n}),Ws(qs)),bs=Oi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=At.call(e)),_t.call(t,e)?t[e].push(n):t[e]=[n]}),Xi),Es=Ur(br);function Ss(t){return Na(t)?Un(t):xr(t)}function ws(t){return Na(t)?Un(t,!0):Ar(t)}var _s=Si((function(t,e,n){Cr(t,e,n)})),Ts=Si((function(t,e,n,r){Cr(t,e,n,r)})),xs=Vi((function(t,e){var n={};if(null==t)return n;var r=!1;e=de(e,(function(e){return e=ui(e,t),r||(r=e.length>1),e})),bi(t,qi(t),n),r&&(n=Xn(n,7,zi));for(var i=e.length;i--;)ti(n,e[i]);return n}));var As=Vi((function(t,e){return null==t?{}:function(t,e){return kr(t,e,(function(e,n){return vs(t,n)}))}(t,e)}));function Is(t,e){if(null==t)return{};var n=de(qi(t),(function(t){return[t]}));return e=Xi(e),kr(t,n,(function(t,n){return e(t,n[0])}))}var Ps=Ui(Ss),Ms=Ui(ws);function Os(t){return null==t?[]:Re(t,Ss(t))}var Cs=xi((function(t,e,n){return e=e.toLowerCase(),t+(n?Rs(e):e)}));function Rs(t){return Bs(us(t).toLowerCase())}function Ds(t){return(t=us(t))&&t.replace(ct,je).replace(Dt,"")}var ks=xi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ls=xi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ns=Ti("toLowerCase");var js=xi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Fs=xi((function(t,e,n){return t+(n?" ":"")+Bs(e)}));var Us=xi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Bs=Ti("toUpperCase");function Hs(t,e,n){return t=us(t),void 0===(e=n?void 0:e)?function(t){return jt.test(t)}(t)?function(t){return t.match(Lt)||[]}(t):function(t){return t.match(J)||[]}(t):t.match(e)||[]}var Gs=Ur((function(t,e){try{return oe(t,void 0,e)}catch(t){return Ba(t)?t:new K(t)}})),zs=Vi((function(t,e){return se(e,(function(e){e=Io(e),$n(t,e,ba(t[e],t))})),t}));function Ws(t){return function(){return t}}var Vs=Pi(),Ys=Pi(!0);function qs(t){return t}function $s(t){return Tr("function"==typeof t?t:Xn(t,1))}var Ks=Ur((function(t,e){return function(n){return br(n,t,e)}})),Qs=Ur((function(t,e){return function(n){return br(t,n,e)}}));function Xs(t,e,n){var r=Ss(e),i=fr(e,r);null!=n||Wa(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=fr(e,Ss(e)));var o=!(Wa(n)&&"chain"in n&&!n.chain),a=Ha(t);return se(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=yi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,pe([this.value()],arguments))})})),t}function Zs(){}var Js=Ri(de),tu=Ri(ce),eu=Ri(ve);function nu(t){return co(t)?xe(Io(t)):function(t){return function(e){return hr(e,t)}}(t)}var ru=ki(),iu=ki(!0);function ou(){return[]}function au(){return!1}var su=Ci((function(t,e){return t+e}),0),uu=ji("ceil"),cu=Ci((function(t,e){return t/e}),1),lu=ji("floor");var fu,hu=Ci((function(t,e){return t*e}),1),du=ji("round"),pu=Ci((function(t,e){return t-e}),0);return Mn.after=function(t,e){if("function"!=typeof e)throw new vt(o);return t=is(t),function(){if(--t<1)return e.apply(this,arguments)}},Mn.ary=va,Mn.assign=cs,Mn.assignIn=ls,Mn.assignInWith=fs,Mn.assignWith=hs,Mn.at=ds,Mn.before=ya,Mn.bind=ba,Mn.bindAll=zs,Mn.bindKey=Ea,Mn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return ka(t)?t:[t]},Mn.chain=na,Mn.chunk=function(t,e,n){e=(n?uo(t,e,n):void 0===e)?1:sn(is(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,a=0,s=r(Je(i/e));o<i;)s[a++]=Yr(t,o,o+=e);return s},Mn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Mn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return pe(ka(n)?yi(n):[n],ar(e,1))},Mn.cond=function(t){var e=null==t?0:t.length,n=Xi();return t=e?de(t,(function(t){if("function"!=typeof t[1])throw new vt(o);return[n(t[0]),t[1]]})):[],Ur((function(n){for(var r=-1;++r<e;){var i=t[r];if(oe(i[0],this,n))return oe(i[1],this,n)}}))},Mn.conforms=function(t){return function(t){var e=Ss(t);return function(n){return Zn(n,t,e)}}(Xn(t,1))},Mn.constant=Ws,Mn.countBy=oa,Mn.create=function(t,e){var n=On(t);return null==e?n:qn(n,e)},Mn.curry=function t(e,n,r){var i=Bi(e,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},Mn.curryRight=function t(e,n,r){var i=Bi(e,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},Mn.debounce=Sa,Mn.defaults=ps,Mn.defaultsDeep=ms,Mn.defer=wa,Mn.delay=_a,Mn.difference=Oo,Mn.differenceBy=Co,Mn.differenceWith=Ro,Mn.drop=function(t,e,n){var r=null==t?0:t.length;return r?Yr(t,(e=n||void 0===e?1:is(e))<0?0:e,r):[]},Mn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Yr(t,0,(e=r-(e=n||void 0===e?1:is(e)))<0?0:e):[]},Mn.dropRightWhile=function(t,e){return t&&t.length?ni(t,Xi(e,3),!0,!0):[]},Mn.dropWhile=function(t,e){return t&&t.length?ni(t,Xi(e,3),!0):[]},Mn.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&uo(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=is(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:is(r))<0&&(r+=i),r=n>r?0:os(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Mn.filter=function(t,e){return(ka(t)?le:or)(t,Xi(e,3))},Mn.flatMap=function(t,e){return ar(da(t,e),1)},Mn.flatMapDeep=function(t,e){return ar(da(t,e),1/0)},Mn.flatMapDepth=function(t,e,n){return n=void 0===n?1:is(n),ar(da(t,e),n)},Mn.flatten=Lo,Mn.flattenDeep=function(t){return(null==t?0:t.length)?ar(t,1/0):[]},Mn.flattenDepth=function(t,e){return(null==t?0:t.length)?ar(t,e=void 0===e?1:is(e)):[]},Mn.flip=function(t){return Bi(t,512)},Mn.flow=Vs,Mn.flowRight=Ys,Mn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Mn.functions=function(t){return null==t?[]:fr(t,Ss(t))},Mn.functionsIn=function(t){return null==t?[]:fr(t,ws(t))},Mn.groupBy=la,Mn.initial=function(t){return(null==t?0:t.length)?Yr(t,0,-1):[]},Mn.intersection=jo,Mn.intersectionBy=Fo,Mn.intersectionWith=Uo,Mn.invert=ys,Mn.invertBy=bs,Mn.invokeMap=fa,Mn.iteratee=$s,Mn.keyBy=ha,Mn.keys=Ss,Mn.keysIn=ws,Mn.map=da,Mn.mapKeys=function(t,e){var n={};return e=Xi(e,3),cr(t,(function(t,r,i){$n(n,e(t,r,i),t)})),n},Mn.mapValues=function(t,e){var n={};return e=Xi(e,3),cr(t,(function(t,r,i){$n(n,r,e(t,r,i))})),n},Mn.matches=function(t){return Mr(Xn(t,1))},Mn.matchesProperty=function(t,e){return Or(t,Xn(e,1))},Mn.memoize=Ta,Mn.merge=_s,Mn.mergeWith=Ts,Mn.method=Ks,Mn.methodOf=Qs,Mn.mixin=Xs,Mn.negate=xa,Mn.nthArg=function(t){return t=is(t),Ur((function(e){return Rr(e,t)}))},Mn.omit=xs,Mn.omitBy=function(t,e){return Is(t,xa(Xi(e)))},Mn.once=function(t){return ya(2,t)},Mn.orderBy=function(t,e,n,r){return null==t?[]:(ka(e)||(e=null==e?[]:[e]),ka(n=r?void 0:n)||(n=null==n?[]:[n]),Dr(t,e,n))},Mn.over=Js,Mn.overArgs=Aa,Mn.overEvery=tu,Mn.overSome=eu,Mn.partial=Ia,Mn.partialRight=Pa,Mn.partition=pa,Mn.pick=As,Mn.pickBy=Is,Mn.property=nu,Mn.propertyOf=function(t){return function(e){return null==t?void 0:hr(t,e)}},Mn.pull=Ho,Mn.pullAll=Go,Mn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Lr(t,e,Xi(n,2)):t},Mn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Lr(t,e,void 0,n):t},Mn.pullAt=zo,Mn.range=ru,Mn.rangeRight=iu,Mn.rearg=Ma,Mn.reject=function(t,e){return(ka(t)?le:or)(t,xa(Xi(e,3)))},Mn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Xi(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Nr(t,i),n},Mn.rest=function(t,e){if("function"!=typeof t)throw new vt(o);return Ur(t,e=void 0===e?e:is(e))},Mn.reverse=Wo,Mn.sampleSize=function(t,e,n){return e=(n?uo(t,e,n):void 0===e)?1:is(e),(ka(t)?Hn:Hr)(t,e)},Mn.set=function(t,e,n){return null==t?t:Gr(t,e,n)},Mn.setWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Gr(t,e,n,r)},Mn.shuffle=function(t){return(ka(t)?Gn:Vr)(t)},Mn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&uo(t,e,n)?(e=0,n=r):(e=null==e?0:is(e),n=void 0===n?r:is(n)),Yr(t,e,n)):[]},Mn.sortBy=ma,Mn.sortedUniq=function(t){return t&&t.length?Qr(t):[]},Mn.sortedUniqBy=function(t,e){return t&&t.length?Qr(t,Xi(e,2)):[]},Mn.split=function(t,e,n){return n&&"number"!=typeof n&&uo(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=us(t))&&("string"==typeof e||null!=e&&!Ka(e))&&!(e=Zr(e))&&Be(t)?li(qe(t),0,n):t.split(e,n):[]},Mn.spread=function(t,e){if("function"!=typeof t)throw new vt(o);return e=null==e?0:sn(is(e),0),Ur((function(n){var r=n[e],i=li(n,0,e);return r&&pe(i,r),oe(t,this,i)}))},Mn.tail=function(t){var e=null==t?0:t.length;return e?Yr(t,1,e):[]},Mn.take=function(t,e,n){return t&&t.length?Yr(t,0,(e=n||void 0===e?1:is(e))<0?0:e):[]},Mn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Yr(t,(e=r-(e=n||void 0===e?1:is(e)))<0?0:e,r):[]},Mn.takeRightWhile=function(t,e){return t&&t.length?ni(t,Xi(e,3),!1,!0):[]},Mn.takeWhile=function(t,e){return t&&t.length?ni(t,Xi(e,3)):[]},Mn.tap=function(t,e){return e(t),t},Mn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new vt(o);return Wa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Sa(t,e,{leading:r,maxWait:e,trailing:i})},Mn.thru=ra,Mn.toArray=ns,Mn.toPairs=Ps,Mn.toPairsIn=Ms,Mn.toPath=function(t){return ka(t)?de(t,Io):Za(t)?[t]:yi(Ao(us(t)))},Mn.toPlainObject=ss,Mn.transform=function(t,e,n){var r=ka(t),i=r||Fa(t)||Ja(t);if(e=Xi(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Wa(t)&&Ha(o)?On(Gt(t)):{}}return(i?se:cr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Mn.unary=function(t){return va(t,1)},Mn.union=Vo,Mn.unionBy=Yo,Mn.unionWith=qo,Mn.uniq=function(t){return t&&t.length?Jr(t):[]},Mn.uniqBy=function(t,e){return t&&t.length?Jr(t,Xi(e,2)):[]},Mn.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Jr(t,void 0,e):[]},Mn.unset=function(t,e){return null==t||ti(t,e)},Mn.unzip=$o,Mn.unzipWith=Ko,Mn.update=function(t,e,n){return null==t?t:ei(t,e,si(n))},Mn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:ei(t,e,si(n),r)},Mn.values=Os,Mn.valuesIn=function(t){return null==t?[]:Re(t,ws(t))},Mn.without=Qo,Mn.words=Hs,Mn.wrap=function(t,e){return Ia(si(e),t)},Mn.xor=Xo,Mn.xorBy=Zo,Mn.xorWith=Jo,Mn.zip=ta,Mn.zipObject=function(t,e){return oi(t||[],e||[],Wn)},Mn.zipObjectDeep=function(t,e){return oi(t||[],e||[],Gr)},Mn.zipWith=ea,Mn.entries=Ps,Mn.entriesIn=Ms,Mn.extend=ls,Mn.extendWith=fs,Xs(Mn,Mn),Mn.add=su,Mn.attempt=Gs,Mn.camelCase=Cs,Mn.capitalize=Rs,Mn.ceil=uu,Mn.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=as(n))==n?n:0),void 0!==e&&(e=(e=as(e))==e?e:0),Qn(as(t),e,n)},Mn.clone=function(t){return Xn(t,4)},Mn.cloneDeep=function(t){return Xn(t,5)},Mn.cloneDeepWith=function(t,e){return Xn(t,5,e="function"==typeof e?e:void 0)},Mn.cloneWith=function(t,e){return Xn(t,4,e="function"==typeof e?e:void 0)},Mn.conformsTo=function(t,e){return null==e||Zn(t,e,Ss(e))},Mn.deburr=Ds,Mn.defaultTo=function(t,e){return null==t||t!=t?e:t},Mn.divide=cu,Mn.endsWith=function(t,e,n){t=us(t),e=Zr(e);var r=t.length,i=n=void 0===n?r:Qn(is(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},Mn.eq=Oa,Mn.escape=function(t){return(t=us(t))&&U.test(t)?t.replace(j,Fe):t},Mn.escapeRegExp=function(t){return(t=us(t))&&q.test(t)?t.replace(Y,"\\$&"):t},Mn.every=function(t,e,n){var r=ka(t)?ce:rr;return n&&uo(t,e,n)&&(e=void 0),r(t,Xi(e,3))},Mn.find=aa,Mn.findIndex=Do,Mn.findKey=function(t,e){return be(t,Xi(e,3),cr)},Mn.findLast=sa,Mn.findLastIndex=ko,Mn.findLastKey=function(t,e){return be(t,Xi(e,3),lr)},Mn.floor=lu,Mn.forEach=ua,Mn.forEachRight=ca,Mn.forIn=function(t,e){return null==t?t:sr(t,Xi(e,3),ws)},Mn.forInRight=function(t,e){return null==t?t:ur(t,Xi(e,3),ws)},Mn.forOwn=function(t,e){return t&&cr(t,Xi(e,3))},Mn.forOwnRight=function(t,e){return t&&lr(t,Xi(e,3))},Mn.get=gs,Mn.gt=Ca,Mn.gte=Ra,Mn.has=function(t,e){return null!=t&&io(t,e,gr)},Mn.hasIn=vs,Mn.head=No,Mn.identity=qs,Mn.includes=function(t,e,n,r){t=Na(t)?t:Os(t),n=n&&!r?is(n):0;var i=t.length;return n<0&&(n=sn(i+n,0)),Xa(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Se(t,e,n)>-1},Mn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:is(n);return i<0&&(i=sn(r+i,0)),Se(t,e,i)},Mn.inRange=function(t,e,n){return e=rs(e),void 0===n?(n=e,e=0):n=rs(n),function(t,e,n){return t>=un(e,n)&&t<sn(e,n)}(t=as(t),e,n)},Mn.invoke=Es,Mn.isArguments=Da,Mn.isArray=ka,Mn.isArrayBuffer=La,Mn.isArrayLike=Na,Mn.isArrayLikeObject=ja,Mn.isBoolean=function(t){return!0===t||!1===t||Va(t)&&pr(t)==l},Mn.isBuffer=Fa,Mn.isDate=Ua,Mn.isElement=function(t){return Va(t)&&1===t.nodeType&&!$a(t)},Mn.isEmpty=function(t){if(null==t)return!0;if(Na(t)&&(ka(t)||"string"==typeof t||"function"==typeof t.splice||Fa(t)||Ja(t)||Da(t)))return!t.length;var e=ro(t);if(e==m||e==b)return!t.size;if(ho(t))return!xr(t).length;for(var n in t)if(_t.call(t,n))return!1;return!0},Mn.isEqual=function(t,e){return Sr(t,e)},Mn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?Sr(t,e,void 0,n):!!r},Mn.isError=Ba,Mn.isFinite=function(t){return"number"==typeof t&&rn(t)},Mn.isFunction=Ha,Mn.isInteger=Ga,Mn.isLength=za,Mn.isMap=Ya,Mn.isMatch=function(t,e){return t===e||wr(t,e,Ji(e))},Mn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,wr(t,e,Ji(e),n)},Mn.isNaN=function(t){return qa(t)&&t!=+t},Mn.isNative=function(t){if(fo(t))throw new K("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return _r(t)},Mn.isNil=function(t){return null==t},Mn.isNull=function(t){return null===t},Mn.isNumber=qa,Mn.isObject=Wa,Mn.isObjectLike=Va,Mn.isPlainObject=$a,Mn.isRegExp=Ka,Mn.isSafeInteger=function(t){return Ga(t)&&t>=-9007199254740991&&t<=9007199254740991},Mn.isSet=Qa,Mn.isString=Xa,Mn.isSymbol=Za,Mn.isTypedArray=Ja,Mn.isUndefined=function(t){return void 0===t},Mn.isWeakMap=function(t){return Va(t)&&ro(t)==w},Mn.isWeakSet=function(t){return Va(t)&&"[object WeakSet]"==pr(t)},Mn.join=function(t,e){return null==t?"":on.call(t,e)},Mn.kebabCase=ks,Mn.last=Bo,Mn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=is(n))<0?sn(r+i,0):un(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):Ee(t,_e,i,!0)},Mn.lowerCase=Ls,Mn.lowerFirst=Ns,Mn.lt=ts,Mn.lte=es,Mn.max=function(t){return t&&t.length?ir(t,qs,mr):void 0},Mn.maxBy=function(t,e){return t&&t.length?ir(t,Xi(e,2),mr):void 0},Mn.mean=function(t){return Te(t,qs)},Mn.meanBy=function(t,e){return Te(t,Xi(e,2))},Mn.min=function(t){return t&&t.length?ir(t,qs,Ir):void 0},Mn.minBy=function(t,e){return t&&t.length?ir(t,Xi(e,2),Ir):void 0},Mn.stubArray=ou,Mn.stubFalse=au,Mn.stubObject=function(){return{}},Mn.stubString=function(){return""},Mn.stubTrue=function(){return!0},Mn.multiply=hu,Mn.nth=function(t,e){return t&&t.length?Rr(t,is(e)):void 0},Mn.noConflict=function(){return qt._===this&&(qt._=Pt),this},Mn.noop=Zs,Mn.now=ga,Mn.pad=function(t,e,n){t=us(t);var r=(e=is(e))?Ye(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Di(tn(i),n)+t+Di(Je(i),n)},Mn.padEnd=function(t,e,n){t=us(t);var r=(e=is(e))?Ye(t):0;return e&&r<e?t+Di(e-r,n):t},Mn.padStart=function(t,e,n){t=us(t);var r=(e=is(e))?Ye(t):0;return e&&r<e?Di(e-r,n)+t:t},Mn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),ln(us(t).replace($,""),e||0)},Mn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&uo(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=rs(t),void 0===e?(e=t,t=0):e=rs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=fn();return un(t+i*(e-t+zt("1e-"+((i+"").length-1))),e)}return jr(t,e)},Mn.reduce=function(t,e,n){var r=ka(t)?me:Ie,i=arguments.length<3;return r(t,Xi(e,4),n,i,er)},Mn.reduceRight=function(t,e,n){var r=ka(t)?ge:Ie,i=arguments.length<3;return r(t,Xi(e,4),n,i,nr)},Mn.repeat=function(t,e,n){return e=(n?uo(t,e,n):void 0===e)?1:is(e),Fr(us(t),e)},Mn.replace=function(){var t=arguments,e=us(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Mn.result=function(t,e,n){var r=-1,i=(e=ui(e,t)).length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[Io(e[r])];void 0===o&&(r=i,o=n),t=Ha(o)?o.call(t):o}return t},Mn.round=du,Mn.runInContext=t,Mn.sample=function(t){return(ka(t)?Bn:Br)(t)},Mn.size=function(t){if(null==t)return 0;if(Na(t))return Xa(t)?Ye(t):t.length;var e=ro(t);return e==m||e==b?t.size:xr(t).length},Mn.snakeCase=js,Mn.some=function(t,e,n){var r=ka(t)?ve:qr;return n&&uo(t,e,n)&&(e=void 0),r(t,Xi(e,3))},Mn.sortedIndex=function(t,e){return $r(t,e)},Mn.sortedIndexBy=function(t,e,n){return Kr(t,e,Xi(n,2))},Mn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=$r(t,e);if(r<n&&Oa(t[r],e))return r}return-1},Mn.sortedLastIndex=function(t,e){return $r(t,e,!0)},Mn.sortedLastIndexBy=function(t,e,n){return Kr(t,e,Xi(n,2),!0)},Mn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=$r(t,e,!0)-1;if(Oa(t[n],e))return n}return-1},Mn.startCase=Fs,Mn.startsWith=function(t,e,n){return t=us(t),n=null==n?0:Qn(is(n),0,t.length),e=Zr(e),t.slice(n,n+e.length)==e},Mn.subtract=pu,Mn.sum=function(t){return t&&t.length?Pe(t,qs):0},Mn.sumBy=function(t,e){return t&&t.length?Pe(t,Xi(e,2)):0},Mn.template=function(t,e,n){var r=Mn.templateSettings;n&&uo(t,e,n)&&(e=void 0),t=us(t),e=fs({},e,r,Hi);var i,o,a=fs({},e.imports,r.imports,Hi),s=Ss(a),u=Re(a,s),c=0,l=e.interpolate||lt,f="__p += '",h=mt((e.escape||lt).source+"|"+l.source+"|"+(l===G?nt:lt).source+"|"+(e.evaluate||lt).source+"|$","g"),d="//# sourceURL="+(_t.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ut+"]")+"\n";t.replace(h,(function(e,n,r,a,s,u){return r||(r=a),f+=t.slice(c,u).replace(ft,Ue),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),f+="';\n";var p=_t.call(e,"variable")&&e.variable;if(p){if(tt.test(p))throw new K("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(D,""):f).replace(k,"$1").replace(L,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=Gs((function(){return ht(s,d+"return "+f).apply(void 0,u)}));if(m.source=f,Ba(m))throw m;return m},Mn.times=function(t,e){if((t=is(t))<1||t>9007199254740991)return[];var n=4294967295,r=un(t,4294967295);t-=4294967295;for(var i=Me(r,e=Xi(e));++n<t;)e(n);return i},Mn.toFinite=rs,Mn.toInteger=is,Mn.toLength=os,Mn.toLower=function(t){return us(t).toLowerCase()},Mn.toNumber=as,Mn.toSafeInteger=function(t){return t?Qn(is(t),-9007199254740991,9007199254740991):0===t?t:0},Mn.toString=us,Mn.toUpper=function(t){return us(t).toUpperCase()},Mn.trim=function(t,e,n){if((t=us(t))&&(n||void 0===e))return Oe(t);if(!t||!(e=Zr(e)))return t;var r=qe(t),i=qe(e);return li(r,ke(r,i),Le(r,i)+1).join("")},Mn.trimEnd=function(t,e,n){if((t=us(t))&&(n||void 0===e))return t.slice(0,$e(t)+1);if(!t||!(e=Zr(e)))return t;var r=qe(t);return li(r,0,Le(r,qe(e))+1).join("")},Mn.trimStart=function(t,e,n){if((t=us(t))&&(n||void 0===e))return t.replace($,"");if(!t||!(e=Zr(e)))return t;var r=qe(t);return li(r,ke(r,qe(e))).join("")},Mn.truncate=function(t,e){var n=30,r="...";if(Wa(e)){var i="separator"in e?e.separator:i;n="length"in e?is(e.length):n,r="omission"in e?Zr(e.omission):r}var o=(t=us(t)).length;if(Be(t)){var a=qe(t);o=a.length}if(n>=o)return t;var s=n-Ye(r);if(s<1)return r;var u=a?li(a,0,s).join(""):t.slice(0,s);if(void 0===i)return u+r;if(a&&(s+=u.length-s),Ka(i)){if(t.slice(s).search(i)){var c,l=u;for(i.global||(i=mt(i.source,us(rt.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,void 0===f?s:f)}}else if(t.indexOf(Zr(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+r},Mn.unescape=function(t){return(t=us(t))&&F.test(t)?t.replace(N,Ke):t},Mn.uniqueId=function(t){var e=++Tt;return us(t)+e},Mn.upperCase=Us,Mn.upperFirst=Bs,Mn.each=ua,Mn.eachRight=ca,Mn.first=No,Xs(Mn,(fu={},cr(Mn,(function(t,e){_t.call(Mn.prototype,e)||(fu[e]=t)})),fu),{chain:!1}),Mn.VERSION="4.17.21",se(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Mn[t].placeholder=Mn})),se(["drop","take"],(function(t,e){Dn.prototype[t]=function(n){n=void 0===n?1:sn(is(n),0);var r=this.__filtered__&&!e?new Dn(this):this.clone();return r.__filtered__?r.__takeCount__=un(n,r.__takeCount__):r.__views__.push({size:un(n,4294967295),type:t+(r.__dir__<0?"Right":"")}),r},Dn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),se(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Dn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Xi(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),se(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Dn.prototype[t]=function(){return this[n](1).value()[0]}})),se(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Dn.prototype[t]=function(){return this.__filtered__?new Dn(this):this[n](1)}})),Dn.prototype.compact=function(){return this.filter(qs)},Dn.prototype.find=function(t){return this.filter(t).head()},Dn.prototype.findLast=function(t){return this.reverse().find(t)},Dn.prototype.invokeMap=Ur((function(t,e){return"function"==typeof t?new Dn(this):this.map((function(n){return br(n,t,e)}))})),Dn.prototype.reject=function(t){return this.filter(xa(Xi(t)))},Dn.prototype.slice=function(t,e){t=is(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Dn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=is(e))<0?n.dropRight(-e):n.take(e-t)),n)},Dn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Dn.prototype.toArray=function(){return this.take(4294967295)},cr(Dn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Mn[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(Mn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,s=e instanceof Dn,u=a[0],c=s||ka(e),l=function(t){var e=i.apply(Mn,pe([t],a));return r&&f?e[0]:e};c&&n&&"function"==typeof u&&1!=u.length&&(s=c=!1);var f=this.__chain__,h=!!this.__actions__.length,d=o&&!f,p=s&&!h;if(!o&&c){e=p?e:new Dn(this);var m=t.apply(e,a);return m.__actions__.push({func:ra,args:[l],thisArg:void 0}),new Rn(m,f)}return d&&p?t.apply(this,a):(m=this.thru(l),d?r?m.value()[0]:m.value():m)})})),se(["pop","push","shift","sort","splice","unshift"],(function(t){var e=yt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Mn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(ka(i)?i:[],t)}return this[n]((function(n){return e.apply(ka(n)?n:[],t)}))}})),cr(Dn.prototype,(function(t,e){var n=Mn[e];if(n){var r=n.name+"";_t.call(En,r)||(En[r]=[]),En[r].push({name:e,func:n})}})),En[Mi(void 0,2).name]=[{name:"wrapper",func:void 0}],Dn.prototype.clone=function(){var t=new Dn(this.__wrapped__);return t.__actions__=yi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=yi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=yi(this.__views__),t},Dn.prototype.reverse=function(){if(this.__filtered__){var t=new Dn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Dn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=ka(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=un(e,t+a);break;case"takeRight":t=sn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,h=0,d=un(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return ri(t,this.__actions__);var p=[];t:for(;u--&&h<d;){for(var m=-1,g=t[c+=e];++m<f;){var v=l[m],y=v.iteratee,b=v.type,E=y(g);if(2==b)g=E;else if(!E){if(1==b)continue t;break t}}p[h++]=g}return p},Mn.prototype.at=ia,Mn.prototype.chain=function(){return na(this)},Mn.prototype.commit=function(){return new Rn(this.value(),this.__chain__)},Mn.prototype.next=function(){void 0===this.__values__&&(this.__values__=ns(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},Mn.prototype.plant=function(t){for(var e,n=this;n instanceof Cn;){var r=Mo(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},Mn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Dn){var e=t;return this.__actions__.length&&(e=new Dn(this)),(e=e.reverse()).__actions__.push({func:ra,args:[Wo],thisArg:void 0}),new Rn(e,this.__chain__)}return this.thru(Wo)},Mn.prototype.toJSON=Mn.prototype.valueOf=Mn.prototype.value=function(){return ri(this.__wrapped__,this.__actions__)},Mn.prototype.first=Mn.prototype.head,Xt&&(Mn.prototype[Xt]=function(){return this}),Mn}();qt._=Qe,void 0===(i=function(){return Qe}.call(e,n,e,r))||(r.exports=i)}).call(this)}).call(this,n(11),n(272)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LoadingBar=e.LoadingScreenContainer=void 0;const r=n(0),i=n(7),o=n(52),a=n(1);e.LoadingScreenContainer=t=>{const[n,s]=(0,i.useGlobalState)();return r.createElement(o.ViewportComponent,{x:0,y:0,width:a.DOM_WIDTH,height:a.DOM_HEIGHT,style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.createElement(e.LoadingBar,{percentage:n.gameStart.gameLoadPercentage,width:256,height:32}))};e.LoadingBar=t=>{const e=(t.width-4)*t.percentage,n=t.height-4;return r.createElement("div",{style:{borderStyle:"solid",borderColor:"gray",borderWidth:"2px",width:t.width,height:t.height,backgroundColor:""}},r.createElement("div",{style:{width:e,height:n,backgroundColor:"gray"}}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebContentContainer=void 0;const r=n(0),i=n(275),o=n(276),a=n(362),s=n(363);e.WebContentContainer=t=>{const[e,n]=r.useState(i.NavPage.GAME),{setShowGame:o,isGameShowing:a}=t;return r.createElement("div",{style:{position:"absolute",zIndex:2,width:"100%",display:"flex",justifyContent:"center"}},r.createElement(i.NavbarContainer,{setShowGame:o,page:e,setPage:n}),u(e))};const u=t=>{switch(t){case i.NavPage.ABOUT:return r.createElement(o.PageAbout,null);case i.NavPage.DEEPDIVE:return r.createElement(s.PageDeepDive,null);case i.NavPage.ANNOUNCEMENTS:return r.createElement(a.PageAnnouncements,null)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NavbarContainer=e.NavPage=void 0;const r=n(0),i=n(5),o=n(1),a=n(6);var s;!function(t){t.GAME="Game",t.ABOUT="About",t.DEEPDIVE="Deep Dives",t.ANNOUNCEMENTS="Changelog"}(s=e.NavPage||(e.NavPage={}));e.NavbarContainer=t=>{const{page:e,setPage:n,setShowGame:a}=t,c=(t,e)=>{const r=new URLSearchParams;if(n(t),t===s.GAME?a(!0):a(!1),e){switch(t){case s.GAME:r.delete("page");break;case s.DEEPDIVE:r.set("page","deepdive");break;case s.ABOUT:r.set("page","about")}history.replaceState(null,null,"?"+r.toString())}};return r.useEffect(()=>{const t=new URLSearchParams(window.location.search);if(t.has("page")){switch(t.get("page")){case"game":break;case"deepdive":c(s.DEEPDIVE,!1);break;case"about":c(s.ABOUT,!1)}}},[]),r.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"start",width:o.DOM_WIDTH,alignItems:"center",position:"fixed",height:68,backgroundColor:"black"}},r.createElement(i.TextComponent,{text:"Otherworld",size:i.TextSize.MED,font:i.TextFont.REGULAR,colour:i.TextColour.LESS_LIGHT,style:{}}),r.createElement(u,{navPage:s.GAME,selectedNavPage:e,onClick:c}),r.createElement(u,{navPage:s.ABOUT,selectedNavPage:e,onClick:c}),r.createElement(u,{navPage:s.DEEPDIVE,selectedNavPage:e,onClick:c}))};const u=t=>{const e=t.navPage===t.selectedNavPage,[n,o]=r.useState(0);r.useEffect(()=>{e&&(0,a.animation)(o).tween(a.sin).tween(t=>1-t).driven(!1).speed(100).start()},[e]);const s=1-Math.floor(100*n)/100;return r.createElement(i.TextComponent,{text:t.navPage,size:i.TextSize.SMALL,font:i.TextFont.REGULAR,colour:e?i.TextColour.LIGHT:i.TextColour.LESS_LIGHT,style:{transformOrigin:"center",transform:`scale(${s})`,marginLeft:16},clickable:()=>t.onClick(t.navPage,!0)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PageAbout=void 0;const r=n(0),i=n(84);e.PageAbout=t=>r.createElement("div",{style:{marginTop:100,textAlign:"center",width:"75%"}},r.createElement(i.AsyncMarkdown,{className:"deepdive_text",url:"doc/about.md"}))},function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i=n(14),o=n(278),a=n(291),s=n(346),u=n(349),c=n(351),l=n(352),f=n(353),h=n(356),d=n(357),p=n(358),m=n(359),g=n(360),v=Object.keys(m),y=function(t){var e=t.source||t.children||"",n=t.parserOptions;if(t.allowedTypes&&t.disallowedTypes)throw new Error("Only one of `allowedTypes` and `disallowedTypes` should be defined");var r=i(m,t.renderers),s=[[a,n]].concat(t.plugins||[]).reduce(b,o()),p=s.parse(e),y=i(t,{renderers:r,definitions:d(p)}),E=function(t){var e=[h,u()],n=t.disallowedTypes;t.allowedTypes&&(n=v.filter((function(e){return"root"!==e&&-1===t.allowedTypes.indexOf(e)})));var r=t.unwrapDisallowed?"unwrap":"remove";n&&n.length>0&&e.push(l.ofType(n,r));t.allowNode&&e.push(l.ifNotMatch(t.allowNode,r));var i=!t.escapeHtml&&!t.skipHtml,o=(t.astPlugins||[]).some((function(t){return(Array.isArray(t)?t[0]:t).identity===g.HtmlParser}));i&&!o&&e.push(c);return t.astPlugins?e.concat(t.astPlugins):e}(t),S=s.runSync(p),w=E.reduce((function(t,e){return e(t,y)}),S);return f(w,y)};function b(t,e){return Array.isArray(e)?t.use.apply(t,r(e)):t.use(e)}y.defaultProps={renderers:{},escapeHtml:!0,skipHtml:!1,sourcePos:!1,rawSourcePos:!1,transformLinkUri:p,astPlugins:[],plugins:[],parserOptions:{}},y.propTypes={className:s.string,source:s.string,children:s.string,sourcePos:s.bool,rawSourcePos:s.bool,escapeHtml:s.bool,skipHtml:s.bool,allowNode:s.func,allowedTypes:s.arrayOf(s.oneOf(v)),disallowedTypes:s.arrayOf(s.oneOf(v)),transformLinkUri:s.oneOfType([s.func,s.bool]),linkTarget:s.oneOfType([s.func,s.string]),transformImageUri:s.func,astPlugins:s.arrayOf(s.func),unwrapDisallowed:s.bool,renderers:s.object,plugins:s.array,parserOptions:s.object},y.types=v,y.renderers=m,y.uriTransformer=p,t.exports=y},function(t,e,n){"use strict";var r=n(279),i=n(280),o=n(281),a=n(287),s=n(289),u=n(290);t.exports=function t(){var e=[],n=a(),y={},b=!1,E=-1;return S.data=function(t,e){if(s(t))return 2===arguments.length?(m("data",b),y[t]=e,S):l.call(y,t)&&y[t]||null;if(t)return m("data",b),y=t,S;return y},S.freeze=w,S.attachers=e,S.use=function(t){var n;if(m("use",b),null==t);else if("function"==typeof t)s.apply(null,arguments);else{if("object"!=typeof t)throw new Error("Expected usable value, not `"+t+"`");"length"in t?a(t):i(t)}n&&(y.settings=r(y.settings||{},n));return S;function i(t){a(t.plugins),t.settings&&(n=r(n||{},t.settings))}function o(t){if("function"==typeof t)s(t);else{if("object"!=typeof t)throw new Error("Expected usable value, not `"+t+"`");"length"in t?s.apply(null,t):i(t)}}function a(t){var e,n;if(null==t);else{if("object"!=typeof t||!("length"in t))throw new Error("Expected a list of plugins, not `"+t+"`");for(e=t.length,n=-1;++n<e;)o(t[n])}}function s(t,n){var i=_(t);i?(u(i[1])&&u(n)&&(n=r(i[1],n)),i[1]=n):e.push(c.call(arguments))}},S.parse=function(t){var e,n=o(t);if(w(),d("parse",e=S.Parser),h(e))return new e(String(n),n).parse();return e(String(n),n)},S.stringify=function(t,e){var n,r=o(e);if(w(),p("stringify",n=S.Compiler),g(t),h(n))return new n(t,r).compile();return n(t,r)},S.run=T,S.runSync=function(t,e){var n,r=!1;return T(t,e,(function(t,e){r=!0,i(t),n=e})),v("runSync","run",r),n},S.process=x,S.processSync=function(t){var e,n=!1;return w(),d("processSync",S.Parser),p("processSync",S.Compiler),x(e=o(t),(function(t){n=!0,i(t)})),v("processSync","process",n),e},S;function S(){for(var n=t(),i=e.length,o=-1;++o<i;)n.use.apply(null,e[o]);return n.data(r(!0,{},y)),n}function w(){var t,r,i,o;if(b)return S;for(;++E<e.length;)r=(t=e[E])[0],null,!1!==(i=t[1])&&(!0===i&&(t[1]=void 0),"function"==typeof(o=r.apply(S,t.slice(1)))&&n.use(o));return b=!0,E=1/0,S}function _(t){for(var n,r=e.length,i=-1;++i<r;)if((n=e[i])[0]===t)return n}function T(t,e,r){if(g(t),w(),r||"function"!=typeof e||(r=e,e=null),!r)return new Promise(i);function i(i,a){n.run(t,o(e),(function(e,n,o){n=n||t,e?a(e):i?i(n):r(null,n,o)}))}i(null,r)}function x(t,e){if(w(),d("process",S.Parser),p("process",S.Compiler),!e)return new Promise(n);function n(n,r){var i=o(t);f.run(S,{file:i},(function(t){t?r(t):n?n(i):e(null,i)}))}n(null,e)}}().freeze();var c=[].slice,l={}.hasOwnProperty,f=a().use((function(t,e){e.tree=t.parse(e.file)})).use((function(t,e,n){t.run(e.tree,e.file,(function(t,r,i){t?n(t):(e.tree=r,e.file=i,n())}))})).use((function(t,e){e.file.contents=t.stringify(e.tree,e.file)}));function h(t){return"function"==typeof t&&function(t){var e;for(e in t)return!0;return!1}(t.prototype)}function d(t,e){if("function"!=typeof e)throw new Error("Cannot `"+t+"` without `Parser`")}function p(t,e){if("function"!=typeof e)throw new Error("Cannot `"+t+"` without `Compiler`")}function m(t,e){if(e)throw new Error(["Cannot invoke `"+t+"` on a frozen processor.\nCreate a new ","processor first, by invoking it: use `processor()` instead of ","`processor`."].join(""))}function g(t){if(!t||!s(t.type))throw new Error("Expected node, got `"+t+"`")}function v(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},u=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,n=r.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!o)return!1;for(e in t);return void 0===e||r.call(t,e)},c=function(t,e){o&&"__proto__"===e.name?o(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},l=function(t,e){if("__proto__"===e){if(!r.call(t,e))return;if(a)return a(t,e).value}return t[e]};t.exports=function t(){var e,n,r,i,o,a,f=arguments[0],h=1,d=arguments.length,p=!1;for("boolean"==typeof f&&(p=f,f=arguments[1]||{},h=2),(null==f||"object"!=typeof f&&"function"!=typeof f)&&(f={});h<d;++h)if(null!=(e=arguments[h]))for(n in e)r=l(f,n),f!==(i=l(e,n))&&(p&&i&&(u(i)||(o=s(i)))?(o?(o=!1,a=r&&s(r)?r:[]):a=r&&u(r)?r:{},c(f,{name:n,newValue:t(p,a,i)})):void 0!==i&&c(f,{name:n,newValue:i}));return f}},function(t,e,n){"use strict";t.exports=function(t){if(t)throw t}},function(t,e,n){"use strict";var r=n(282),i=n(284);t.exports=i;var o=i.prototype;function a(t,e,n){var i=this.path,o=new r(t,e,n);return i&&(o.name=i+":"+o.name,o.file=i),o.fatal=!1,this.messages.push(o),o}o.message=a,o.info=function(){var t=this.message.apply(this,arguments);return t.fatal=null,t},o.fail=function(){var t=this.message.apply(this,arguments);throw t.fatal=!0,t},o.warn=a},function(t,e,n){"use strict";var r=n(283);function i(){}t.exports=a,i.prototype=Error.prototype,a.prototype=new i;var o=a.prototype;function a(t,e,n){var i,o,a;"string"==typeof e&&(n=e,e=null),i=function(t){var e,n=[null,null];"string"==typeof t&&(-1===(e=t.indexOf(":"))?n[1]=t:(n[0]=t.slice(0,e),n[1]=t.slice(e+1)));return n}(n),o=r(e)||"1:1",a={start:{line:null,column:null},end:{line:null,column:null}},e&&e.position&&(e=e.position),e&&(e.start?(a=e,e=e.start):a.start=e),t.stack&&(this.stack=t.stack,t=t.message),this.message=t,this.name=o,this.reason=t,this.line=e?e.line:null,this.column=e?e.column:null,this.location=a,this.source=i[0],this.ruleId=i[1]}o.file="",o.name="",o.reason="",o.message="",o.stack="",o.fatal=null,o.column=null,o.line=null},function(t,e,n){"use strict";var r={}.hasOwnProperty;function i(t){return t&&"object"==typeof t||(t={}),a(t.line)+":"+a(t.column)}function o(t){return t&&"object"==typeof t||(t={}),i(t.start)+"-"+i(t.end)}function a(t){return t&&"number"==typeof t?t:1}t.exports=function(t){if(!t||"object"!=typeof t)return null;if(r.call(t,"position")||r.call(t,"type"))return o(t.position);if(r.call(t,"start")||r.call(t,"end"))return o(t);if(r.call(t,"line")||r.call(t,"column"))return i(t);return null}},function(t,e,n){"use strict";(function(e){var r=n(132),i=n(285),o=n(286);t.exports=c;var a={}.hasOwnProperty,s=c.prototype;s.toString=function(t){var e=this.contents||"";return o(e)?e.toString(t):String(e)};var u=["history","path","basename","stem","extname","dirname"];function c(t){var n,r,i;if(t){if("string"==typeof t||o(t))t={contents:t};else if("message"in t&&"messages"in t)return t}else t={};if(!(this instanceof c))return new c(t);for(this.data={},this.messages=[],this.history=[],this.cwd=e.cwd(),r=-1,i=u.length;++r<i;)n=u[r],a.call(t,n)&&(this[n]=t[n]);for(n in t)-1===u.indexOf(n)&&(this[n]=t[n])}function l(t,e){if(-1!==t.indexOf(r.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+r.sep+"`")}function f(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function h(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}Object.defineProperty(s,"path",{get:function(){return this.history[this.history.length-1]},set:function(t){f(t,"path"),t!==this.path&&this.history.push(t)}}),Object.defineProperty(s,"dirname",{get:function(){return"string"==typeof this.path?r.dirname(this.path):void 0},set:function(t){h(this.path,"dirname"),this.path=r.join(t||"",this.basename)}}),Object.defineProperty(s,"basename",{get:function(){return"string"==typeof this.path?r.basename(this.path):void 0},set:function(t){f(t,"basename"),l(t,"basename"),this.path=r.join(this.dirname||"",t)}}),Object.defineProperty(s,"extname",{get:function(){return"string"==typeof this.path?r.extname(this.path):void 0},set:function(t){var e=t||"";if(l(e,"extname"),h(this.path,"extname"),e){if("."!==e.charAt(0))throw new Error("`extname` must start with `.`");if(-1!==e.indexOf(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=i(this.path,e)}}),Object.defineProperty(s,"stem",{get:function(){return"string"==typeof this.path?r.basename(this.path,this.extname):void 0},set:function(t){f(t,"stem"),l(t,"stem"),this.path=r.join(this.dirname||"",t+(this.extname||""))}})}).call(this,n(24))},function(t,e,n){"use strict";var r=n(132);t.exports=function(t,e){if("string"!=typeof t)return t;if(0===t.length)return t;var n=r.basename(t,r.extname(t))+e;return r.join(r.dirname(t),n)}},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){"use strict";var r=n(288);t.exports=o,o.wrap=r;var i=[].slice;function o(){var t=[],e={run:function(){var e=-1,n=i.call(arguments,0,-1),o=arguments[arguments.length-1];if("function"!=typeof o)throw new Error("Expected function as last argument, not "+o);function a(s){var u=t[++e],c=i.call(arguments,0),l=c.slice(1),f=n.length,h=-1;if(s)o(s);else{for(;++h<f;)null!==l[h]&&void 0!==l[h]||(l[h]=n[h]);n=l,u?r(u,a).apply(null,n):o.apply(null,[null].concat(n))}}a.apply(null,[null].concat(n))},use:function(n){if("function"!=typeof n)throw new Error("Expected `fn` to be a function, not "+n);return t.push(n),e}};return e}},function(t,e,n){"use strict";var r=[].slice;t.exports=function(t,e){var n;return function(){var e,a=r.call(arguments,0),s=t.length>a.length;s&&a.push(i);try{e=t.apply(null,a)}catch(t){if(s&&n)throw t;return i(t)}s||(e&&"function"==typeof e.then?e.then(o,i):e instanceof Error?i(e):o(e))};function i(){n||(n=!0,e.apply(null,arguments))}function o(t){i(null,t)}}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return"[object String]"===n.call(t)}},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e;return"[object Object]"===r.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}},function(t,e,n){"use strict";var r=n(292),i=n(14),o=n(293);function a(t){var e=r(o);e.prototype.options=i(e.prototype.options,this.data("settings"),t),this.Parser=e}t.exports=a,a.Parser=o},function(t,e,n){"use strict";var r=n(14),i=n(17);t.exports=function(t){var e,n,o;for(n in i(s,t),i(a,s),e=s.prototype)(o=e[n])&&"object"==typeof o&&(e[n]="concat"in o?o.concat():r(o));return s;function a(e){return t.apply(this,e)}function s(){return this instanceof s?t.apply(this,arguments):new a(arguments)}}},function(t,e,n){"use strict";var r=n(14),i=n(294),o=n(295),a=n(296),s=n(297),u=n(303);function c(t,e){this.file=e,this.offset={},this.options=r(this.options),this.setOptions({}),this.inList=!1,this.inBlock=!1,this.inLink=!1,this.atStart=!0,this.toOffset=o(e).toOffset,this.unescape=a(this,"escape"),this.decode=s(this)}t.exports=c;var l=c.prototype;function f(t){var e,n=[];for(e in t)n.push(e);return n}l.setOptions=n(304),l.parse=n(307),l.options=n(134),l.exitStart=i("atStart",!0),l.enterList=i("inList",!1),l.enterLink=i("inLink",!1),l.enterBlock=i("inBlock",!1),l.interruptParagraph=[["thematicBreak"],["atxHeading"],["fencedCode"],["blockquote"],["html"],["setextHeading",{commonmark:!1}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],l.interruptList=[["atxHeading",{pedantic:!1}],["fencedCode",{pedantic:!1}],["thematicBreak",{pedantic:!1}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],l.interruptBlockquote=[["indentedCode",{commonmark:!0}],["fencedCode",{commonmark:!0}],["atxHeading",{commonmark:!0}],["setextHeading",{commonmark:!0}],["thematicBreak",{commonmark:!0}],["html",{commonmark:!0}],["list",{commonmark:!0}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],l.blockTokenizers={newline:n(311),indentedCode:n(312),fencedCode:n(313),blockquote:n(314),atxHeading:n(315),thematicBreak:n(316),list:n(317),setextHeading:n(319),html:n(320),footnote:n(321),definition:n(323),table:n(324),paragraph:n(325)},l.inlineTokenizers={escape:n(326),autoLink:n(328),url:n(329),html:n(331),link:n(332),reference:n(333),strong:n(334),emphasis:n(336),deletion:n(339),code:n(341),break:n(343),text:n(345)},l.blockMethods=f(l.blockTokenizers),l.inlineMethods=f(l.inlineTokenizers),l.tokenizeBlock=u("block"),l.tokenizeInline=u("inline"),l.tokenizeFactory=u},function(t,e,n){"use strict";t.exports=function(t,e,n){return function(){var r=n||this,i=r[t];return r[t]=!e,function(){r[t]=i}}}},function(t,e,n){"use strict";function r(t){return function(e){var n=-1,r=t.length;if(e<0)return{};for(;++n<r;)if(t[n]>e)return{line:n+1,column:e-(t[n-1]||0)+1,offset:e};return{}}}function i(t){return function(e){var n=e&&e.line,r=e&&e.column;if(!isNaN(n)&&!isNaN(r)&&n-1 in t)return(t[n-2]||0)+r-1||0;return-1}}t.exports=function(t){var e=function(t){var e=[],n=t.indexOf("\n");for(;-1!==n;)e.push(n+1),n=t.indexOf("\n",n+1);return e.push(t.length+1),e}(String(t));return{toPosition:r(e),toOffset:i(e)}}},function(t,e,n){"use strict";t.exports=function(t,e){return function(n){var r,i=0,o=n.indexOf("\\"),a=t[e],s=[];for(;-1!==o;)s.push(n.slice(i,o)),i=o+1,(r=n.charAt(i))&&-1!==a.indexOf(r)||s.push("\\"),o=n.indexOf("\\",i);return s.push(n.slice(i)),s.join("")}}},function(t,e,n){"use strict";var r=n(14),i=n(85);t.exports=function(t){return o.raw=function(t,o,a){return i(t,r(a,{position:e(o),warning:n}))},o;function e(e){for(var n=t.offset,r=e.line,i=[];++r&&r in n;)i.push((n[r]||0)+1);return{start:e,indent:i}}function n(e,n,r){3!==r&&t.file.message(e,n)}function o(r,o,a){i(r,{position:e(o),warning:n,text:a,reference:a,textContext:t,referenceContext:t})}}},function(t){t.exports=JSON.parse('{"AElig":"","AMP":"&","Aacute":"","Acirc":"","Agrave":"","Aring":"","Atilde":"","Auml":"","COPY":"","Ccedil":"","ETH":"","Eacute":"","Ecirc":"","Egrave":"","Euml":"","GT":">","Iacute":"","Icirc":"","Igrave":"","Iuml":"","LT":"<","Ntilde":"","Oacute":"","Ocirc":"","Ograve":"","Oslash":"","Otilde":"","Ouml":"","QUOT":"\\"","REG":"","THORN":"","Uacute":"","Ucirc":"","Ugrave":"","Uuml":"","Yacute":"","aacute":"","acirc":"","acute":"","aelig":"","agrave":"","amp":"&","aring":"","atilde":"","auml":"","brvbar":"","ccedil":"","cedil":"","cent":"","copy":"","curren":"","deg":"","divide":"","eacute":"","ecirc":"","egrave":"","eth":"","euml":"","frac12":"","frac14":"","frac34":"","gt":">","iacute":"","icirc":"","iexcl":"","igrave":"","iquest":"","iuml":"","laquo":"","lt":"<","macr":"","micro":"","middot":"","nbsp":"","not":"","ntilde":"","oacute":"","ocirc":"","ograve":"","ordf":"","ordm":"","oslash":"","otilde":"","ouml":"","para":"","plusmn":"","pound":"","quot":"\\"","raquo":"","reg":"","sect":"","shy":"","sup1":"","sup2":"","sup3":"","szlig":"","thorn":"","times":"","uacute":"","ucirc":"","ugrave":"","uml":"","uuml":"","yacute":"","yen":"","yuml":""}')},function(t){t.exports=JSON.parse('{"0":"","128":"","130":"","131":"","132":"","133":"","134":"","135":"","136":"","137":"","138":"","139":"","140":"","142":"","145":"","146":"","147":"","148":"","149":"","150":"","151":"","152":"","153":"","154":"","155":"","156":"","158":"","159":""}')},function(t,e,n){"use strict";t.exports=function(t){var e="string"==typeof t?t.charCodeAt(0):t;return e>=97&&e<=102||e>=65&&e<=70||e>=48&&e<=57}},function(t,e,n){"use strict";var r=n(133),i=n(54);t.exports=function(t){return r(t)||i(t)}},function(t,e,n){"use strict";var r;t.exports=function(t){var e,n="&"+t+";";if((r=r||document.createElement("i")).innerHTML=n,59===(e=r.textContent).charCodeAt(e.length-1)&&"semi"!==t)return!1;return e!==n&&e}},function(t,e,n){"use strict";t.exports=function(t){return function(e,n){var o,a,s,u,c,l,f=this,h=f.offset,d=[],p=f[t+"Methods"],m=f[t+"Tokenizers"],g=n.line,v=n.column;if(!e)return d;S.now=b,S.file=f.file,y("");for(;e;){for(o=-1,a=p.length,c=!1;++o<a&&(u=p[o],!(s=m[u])||s.onlyAtStart&&!f.atStart||s.notInList&&f.inList||s.notInBlock&&f.inBlock||s.notInLink&&f.inLink||(l=e.length,s.apply(f,[S,e]),!(c=l!==e.length))););c||f.file.fail(new Error("Infinite loop"),S.now())}return f.eof=b(),d;function y(t){for(var e=-1,n=t.indexOf("\n");-1!==n;)g++,e=n,n=t.indexOf("\n",n+1);-1===e?v+=t.length:v=t.length-e,g in h&&(-1!==e?v+=h[g]:v<=h[g]&&(v=h[g]+1))}function b(){var t={line:g,column:v};return t.offset=f.toOffset(t),t}function E(t){this.start=t,this.end=b()}function S(t){var n,o=function(){var t=[],e=g+1;return function(){for(var n=g+1;e<n;)t.push((h[e]||0)+1),e++;return t}}(),a=(n=b(),function(t,e){var r=t.position,i=r?r.start:n,o=[],a=r&&r.end.line,s=n.line;if(t.position=new E(i),r&&e&&r.indent){if(o=r.indent,a<s){for(;++a<s;)o.push((h[a]||0)+1);o.push(n.column)}e=o.concat(e)}return t.position.indent=e||[],t}),s=b();return function(t){e.substring(0,t.length)!==t&&f.file.fail(new Error("Incorrectly eaten value: please report this warning on http://git.io/vg5Ft"),b())}(t),u.reset=c,c.test=l,u.test=l,e=e.substring(t.length),y(t),o=o(),u;function u(t,e){return a(function(t,e){var n=e?e.children:d,o=n[n.length-1];return o&&t.type===o.type&&t.type in r&&i(o)&&i(t)&&(t=r[t.type].call(f,o,t)),t!==o&&n.push(t),f.atStart&&0!==d.length&&f.exitStart(),t}(a(t),e),o)}function c(){var n=u.apply(null,arguments);return g=s.line,v=s.column,e=t+e,n}function l(){var n=a({});return g=s.line,v=s.column,e=t+e,n.position}}}};var r={text:function(t,e){return t.value+=e.value,t},blockquote:function(t,e){if(this.options.commonmark)return e;return t.children=t.children.concat(e.children),t}};function i(t){var e,n;return"text"!==t.type||!t.position||(e=t.position.start,n=t.position.end,e.line!==n.line||n.column-e.column===t.value.length)}},function(t,e,n){"use strict";var r=n(14),i=n(305),o=n(134);t.exports=function(t){var e,n,a=this.options;if(null==t)t={};else{if("object"!=typeof t)throw new Error("Invalid value `"+t+"` for setting `options`");t=r(t)}for(e in o){if(null==(n=t[e])&&(n=a[e]),"blocks"!==e&&"boolean"!=typeof n||"blocks"===e&&"object"!=typeof n)throw new Error("Invalid value `"+n+"` for setting `options."+e+"`");t[e]=n}return this.options=t,this.escape=i(t),this}},function(t,e,n){"use strict";t.exports=a;var r=["\\","`","*","{","}","[","]","(",")","#","+","-",".","!","_",">"],i=r.concat(["~","|"]),o=i.concat(["\n",'"',"$","%","&","'",",","/",":",";","<","=","?","@","^"]);function a(t){var e=t||{};return e.commonmark?o:e.gfm?i:r}a.default=r,a.gfm=i,a.commonmark=o},function(t){t.exports=JSON.parse('["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","pre","section","source","title","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]')},function(t,e,n){"use strict";var r=n(14),i=n(308);t.exports=function(){var t,e=String(this.file),n={line:1,column:1,offset:0},a=r(n);65279===(e=e.replace(o,"\n")).charCodeAt(0)&&(e=e.slice(1),a.column++,a.offset++);t={type:"root",children:this.tokenizeBlock(e,a),position:{start:n,end:this.eof||r(n)}},this.options.position||i(t,!0);return t};var o=/\r\n|\r/g},function(t,e,n){"use strict";var r=n(55);function i(t){delete t.position}function o(t){t.position=void 0}t.exports=function(t,e){return r(t,e?i:o),t}},function(t,e,n){"use strict";t.exports=i;var r=n(310);function i(t,e,n,i){var a;function s(t,r,u){var c,l=[];return(e&&!a(t,r,u[u.length-1]||null)||!1!==(l=o(n(t,u)))[0])&&t.children&&"skip"!==l[0]&&!1===(c=o(function(t,e){var n,r=i?-1:1,o=(i?t.length:-1)+r;for(;o>-1&&o<t.length;){if(!1===(n=s(t[o],o,e))[0])return n;o="number"==typeof n[1]?n[1]:o+r}}(t.children,u.concat(t))))[0]?c:l}"function"==typeof e&&"function"!=typeof n&&(i=n,n=e,e=null),a=r(e),s(t,null,[])}function o(t){return null!==t&&"object"==typeof t&&"length"in t?t:"number"==typeof t?[!0,t]:[t]}i.CONTINUE=!0,i.SKIP="skip",i.EXIT=!1},function(t,e,n){"use strict";function r(t){if("string"==typeof t)return function(t){return function(e){return Boolean(e&&e.type===t)}}(t);if(null==t)return a;if("object"==typeof t)return("length"in t?o:i)(t);if("function"==typeof t)return t;throw new Error("Expected function, string, or object as test")}function i(t){return function(e){var n;for(n in t)if(e[n]!==t[n])return!1;return!0}}function o(t){var e=function(t){for(var e=[],n=t.length,i=-1;++i<n;)e[i]=r(t[i]);return e}(t),n=e.length;return function(){var t=-1;for(;++t<n;)if(e[t].apply(this,arguments))return!0;return!1}}function a(){return!0}t.exports=r},function(t,e,n){"use strict";var r=n(9);t.exports=function(t,e,n){var i,o,a,s,u=e.charAt(0);if("\n"!==u)return;if(n)return!0;s=1,i=e.length,o=u,a="";for(;s<i&&(u=e.charAt(s),r(u));)a+=u,"\n"===u&&(o+=a,a=""),s++;t(o)}},function(t,e,n){"use strict";var r=n(86),i=n(87);t.exports=function(t,e,n){var r,a,s,u=-1,c=e.length,l="",f="",h="",d="";for(;++u<c;)if(r=e.charAt(u),s)if(s=!1,l+=h,f+=d,h="",d="","\n"===r)h=r,d=r;else for(l+=r,f+=r;++u<c;){if(!(r=e.charAt(u))||"\n"===r){d=r,h=r;break}l+=r,f+=r}else if(" "===r&&e.charAt(u+1)===r&&e.charAt(u+2)===r&&e.charAt(u+3)===r)h+=o,u+=3,s=!0;else if("\t"===r)h+=r,s=!0;else{for(a="";"\t"===r||" "===r;)a+=r,r=e.charAt(++u);if("\n"!==r)break;h+=a+r,d+=r}if(f)return!!n||t(l)({type:"code",lang:null,value:i(f)})};var o=r(" ",4)},function(t,e,n){"use strict";var r=n(87);t.exports=function(t,e,n){var i,o,a,s,u,c,l,f,h,d,p,m=this.options,g=e.length+1,v=0,y="";if(!m.gfm)return;for(;v<g&&(" "===(a=e.charAt(v))||"\t"===a);)y+=a,v++;if(d=v,"~"!==(a=e.charAt(v))&&"`"!==a)return;v++,o=a,i=1,y+=a;for(;v<g&&(a=e.charAt(v))===o;)y+=a,i++,v++;if(i<3)return;for(;v<g&&(" "===(a=e.charAt(v))||"\t"===a);)y+=a,v++;s="",u="";for(;v<g&&"\n"!==(a=e.charAt(v))&&"~"!==a&&"`"!==a;)" "===a||"\t"===a?u+=a:(s+=u+a,u=""),v++;if((a=e.charAt(v))&&"\n"!==a)return;if(n)return!0;(p=t.now()).column+=y.length,p.offset+=y.length,y+=s,s=this.decode.raw(this.unescape(s),p),u&&(y+=u);u="",f="",h="",c="",l="";for(;v<g;)if(a=e.charAt(v),c+=f,l+=h,f="",h="","\n"===a){for(c?(f+=a,h+=a):y+=a,u="",v++;v<g&&" "===(a=e.charAt(v));)u+=a,v++;if(f+=u,h+=u.slice(d),!(u.length>=4)){for(u="";v<g&&(a=e.charAt(v))===o;)u+=a,v++;if(f+=u,h+=u,!(u.length<i)){for(u="";v<g&&(" "===(a=e.charAt(v))||"\t"===a);)f+=a,h+=a,v++;if(!a||"\n"===a)break}}}else c+=a,h+=a,v++;return t(y+=c+f)({type:"code",lang:s||null,value:r(l)})}},function(t,e,n){"use strict";var r=n(25),i=n(88);t.exports=function(t,e,n){var o,a,s,u,c,l,f,h,d,p=this.offset,m=this.blockTokenizers,g=this.interruptBlockquote,v=t.now(),y=v.line,b=e.length,E=[],S=[],w=[],_=0;for(;_<b&&(" "===(a=e.charAt(_))||"\t"===a);)_++;if(">"!==e.charAt(_))return;if(n)return!0;_=0;for(;_<b;){for(u=e.indexOf("\n",_),f=_,h=!1,-1===u&&(u=b);_<b&&(" "===(a=e.charAt(_))||"\t"===a);)_++;if(">"===e.charAt(_)?(_++,h=!0," "===e.charAt(_)&&_++):_=f,c=e.slice(_,u),!h&&!r(c)){_=f;break}if(!h&&(s=e.slice(_),i(g,m,this,[t,s,!0])))break;l=f===_?c:e.slice(f,u),w.push(_-f),E.push(l),S.push(c),_=u+1}_=-1,b=w.length,o=t(E.join("\n"));for(;++_<b;)p[y]=(p[y]||0)+w[_],y++;return d=this.enterBlock(),S=this.tokenizeBlock(S.join("\n"),v),d(),o({type:"blockquote",children:S})}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r,i,o,a=this.options,s=e.length+1,u=-1,c=t.now(),l="",f="";for(;++u<s;){if(" "!==(r=e.charAt(u))&&"\t"!==r){u--;break}l+=r}o=0;for(;++u<=s;){if("#"!==(r=e.charAt(u))){u--;break}l+=r,o++}if(o>6)return;if(!o||!a.pedantic&&"#"===e.charAt(u+1))return;s=e.length+1,i="";for(;++u<s;){if(" "!==(r=e.charAt(u))&&"\t"!==r){u--;break}i+=r}if(!a.pedantic&&0===i.length&&r&&"\n"!==r)return;if(n)return!0;l+=i,i="",f="";for(;++u<s&&(r=e.charAt(u))&&"\n"!==r;)if(" "===r||"\t"===r||"#"===r){for(;" "===r||"\t"===r;)i+=r,r=e.charAt(++u);for(;"#"===r;)i+=r,r=e.charAt(++u);for(;" "===r||"\t"===r;)i+=r,r=e.charAt(++u);u--}else f+=i+r,i="";return c.column+=l.length,c.offset+=l.length,t(l+=f+i)({type:"heading",depth:o,children:this.tokenizeInline(f,c)})}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r,i,o,a,s=-1,u=e.length+1,c="";for(;++s<u&&("\t"===(r=e.charAt(s))||" "===r);)c+=r;if("*"!==r&&"-"!==r&&"_"!==r)return;i=r,c+=r,o=1,a="";for(;++s<u;)if((r=e.charAt(s))===i)o++,c+=a+i,a="";else{if(" "!==r)return o>=3&&(!r||"\n"===r)?(c+=a,!!n||t(c)({type:"thematicBreak"})):void 0;a+=r}}},function(t,e,n){"use strict";var r=n(25),i=n(86),o=n(54),a=n(135),s=n(318),u=n(88);t.exports=function(t,e,n){var i,a,s,c,l,f,h,d,y,b,E,S,w,_,T,x,A,I,P,M,O,C,R,D,k=this.options.commonmark,L=this.options.pedantic,N=this.blockTokenizers,j=this.interruptList,F=0,U=e.length,B=null,H=0;for(;F<U;){if("\t"===(c=e.charAt(F)))H+=4-H%4;else{if(" "!==c)break;H++}F++}if(H>=4)return;if(c=e.charAt(F),i=k?g:m,!0===p[c])l=c,s=!1;else{for(s=!0,a="";F<U&&(c=e.charAt(F),o(c));)a+=c,F++;if(c=e.charAt(F),!a||!0!==i[c])return;B=parseInt(a,10),l=c}if(" "!==(c=e.charAt(++F))&&"\t"!==c)return;if(n)return!0;F=0,_=[],T=[],x=[];for(;F<U;){for(f=e.indexOf("\n",F),h=F,d=!1,D=!1,-1===f&&(f=U),R=F+4,H=0;F<U;){if("\t"===(c=e.charAt(F)))H+=4-H%4;else{if(" "!==c)break;H++}F++}if(H>=4&&(D=!0),A&&H>=A.indent&&(D=!0),c=e.charAt(F),y=null,!D){if(!0===p[c])y=c,F++,H++;else{for(a="";F<U&&(c=e.charAt(F),o(c));)a+=c,F++;c=e.charAt(F),F++,a&&!0===i[c]&&(y=c,H+=a.length+1)}if(y)if("\t"===(c=e.charAt(F)))H+=4-H%4,F++;else if(" "===c){for(R=F+4;F<R&&" "===e.charAt(F);)F++,H++;F===R&&" "===e.charAt(F)&&(F-=3,H-=3)}else"\n"!==c&&""!==c&&(y=null)}if(y){if(!L&&l!==y)break;d=!0}else k||D||" "!==e.charAt(h)?k&&A&&(D=H>=A.indent||H>4):D=!0,d=!1,F=h;if(E=e.slice(h,f),b=h===F?E:e.slice(F,f),("*"===y||"_"===y||"-"===y)&&N.thematicBreak.call(this,t,E,!0))break;if(S=w,w=!r(b).length,D&&A)A.value=A.value.concat(x,E),T=T.concat(x,E),x=[];else if(d)0!==x.length&&(A.value.push(""),A.trail=x.concat()),A={value:[E],indent:H,trail:[]},_.push(A),T=T.concat(x,E),x=[];else if(w){if(S)break;x.push(E)}else{if(S)break;if(u(j,N,this,[t,E,!0]))break;A.value=A.value.concat(x,E),T=T.concat(x,E),x=[]}F=f+1}O=t(T.join("\n")).reset({type:"list",ordered:s,start:B,loose:null,children:[]}),I=this.enterList(),P=this.enterBlock(),M=!1,F=-1,U=_.length;for(;++F<U;)A=_[F].value.join("\n"),C=t.now(),(A=t(A)(v(this,A,C),O)).loose&&(M=!0),A=_[F].trail.join("\n"),F!==U-1&&(A+="\n"),t(A);return I(),P(),O.loose=M,O};var c=/\n\n(?!\s*$)/,l=/^\[([ \t]|x|X)][ \t]/,f=/^([ \t]*)([*+-]|\d+[.)])( {1,4}(?! )| |\t|$|(?=\n))([^\n]*)/,h=/^([ \t]*)([*+-]|\d+[.)])([ \t]+)/,d=/^( {1,4}|\t)?/gm,p={"*":!0,"+":!0,"-":!0},m={".":!0},g={};function v(t,e,n){var r,i,o=t.offset,a=t.options.pedantic?y:b,s=null;return e=a.apply(null,arguments),t.options.gfm&&(r=e.match(l))&&(i=r[0].length,s="x"===r[1].toLowerCase(),o[n.line]+=i,e=e.slice(i)),{type:"listItem",loose:c.test(e)||"\n"===e.charAt(e.length-1),checked:s,children:t.tokenizeBlock(e,n)}}function y(t,e,n){var r=t.offset,i=n.line;return e=e.replace(h,o),i=n.line,e.replace(d,o);function o(t){return r[i]=(r[i]||0)+t.length,i++,""}}function b(t,e,n){var r,o,u,c,l,h,d,p=t.offset,m=n.line;for(c=(e=e.replace(f,(function(t,e,n,a,s){o=e+n+a,u=s,Number(n)<10&&o.length%2==1&&(n=" "+n);return(r=e+i(" ",n.length)+a)+u}))).split("\n"),(l=s(e,a(r).indent).split("\n"))[0]=u,p[m]=(p[m]||0)+o.length,m++,h=0,d=c.length;++h<d;)p[m]=(p[m]||0)+c[h].length-l[h].length,m++;return l.join("\n")}g["."]=!0,g[")"]=!0},function(t,e,n){"use strict";var r=n(25),i=n(86),o=n(135);t.exports=function(t,e){var n,a,s,u,c=t.split("\n"),l=c.length+1,f=1/0,h=[];c.unshift(i(" ",e)+"!");for(;l--;)if(a=o(c[l]),h[l]=a.stops,0!==r(c[l]).length){if(!a.indent){f=1/0;break}a.indent>0&&a.indent<f&&(f=a.indent)}if(f!==1/0)for(l=c.length;l--;){for(s=h[l],n=f;n&&!(n in s);)n--;u=0!==r(c[l]).length&&f&&n!==f?"\t":"",c[l]=u+c[l].slice(n in s?s[n]+1:0)}return c.shift(),c.join("\n")}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i,o,a,s,u,c=t.now(),l=e.length,f=-1,h="";for(;++f<l;){if(" "!==(a=e.charAt(f))||f>=3){f--;break}h+=a}i="",o="";for(;++f<l;){if("\n"===(a=e.charAt(f))){f--;break}" "===a||"\t"===a?o+=a:(i+=o+a,o="")}if(c.column+=h.length,c.offset+=h.length,h+=i+o,a=e.charAt(++f),s=e.charAt(++f),"\n"!==a||!r[s])return;h+=a,o=s,u=r[s];for(;++f<l;){if((a=e.charAt(f))!==s){if("\n"!==a)return;f--;break}o+=a}if(n)return!0;return t(h+o)({type:"heading",depth:u,children:this.tokenizeInline(i,c)})};var r={};r["="]=1,r["-"]=2},function(t,e,n){"use strict";var r=n(136).openCloseTag;t.exports=function(t,e,n){var i,o,a,s,u,c,l,f=this.options.blocks,h=e.length,d=0,p=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Za-z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+f.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(r.source+"\\s*$"),/^$/,!1]];for(;d<h&&("\t"===(s=e.charAt(d))||" "===s);)d++;if("<"!==e.charAt(d))return;i=-1===(i=e.indexOf("\n",d+1))?h:i,o=e.slice(d,i),a=-1,u=p.length;for(;++a<u;)if(p[a][0].test(o)){c=p[a];break}if(!c)return;if(n)return c[2];if(d=i,!c[1].test(o))for(;d<h;){if(i=-1===(i=e.indexOf("\n",d+1))?h:i,o=e.slice(d+1,i),c[1].test(o)){o&&(d=i);break}d=i}return l=e.slice(0,d),t(l)({type:"html",value:l})}},function(t,e,n){"use strict";var r=n(9),i=n(89);t.exports=a,a.notInList=!0,a.notInBlock=!0;var o=/^( {4}|\t)?/gm;function a(t,e,n){var a,s,u,c,l,f,h,d,p,m,g,v,y=this.offset;if(this.options.footnotes){for(a=0,s=e.length,u="",c=t.now(),l=c.line;a<s&&(p=e.charAt(a),r(p));)u+=p,a++;if("["===e.charAt(a)&&"^"===e.charAt(a+1)){for(a=(u+="[^").length,h="";a<s&&"]"!==(p=e.charAt(a));)"\\"===p&&(h+=p,a++,p=e.charAt(a)),h+=p,a++;if(h&&"]"===e.charAt(a)&&":"===e.charAt(a+1)){if(n)return!0;for(m=i(h),a=(u+=h+"]:").length;a<s&&("\t"===(p=e.charAt(a))||" "===p);)u+=p,a++;for(c.column+=u.length,c.offset+=u.length,h="",f="",d="";a<s;){if("\n"===(p=e.charAt(a))){for(d=p,a++;a<s&&"\n"===(p=e.charAt(a));)d+=p,a++;for(h+=d,d="";a<s&&" "===(p=e.charAt(a));)d+=p,a++;if(0===d.length)break;h+=d}h&&(f+=h,h=""),f+=p,a++}return u+=f,f=f.replace(o,(function(t){return y[l]=(y[l]||0)+t.length,l++,""})),g=t(u),v=this.enterBlock(),f=this.tokenizeBlock(f,c),v(),g({type:"footnoteDefinition",identifier:m,children:f})}}}}},function(t,e,n){"use strict";t.exports=function(t){return String(t).replace(/\s+/g," ")}},function(t,e,n){"use strict";var r=n(9),i=n(89);t.exports=o,o.notInList=!0,o.notInBlock=!0;function o(t,e,n){for(var r,o,u,c,l,f,h,d,p=this.options.commonmark,m=0,g=e.length,v="";m<g&&(" "===(c=e.charAt(m))||"\t"===c);)v+=c,m++;if("["===(c=e.charAt(m))){for(m++,v+=c,u="";m<g&&"]"!==(c=e.charAt(m));)"\\"===c&&(u+=c,m++,c=e.charAt(m)),u+=c,m++;if(u&&"]"===e.charAt(m)&&":"===e.charAt(m+1)){for(f=u,m=(v+=u+"]:").length,u="";m<g&&("\t"===(c=e.charAt(m))||" "===c||"\n"===c);)v+=c,m++;if(u="",r=v,"<"===(c=e.charAt(m))){for(m++;m<g&&a(c=e.charAt(m));)u+=c,m++;if((c=e.charAt(m))===a.delimiter)v+="<"+u+c,m++;else{if(p)return;m-=u.length+1,u=""}}if(!u){for(;m<g&&s(c=e.charAt(m));)u+=c,m++;v+=u}if(u){for(h=u,u="";m<g&&("\t"===(c=e.charAt(m))||" "===c||"\n"===c);)u+=c,m++;if(l=null,'"'===(c=e.charAt(m))?l='"':"'"===c?l="'":"("===c&&(l=")"),l){if(!u)return;for(m=(v+=u+c).length,u="";m<g&&(c=e.charAt(m))!==l;){if("\n"===c){if(m++,"\n"===(c=e.charAt(m))||c===l)return;u+="\n"}u+=c,m++}if((c=e.charAt(m))!==l)return;o=v,v+=u+c,m++,d=u,u=""}else u="",m=v.length;for(;m<g&&("\t"===(c=e.charAt(m))||" "===c);)v+=c,m++;return(c=e.charAt(m))&&"\n"!==c?void 0:!!n||(r=t(r).test().end,h=this.decode.raw(this.unescape(h),r,{nonTerminated:!1}),d&&(o=t(o).test().end,d=this.decode.raw(this.unescape(d),o)),t(v)({type:"definition",identifier:i(f),title:d||null,url:h}))}}}}function a(t){return">"!==t&&"["!==t&&"]"!==t}function s(t){return"["!==t&&"]"!==t&&!r(t)}a.delimiter=">"},function(t,e,n){"use strict";var r=n(9);t.exports=function(t,e,n){var i,o,a,s,u,c,l,f,h,d,p,m,g,v,y,b,E,S,w,_,T,x,A,I;if(!this.options.gfm)return;i=0,S=0,c=e.length+1,l=[];for(;i<c;){if(x=e.indexOf("\n",i),A=e.indexOf("|",i+1),-1===x&&(x=e.length),-1===A||A>x){if(S<2)return;break}l.push(e.slice(i,x)),S++,i=x+1}s=l.join("\n"),o=l.splice(1,1)[0]||[],i=0,c=o.length,S--,a=!1,p=[];for(;i<c;){if("|"===(h=o.charAt(i))){if(d=null,!1===a){if(!1===I)return}else p.push(a),a=!1;I=!1}else if("-"===h)d=!0,a=a||null;else if(":"===h)a="left"===a?"center":d&&null===a?"right":"left";else if(!r(h))return;i++}!1!==a&&p.push(a);if(p.length<1)return;if(n)return!0;E=-1,_=[],T=t(s).reset({type:"table",align:p,children:_});for(;++E<S;){for(w=l[E],u={type:"tableRow",children:[]},E&&t("\n"),t(w).reset(u,T),c=w.length+1,i=0,f="",m="",g=!0,v=null,y=null;i<c;)if("\t"!==(h=w.charAt(i))&&" "!==h){if(""===h||"|"===h)if(g)t(h);else{if(h&&y){f+=h,i++;continue}!m&&!h||g||(s=m,f.length>1&&(h?(s+=f.slice(0,f.length-1),f=f.charAt(f.length-1)):(s+=f,f="")),b=t.now(),t(s)({type:"tableCell",children:this.tokenizeInline(m,b)},u)),t(f+h),f="",m=""}else if(f&&(m+=f,f=""),m+=h,"\\"===h&&i!==c-2&&(m+=w.charAt(i+1),i++),"`"===h){for(v=1;w.charAt(i+1)===h;)m+=h,i++,v++;y?v>=y&&(y=0):y=v}g=!1,i++}else m?f+=h:t(h),i++;E||t("\n"+o)}return T}},function(t,e,n){"use strict";var r=n(25),i=n(54),o=n(87),a=n(88);t.exports=function(t,e,n){var s,u,c,l,f,h=this.options,d=h.commonmark,p=h.gfm,m=this.blockTokenizers,g=this.interruptParagraph,v=e.indexOf("\n"),y=e.length;for(;v<y;){if(-1===v){v=y;break}if("\n"===e.charAt(v+1))break;if(d){for(l=0,s=v+1;s<y;){if("\t"===(c=e.charAt(s))){l=4;break}if(" "!==c)break;l++,s++}if(l>=4){v=e.indexOf("\n",v+1);continue}}if(u=e.slice(v+1),a(g,m,this,[t,u,!0]))break;if(m.list.call(this,t,u,!0)&&(this.inList||d||p&&!i(r.left(u).charAt(0))))break;if(s=v,-1!==(v=e.indexOf("\n",v+1))&&""===r(e.slice(s,v))){v=s;break}}if(u=e.slice(0,v),""===r(u))return t(u),null;if(n)return!0;return f=t.now(),u=o(u),t(u)({type:"paragraph",children:this.tokenizeInline(u,f)})}},function(t,e,n){"use strict";var r=n(327);function i(t,e,n){var r,i;if("\\"===e.charAt(0)&&(r=e.charAt(1),-1!==this.escape.indexOf(r)))return!!n||(i="\n"===r?{type:"break"}:{type:"text",value:r},t("\\"+r)(i))}t.exports=i,i.locator=r},function(t,e,n){"use strict";t.exports=function(t,e){return t.indexOf("\\",e)}},function(t,e,n){"use strict";var r=n(9),i=n(85),o=n(137);t.exports=s,s.locator=o,s.notInLink=!0;var a="mailto:".length;function s(t,e,n){var o,s,u,c,l,f,h,d,p,m,g;if("<"===e.charAt(0)){for(this,o="",s=e.length,u=0,c="",f=!1,h="",u++,o="<";u<s&&(l=e.charAt(u),!(r(l)||">"===l||"@"===l||":"===l&&"/"===e.charAt(u+1)));)c+=l,u++;if(c){if(h+=c,c="",h+=l=e.charAt(u),u++,"@"===l)f=!0;else{if(":"!==l||"/"!==e.charAt(u+1))return;h+="/",u++}for(;u<s&&(l=e.charAt(u),!r(l)&&">"!==l);)c+=l,u++;if(l=e.charAt(u),c&&">"===l)return!!n||(p=h+=c,o+=h+l,(d=t.now()).column++,d.offset++,f&&("mailto:"===h.slice(0,a).toLowerCase()?(p=p.substr(a),d.column+=a,d.offset+=a):h="mailto:"+h),m=this.inlineTokenizers,this.inlineTokenizers={text:m.text},g=this.enterLink(),p=this.tokenizeInline(p,d),this.inlineTokenizers=m,g(),t(o)({type:"link",title:null,url:i(h,{nonTerminated:!1}),children:p}))}}}},function(t,e,n){"use strict";var r=n(85),i=n(9),o=n(330);t.exports=u,u.locator=o,u.notInLink=!0;var a=["http://","https://","mailto:"],s=a.length;function u(t,e,n){var o,u,c,l,f,h,d,p,m,g,v,y;if(this.options.gfm){for(o="",l=-1,p=s;++l<p;)if(h=a[l],(d=e.slice(0,h.length)).toLowerCase()===h){o=d;break}if(o){for(l=o.length,p=e.length,m="",g=0;l<p&&(c=e.charAt(l),!i(c)&&"<"!==c)&&("."!==c&&","!==c&&":"!==c&&";"!==c&&'"'!==c&&"'"!==c&&")"!==c&&"]"!==c||(v=e.charAt(l+1))&&!i(v))&&("("!==c&&"["!==c||g++,")"!==c&&"]"!==c||!(--g<0));)m+=c,l++;if(m){if(u=o+=m,"mailto:"===h){if(-1===(f=m.indexOf("@"))||f===p-1)return;u=u.substr("mailto:".length)}return!!n||(y=this.enterLink(),u=this.tokenizeInline(u,t.now()),y(),t(o)({type:"link",title:null,url:r(o,{nonTerminated:!1}),children:u}))}}}}},function(t,e,n){"use strict";t.exports=function(t,e){var n,i=r.length,o=-1,a=-1;if(!this.options.gfm)return-1;for(;++o<i;)-1!==(n=t.indexOf(r[o],e))&&(n<a||-1===a)&&(a=n);return a};var r=["https://","http://","mailto:"]},function(t,e,n){"use strict";var r=n(133),i=n(137),o=n(136).tag;t.exports=u,u.locator=i;var a=/^<a /i,s=/^<\/a>/i;function u(t,e,n){var i,u,c=e.length;if(!("<"!==e.charAt(0)||c<3)&&(i=e.charAt(1),(r(i)||"?"===i||"!"===i||"/"===i)&&(u=e.match(o))))return!!n||(u=u[0],!this.inLink&&a.test(u)?this.inLink=!0:this.inLink&&s.test(u)&&(this.inLink=!1),t(u)({type:"html",value:u}))}},function(t,e,n){"use strict";var r=n(9),i=n(138);t.exports=u,u.locator=i;var o={}.hasOwnProperty,a={'"':'"',"'":"'"},s={};function u(t,e,n){var i,u,c,l,f,h,d,p,m,g,v,y,b,E,S,w,_,T,x,A="",I=0,P=e.charAt(0),M=this.options.pedantic,O=this.options.commonmark,C=this.options.gfm;if("!"===P&&(m=!0,A=P,P=e.charAt(++I)),"["===P&&(m||!this.inLink)){for(A+=P,S="",I++,y=e.length,E=0,(_=t.now()).column+=I,_.offset+=I;I<y;){if(h=P=e.charAt(I),"`"===P){for(u=1;"`"===e.charAt(I+1);)h+=P,I++,u++;c?u>=c&&(c=0):c=u}else if("\\"===P)I++,h+=e.charAt(I);else if(c&&!C||"["!==P){if((!c||C)&&"]"===P){if(!E){if(!M)for(;I<y&&(P=e.charAt(I+1),r(P));)h+=P,I++;if("("!==e.charAt(I+1))return;h+="(",i=!0,I++;break}E--}}else E++;S+=h,h="",I++}if(i){for(g=S,A+=S+h,I++;I<y&&(P=e.charAt(I),r(P));)A+=P,I++;if(P=e.charAt(I),p=O?s:a,S="",l=A,"<"===P){for(I++,l+="<";I<y&&">"!==(P=e.charAt(I));){if(O&&"\n"===P)return;S+=P,I++}if(">"!==e.charAt(I))return;A+="<"+S+">",w=S,I++}else{for(P=null,h="";I<y&&(P=e.charAt(I),!h||!o.call(p,P));){if(r(P)){if(!M)break;h+=P}else{if("("===P)E++;else if(")"===P){if(0===E)break;E--}S+=h,h="","\\"===P&&(S+="\\",P=e.charAt(++I)),S+=P}I++}w=S,I=(A+=S).length}for(S="";I<y&&(P=e.charAt(I),r(P));)S+=P,I++;if(P=e.charAt(I),A+=S,S&&o.call(p,P))if(I++,A+=P,S="",v=p[P],f=A,O){for(;I<y&&(P=e.charAt(I))!==v;)"\\"===P&&(S+="\\",P=e.charAt(++I)),I++,S+=P;if((P=e.charAt(I))!==v)return;for(b=S,A+=S+P,I++;I<y&&(P=e.charAt(I),r(P));)A+=P,I++}else for(h="";I<y;){if((P=e.charAt(I))===v)d&&(S+=v+h,h=""),d=!0;else if(d){if(")"===P){A+=S+v+h,b=S;break}r(P)?h+=P:(S+=v+h+P,h="",d=!1)}else S+=P;I++}if(")"===e.charAt(I))return!!n||(A+=")",w=this.decode.raw(this.unescape(w),t(l).test().end,{nonTerminated:!1}),b&&(f=t(f).test().end,b=this.decode.raw(this.unescape(b),f)),x={type:m?"image":"link",title:b||null,url:w},m?x.alt=this.decode.raw(this.unescape(g),_)||null:(T=this.enterLink(),x.children=this.tokenizeInline(g,_),T()),t(A)(x))}}}s['"']='"',s["'"]="'",s["("]=")"},function(t,e,n){"use strict";var r=n(9),i=n(138),o=n(89);t.exports=a,a.locator=i;function a(t,e,n){var i,a,s,u,c,l,f,h,d=e.charAt(0),p=0,m=e.length,g="",v="",y="link",b="shortcut";if("!"===d&&(y="image",v=d,d=e.charAt(++p)),"["===d){if(p++,v+=d,l="",this.options.footnotes&&"^"===e.charAt(p)){if("image"===y)return;v+="^",p++,y="footnote"}for(h=0;p<m;){if("["===(d=e.charAt(p)))f=!0,h++;else if("]"===d){if(!h)break;h--}"\\"===d&&(l+="\\",d=e.charAt(++p)),l+=d,p++}if(g=l,i=l,"]"===(d=e.charAt(p))){for(p++,g+=d,l="";p<m&&(d=e.charAt(p),r(d));)l+=d,p++;if(d=e.charAt(p),"footnote"!==y&&"["===d){for(a="",l+=d,p++;p<m&&"["!==(d=e.charAt(p))&&"]"!==d;)"\\"===d&&(a+="\\",d=e.charAt(++p)),a+=d,p++;"]"===(d=e.charAt(p))?(b=a?"full":"collapsed",l+=a+d,p++):a="",g+=l,l=""}else{if(!i)return;a=i}if("full"===b||!f)return g=v+g,"link"===y&&this.inLink?null:!!n||("footnote"===y&&-1!==i.indexOf(" ")?t(g)({type:"footnote",children:this.tokenizeInline(i,t.now())}):((s=t.now()).column+=v.length,s.offset+=v.length,u={type:y+"Reference",identifier:o(a="full"===b?a:i)},"link"!==y&&"image"!==y||(u.referenceType=b),"link"===y?(c=this.enterLink(),u.children=this.tokenizeInline(i,s),c()):"image"===y&&(u.alt=this.decode.raw(this.unescape(i),s)||null),t(g)(u)))}}}},function(t,e,n){"use strict";var r=n(25),i=n(9),o=n(335);t.exports=a,a.locator=o;function a(t,e,n){var o,a,s,u,c,l,f,h=0,d=e.charAt(h);if(!("*"!==d&&"_"!==d||e.charAt(++h)!==d||(a=this.options.pedantic,c=(s=d)+s,l=e.length,h++,u="",d="",a&&i(e.charAt(h)))))for(;h<l;){if(f=d,!((d=e.charAt(h))!==s||e.charAt(h+1)!==s||a&&i(f))&&(d=e.charAt(h+2))!==s){if(!r(u))return;return!!n||((o=t.now()).column+=2,o.offset+=2,t(c+u+c)({type:"strong",children:this.tokenizeInline(u,o)}))}a||"\\"!==d||(u+=d,d=e.charAt(++h)),u+=d,h++}}},function(t,e,n){"use strict";t.exports=function(t,e){var n=t.indexOf("**",e),r=t.indexOf("__",e);if(-1===r)return n;if(-1===n)return r;return r<n?r:n}},function(t,e,n){"use strict";var r=n(25),i=n(337),o=n(9),a=n(338);t.exports=s,s.locator=a;function s(t,e,n){var a,s,u,c,l,f,h,d=0,p=e.charAt(d);if(!("*"!==p&&"_"!==p||(s=this.options.pedantic,l=p,u=p,f=e.length,d++,c="",p="",s&&o(e.charAt(d)))))for(;d<f;){if(h=p,!((p=e.charAt(d))!==u||s&&o(h))){if((p=e.charAt(++d))!==u){if(!r(c)||h===u)return;if(!s&&"_"===u&&i(p)){c+=u;continue}return!!n||((a=t.now()).column++,a.offset++,t(l+c+u)({type:"emphasis",children:this.tokenizeInline(c,a)}))}c+=u}s||"\\"!==p||(c+=p,p=e.charAt(++d)),c+=p,d++}}},function(t,e,n){"use strict";t.exports=function(t){return i.test("number"==typeof t?r(t):t.charAt(0))};var r=String.fromCharCode,i=/\w/},function(t,e,n){"use strict";t.exports=function(t,e){var n=t.indexOf("*",e),r=t.indexOf("_",e);if(-1===r)return n;if(-1===n)return r;return r<n?r:n}},function(t,e,n){"use strict";var r=n(9),i=n(340);t.exports=o,o.locator=i;function o(t,e,n){var i,o,a,s="",u="",c="",l="";if(this.options.gfm&&"~"===e.charAt(0)&&"~"===e.charAt(1)&&!r(e.charAt(2)))for(i=1,o=e.length,(a=t.now()).column+=2,a.offset+=2;++i<o;){if(!("~"!==(s=e.charAt(i))||"~"!==u||c&&r(c)))return!!n||t("~~"+l+"~~")({type:"delete",children:this.tokenizeInline(l,a)});l+=u,c=u,u=s}}},function(t,e,n){"use strict";t.exports=function(t,e){return t.indexOf("~~",e)}},function(t,e,n){"use strict";var r=n(9),i=n(342);t.exports=o,o.locator=i;function o(t,e,n){for(var i,o,a,s,u,c,l,f,h=e.length,d=0,p="",m="";d<h&&"`"===e.charAt(d);)p+="`",d++;if(p){for(u=p,s=d,p="",f=e.charAt(d),a=0;d<h;){if(c=f,f=e.charAt(d+1),"`"===c?(a++,m+=c):(a=0,p+=c),a&&"`"!==f){if(a===s){u+=p+m,l=!0;break}p+=m,m=""}d++}if(!l){if(s%2!=0)return;p=""}if(n)return!0;for(i="",o="",h=p.length,d=-1;++d<h;)c=p.charAt(d),r(c)?o+=c:(o&&(i&&(i+=o),o=""),i+=c);return t(u)({type:"inlineCode",value:i})}}},function(t,e,n){"use strict";t.exports=function(t,e){return t.indexOf("`",e)}},function(t,e,n){"use strict";var r=n(344);t.exports=i,i.locator=r;function i(t,e,n){for(var r,i=e.length,o=-1,a="";++o<i;){if("\n"===(r=e.charAt(o))){if(o<2)return;return!!n||t(a+=r)({type:"break"})}if(" "!==r)return;a+=r}}},function(t,e,n){"use strict";t.exports=function(t,e){var n=t.indexOf("\n",e);for(;n>e&&" "===t.charAt(n-1);)n--;return n}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r,i,o,a,s,u,c,l,f,h;if(n)return!0;r=this.inlineMethods,a=r.length,i=this.inlineTokenizers,o=-1,f=e.length;for(;++o<a;)"text"!==(l=r[o])&&i[l]&&((c=i[l].locator)||t.file.fail("Missing locator: `"+l+"`"),-1!==(u=c.call(this,e,1))&&u<f&&(f=u));s=e.slice(0,f),h=t.now(),this.decode(s,h,(function(e,n,r){t(r||e)({type:"text",value:e})}))}},function(t,e,n){t.exports=n(347)()},function(t,e,n){"use strict";var r=n(348);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var r=n(350);t.exports=function(){return function(t){return r(t,"list",(function(t,e){var n,r,i=0;for(n=0,r=e.length;n<r;n++)"list"===e[n].type&&(i+=1);for(n=0,r=t.children.length;n<r;n++){var o=t.children[n];o.index=n,o.ordered=t.ordered}t.depth=i})),t}}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=[];"function"==typeof e&&(n=e,e=null);function i(t){var o;return e&&t.type!==e||(o=n(t,r.concat())),t.children&&!1!==o?function(t,e){var n,o=t.length,a=-1;r.push(e);for(;++a<o;)if((n=t[a])&&!1===i(n))return!1;return r.pop(),!0}(t.children,t):o}i(t)}},function(t,e,n){"use strict";var r=n(55),i=/^<(area|base|br|col|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\s*\/?>$/i,o=/^<(\/?)([a-z]+)\s*>$/;t.exports=function(t){var e,n;return r(t,"html",(function(t,r,a){n!==a&&(e=[],n=a);var s=function(t){var e=t.value.match(i);return!!e&&e[1]}(t);if(s)return a.children.splice(r,1,{type:"virtualHtml",tag:s,position:t.position}),!0;var u=function(t,e){var n=t.value.match(o);return!!n&&{tag:n[2],opening:!n[1],node:t}}(t);if(!u)return!0;var c=function(t,e){var n=t.length;for(;n--;)if(t[n].tag===e)return t.splice(n,1)[0];return!1}(e,u.tag);return c?a.children.splice(r,0,function(t,e,n){var r=n.children.indexOf(t.node),i=n.children.indexOf(e.node),o=n.children.splice(r,i-r+1).slice(1,-1);return{type:"virtualHtml",children:o,tag:t.tag,position:{start:t.node.position.start,end:e.node.position.end,indent:[]}}}(u,c,a)):u.opening||e.push(u),!0}),!0),t}},function(t,e,n){"use strict";var r=n(55);function i(t,e,n,r){if("remove"===r)n.children.splice(e,1);else if("unwrap"===r){var i=[e,1];t.children&&(i=i.concat(t.children)),Array.prototype.splice.apply(n.children,i)}}e.ofType=function(t,e){return function(e){return t.forEach((function(t){return r(e,t,n,!0)})),e};function n(t,n,r){r&&i(t,n,r,e)}},e.ifNotMatch=function(t,e){return function(t){return r(t,n,!0),t};function n(n,r,o){o&&!t(n,r,o)&&i(n,r,o,e)}}},function(t,e,n){"use strict";var r=n(0),i=n(14),o=n(354),a={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=e.renderers[t.type];void 0===t.position&&(t.position=n.node&&n.node.position||a);var l=t.position.start,f=[t.type,l.line,l.column,i].join("-");if(!o.isValidElementType(c))throw new Error("Renderer for type `".concat(t.type,"` not defined or is not renderable"));var h=u(t,f,e,c,n,i);return r.createElement(c,h,h.children||d()||void 0);function d(){return t.children&&t.children.map((function(n,r){return s(n,e,{node:t,props:h},r)}))}}function u(t,e,n,o,a,u){var l,f={key:e},h="string"==typeof o;n.sourcePos&&t.position&&(f["data-sourcepos"]=[(l=t.position).start.line,":",l.start.column,"-",l.end.line,":",l.end.column].map(String).join("")),n.rawSourcePos&&!h&&(f.sourcePosition=t.position),n.includeNodeIndex&&a.node&&a.node.children&&!h&&(f.index=a.node.children.indexOf(t),f.parentChildCount=a.node.children.length);var d=null!==t.identifier&&void 0!==t.identifier?n.definitions[t.identifier]||{}:null;switch(t.type){case"root":c(f,{className:n.className});break;case"text":f.nodeKey=e,f.children=t.value;break;case"heading":f.level=t.depth;break;case"list":f.start=t.start,f.ordered=t.ordered,f.tight=!t.loose,f.depth=t.depth;break;case"listItem":f.checked=t.checked,f.tight=!t.loose,f.ordered=t.ordered,f.index=t.index,f.children=function(t,e){if(t.loose)return t.children;if(e.node&&t.index>0&&e.node.children[t.index-1].loose)return t.children;return function(t){return t.children.reduce((function(t,e){return t.concat("paragraph"===e.type?e.children||[]:[e])}),[])}(t)}(t,a).map((function(e,r){return s(e,n,{node:t,props:f},r)}));break;case"definition":c(f,{identifier:t.identifier,title:t.title,url:t.url});break;case"code":c(f,{language:t.lang&&t.lang.split(/\s/,1)[0]});break;case"inlineCode":f.children=t.value,f.inline=!0;break;case"link":c(f,{title:t.title||void 0,target:"function"==typeof n.linkTarget?n.linkTarget(t.url,t.children,t.title):n.linkTarget,href:n.transformLinkUri?n.transformLinkUri(t.url,t.children,t.title):t.url});break;case"image":c(f,{alt:t.alt||void 0,title:t.title||void 0,src:n.transformImageUri?n.transformImageUri(t.url,t.children,t.title,t.alt):t.url});break;case"linkReference":c(f,i(d,{href:n.transformLinkUri?n.transformLinkUri(d.href):d.href}));break;case"imageReference":c(f,{src:n.transformImageUri&&d.href?n.transformImageUri(d.href,t.children,d.title,t.alt):d.href,title:d.title||void 0,alt:t.alt||void 0});break;case"table":case"tableHead":case"tableBody":f.columnAlignment=t.align;break;case"tableRow":f.isHeader="tableHead"===a.node.type,f.columnAlignment=a.props.columnAlignment;break;case"tableCell":c(f,{isHeader:a.props.isHeader,align:a.props.columnAlignment[u]});break;case"virtualHtml":f.tag=t.tag;break;case"html":f.isBlock=t.position.start.line!==t.position.end.line,f.escapeHtml=n.escapeHtml,f.skipHtml=n.skipHtml;break;case"parsedHtml":var p;t.children&&(p=t.children.map((function(e,r){return s(e,n,{node:t,props:f},r)}))),f.escapeHtml=n.escapeHtml,f.skipHtml=n.skipHtml,f.element=function(t,e){var n=t.element;if(Array.isArray(n)){var i=r.Fragment||"div";return r.createElement(i,null,n)}if(n.props.children||e){var o=r.Children.toArray(n.props.children).concat(e);return r.cloneElement(n,null,o)}return r.cloneElement(n,null)}(t,p);break;default:c(f,i(t,{type:void 0,position:void 0,children:void 0}))}return!h&&t.value&&(f.value=t.value),f}function c(t,e){for(var n in e)void 0!==e[n]&&(t[n]=e[n])}t.exports=s},function(t,e,n){"use strict";t.exports=n(355)},function(t,e,n){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,E=r?Symbol.for("react.responder"):60118,S=r?Symbol.for("react.scope"):60119;function w(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case f:case h:case a:case u:case s:case p:return t;default:switch(t=t&&t.$$typeof){case l:case d:case v:case g:case c:return t;default:return e}}case o:return e}}}function _(t){return w(t)===h}e.AsyncMode=f,e.ConcurrentMode=h,e.ContextConsumer=l,e.ContextProvider=c,e.Element=i,e.ForwardRef=d,e.Fragment=a,e.Lazy=v,e.Memo=g,e.Portal=o,e.Profiler=u,e.StrictMode=s,e.Suspense=p,e.isAsyncMode=function(t){return _(t)||w(t)===f},e.isConcurrentMode=_,e.isContextConsumer=function(t){return w(t)===l},e.isContextProvider=function(t){return w(t)===c},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return w(t)===d},e.isFragment=function(t){return w(t)===a},e.isLazy=function(t){return w(t)===v},e.isMemo=function(t){return w(t)===g},e.isPortal=function(t){return w(t)===o},e.isProfiler=function(t){return w(t)===u},e.isStrictMode=function(t){return w(t)===s},e.isSuspense=function(t){return w(t)===p},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===a||t===h||t===u||t===s||t===p||t===m||"object"==typeof t&&null!==t&&(t.$$typeof===v||t.$$typeof===g||t.$$typeof===c||t.$$typeof===l||t.$$typeof===d||t.$$typeof===b||t.$$typeof===E||t.$$typeof===S||t.$$typeof===y)},e.typeOf=w},function(t,e,n){"use strict";var r=n(55);function i(t){var e=t.children;t.children=[{type:"tableHead",align:t.align,children:[e[0]],position:e[0].position}],e.length>1&&t.children.push({type:"tableBody",align:t.align,children:e.slice(1),position:{start:e[1].position.start,end:e[e.length-1].position.end}})}t.exports=function(t){return r(t,"table",i),t}},function(t,e,n){"use strict";t.exports=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(e.children||[]).reduce((function(e,n){return"definition"===n.type&&(e[n.identifier]={href:n.url,title:n.title}),t(n,e)}),n)}},function(t,e,n){"use strict";var r=["http","https","mailto","tel"];t.exports=function(t){var e=(t||"").trim(),n=e.charAt(0);if("#"===n||"/"===n)return e;var i=e.indexOf(":");if(-1===i)return e;for(var o=r.length,a=-1;++a<o;){var s=r[a];if(i===s.length&&e.slice(0,s.length).toLowerCase()===s)return e}return-1!==(a=e.indexOf("?"))&&i>a||-1!==(a=e.indexOf("#"))&&i>a?e:"javascript:void(0)"}},function(t,e,n){"use strict";var r=n(14),i=n(0),o=parseInt((i.version||"16").slice(0,2),10)>=16,a=i.createElement;function s(t,e){return a(t,u(e),e.children)}function u(t){return t["data-sourcepos"]?{"data-sourcepos":t["data-sourcepos"]}:{}}t.exports={break:"br",paragraph:"p",emphasis:"em",strong:"strong",thematicBreak:"hr",blockquote:"blockquote",delete:"del",link:"a",image:"img",linkReference:"a",imageReference:"img",table:s.bind(null,"table"),tableHead:s.bind(null,"thead"),tableBody:s.bind(null,"tbody"),tableRow:s.bind(null,"tr"),tableCell:function(t){var e=t.align?{textAlign:t.align}:void 0,n=u(t);return a(t.isHeader?"th":"td",e?r({style:e},n):n,t.children)},root:function(t){var e=!t.className,n=e&&i.Fragment||"div";return a(n,e?null:t,t.children)},text:function(t){return o?t.children:a("span",null,t.children)},list:function(t){var e=u(t);null!==t.start&&1!==t.start&&void 0!==t.start&&(e.start=t.start.toString());return a(t.ordered?"ol":"ul",e,t.children)},listItem:function(t){var e=null;if(null!==t.checked&&void 0!==t.checked){var n=t.checked;e=a("input",{type:"checkbox",checked:n,readOnly:!0})}return a("li",u(t),e,t.children)},definition:function(){return null},heading:function(t){return a("h".concat(t.level),u(t),t.children)},inlineCode:function(t){return a("code",u(t),t.children)},code:function(t){var e=t.language&&"language-".concat(t.language),n=a("code",e?{className:e}:null,t.value);return a("pre",u(t),n)},html:function(t){if(t.skipHtml)return null;var e=t.isBlock?"div":"span";if(t.escapeHtml){var n=i.Fragment||e;return a(n,null,t.value)}var r={dangerouslySetInnerHTML:{__html:t.value}};return a(e,r)},virtualHtml:function(t){return a(t.tag,u(t),t.children)},parsedHtml:function(t){return t["data-sourcepos"]?i.cloneElement(t.element,{"data-sourcepos":t["data-sourcepos"]}):t.element}}},function(t,e,n){"use strict";e.HtmlParser="undefined"==typeof Symbol?"__RMD_HTML_PARSER__":Symbol("__RMD_HTML_PARSER__")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncMarkdownRenderers=void 0;const r=n(0);e.AsyncMarkdownRenderers=()=>({thematicBreak:i,code:o});const i=t=>r.createElement("hr",{style:{borderColor:"#c0cbdc",width:128}});class o extends r.Component{componentDidMount(){"undefined"!=typeof PR&&PR.prettyPrint()}render(){return r.createElement("pre",{className:"prettyprint linenums"},r.createElement("code",{className:"lang-js"},this.props.value))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PageAnnouncements=void 0;const r=n(0),i=n(84);e.PageAnnouncements=t=>r.createElement("div",{style:{marginTop:100,width:"75%"}},r.createElement(i.AsyncMarkdown,{className:"main_text",url:"doc/announcements.md"}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PageDeepDive=void 0;const r=n(0),i=n(84),o=n(364),a=[["Overview","doc/deepdive/overview.md"],["Entities","doc/deepdive/entities.md"],["Game Events","doc/deepdive/game_events.md"],["Rendering","doc/deepdive/rendering.md"],["Physics","doc/deepdive/physics.md"],["Input","doc/deepdive/input.md"],["Player","doc/deepdive/player.md"],["Entity Interaction","doc/deepdive/entity_interaction.md"],["UI","doc/deepdive/ui.md"]];e.PageDeepDive=t=>(r.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual");const t=new URLSearchParams(window.location.search);if(t){const e=t.get("deepdive"),n=a.findIndex(t=>t[0]===e);n>0&&window.scrollTo(0,128+32*n)}},[]),r.createElement("div",{style:{marginTop:100,width:"75%",textAlign:"center",marginBottom:512}},r.createElement(i.AsyncMarkdown,{className:"deepdive_text",url:"doc/deepdive_intro.md"}),r.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"left"}},a.map(s))));const s=([t,e])=>{let n=!1;const a=new URLSearchParams(window.location.search);if(a){const e=a.get("deepdive");e&&(n=e===t)}return r.createElement(o.Dropdown,{title:t,toDraw:()=>r.createElement(i.AsyncMarkdown,{className:"deepdive_text deepdive_item",url:e}),startSelected:n,onSelect:()=>{const e=new URLSearchParams(window.location.search);e.set("deepdive",t),history.replaceState(null,null,"?"+e.toString())},onDeselect:()=>{}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dropdown=void 0;const r=n(0),i=n(5);e.Dropdown=t=>{const[e,n]=r.useState(!1),[s,u]=r.useState(t.startSelected),{title:c,toDraw:l}=t;return r.createElement(r.Fragment,null,r.createElement("div",{className:"deepdive_text unselectable",style:{width:"100%",backgroundColor:e?"#3a4466":"#2d2d2d",borderRadius:8,paddingLeft:16,marginTop:8,cursor:"pointer",fontSize:i.TextSize.SMALL},onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:()=>{u(!s),s?t.onDeselect():t.onSelect()}},s?r.createElement(a,null):r.createElement(o,null)," ",c),r.createElement(r.Fragment,null,s&&l()))};const o=()=>r.createElement(r.Fragment,null,""),a=()=>r.createElement(r.Fragment,null,"")}]);